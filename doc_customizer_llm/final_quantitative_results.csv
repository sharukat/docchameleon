Package,Java API,Question,SISE,CROKAGE,DocChameleon,SISE_context_relevancy,CROKAGE_context_relevancy
applet,Applet,Loading and displaying local Images in Java Applet,['<p>If you re still seeing an  Illegal Escape Character  error on line 57  it s down to the string literal you re passing when instantiating <code>order</code>:</p>\nTherefore  every time you use a back slash  the compiler thinks you re trying to escape the character that follows it.\n<p>...the compiler is treating <code>\\D</code> as a single escaped character rather than as two characters.\nThe compiler error you re seeing is telling you that it doesn t recognise some of the escaped characters (<code>\\D</code>  <code>\\A</code>  <code>\\t</code>) in that string.\n<p>The solution is to escape the escape character  e.g. prefix each backslash with a blackslash:</p>\n<p>This tells the compiler to treat the backslashes as backslashes  rather than as escape characters.\nitself  then you can embed one into the other  for your specific case you can embed <strong>\n<p>There are so many things wrong with the applets it is hard to know where to begin.\nBut let us concentrate 1st on a more sensible strategy to cause the change beteween one view and another.</p>\nInstead of having two applets  have two panels that are swapped in a <code>CardLayout</code></li> <li>Instead of having both applets in one page  call <code>getAppletContext().\nPresumably <code>secondAppletURL</code> is different to the URL of the page that hosts the first applet.</li> </ol>\nDon t try to set the size of an applet.\nmethod might be called repeatedly.\nAs a stylistic point  it is typically better to create an anonymous inner <code>ActionListener</code>\nthan implement it on the parent class.</li> <li>Overriding <code>paint()</code> with an empty implementation is not a good idea.\nThe methods in the <code>actionPerformed()</code> are equally nonsensical.\nuntil after <code>init()</code> &amp; <code>start()</code> have been called  which would mean that calling those methods explicitly causes them to be invoked a second time.\nmethod is meant to be called multiple times  the <code>init()</code>\n<p>I had the very same problem and found a trick that need to be applied server side.\nIt seems that jars aren t cached if their mime type is incorrect.\n<p>Another problem I found is related to a specific jar.\nMy archive parameter was listing many jars  but only a few were cached.\nI found that all jars upto a specific one where cached  all remaining jars weren t cached at all.\nWhile loading applet  I pressed  5  in its java console and found this message just after the last cached jar: cache: signed entry  missing from jar .\nI still don t know what is wrong with this file  but I moved that jar at the end of the archive parameter list.\n<p>Personally I solved the caching issues by using cache_archive and cache_version parameters docummented at <a href= \n<p>For me I had to remove the Jar files from the Archive tag and just have it in the cache_archive parameter  and specify the versions that way it doesn t piggy back to the server for last modified date</p>'],"['It\'s likely the image can\'t be accessed from its current context, remember, applets normally run in a very tight security sandbox which prevents them from accessing files on the local/client file system.\n\nYou either need to load the images from the server the applet is been loaded from (using getDocument/CodeBase or a relative URL), or based on your example, as embedded an resource, for example\n\ntileset_terrain = ImageIO.read(getClass().getResource(""/res/tileset_terrain.png""));\nThis assumes that the image is included within the Jar file under the /res directory.\n\nIf the image resides on the server from which the applet is been load, you could also use\n\ntry {\n    URL url = new URL(getCodeBase(), ""res/tileset_terrain.png"");\n    img = ImageIO.read(url);\n} catch (IOException e) {\n    e.printStackTrace();\n}\nTake a look at Reading/Loading images and What Applets Can and Cannot Do for more details.']","['""""""How can I display an image in the Applet? \n\nI have an image and I want to display it in the applet, The problem is the image wont display. Is there something wrong with my code? import java.applet.Applet; import java.awt.*; public class LastAirBender extends Applet { Image aang; public void init() { aang = getImage(getDocumentBase(), getParameter(""images.jpg"")); } public void paint(Graphics g) { g.drawImage(aang, 100, 100, this); } }\n\n1,aang = getImage(getDocumentBase(), getParameter(""images.jpg""));\n\nI suspect you are doing something wrong, and that should be just plain:\n\naang = getImage(getDocumentBase(), ""images.jpg"");\n\nWhat is the content of HTML/applet element? What is the name of the image? Is the image in the same directory as the HTML? The 2nd (changed) line of code will try to load the images.jpg file in the same directory as the HTML. Of course, you might need to add a MediaTracker to track the loading of the image, since the Applet.getImage() method returns immediately (now), but loads asynchronously (later). Try this exact experiment:\n\nSave this source as ${path.to.current.code.and.image}/FirstAirBender.java . /* <applet class=\'FirstAirBender\' width=400 height=400> </applet> */ import javax.swing.*; import java.awt.*; import java.net.URL; import javax.imageio.ImageIO; public class FirstAirBender extends JApplet { Image aang; public void init() { try { URL pic = new URL(getDocumentBase(), ""images.jpg""); aang = ImageIO.read(pic); } catch(Exception e) { // tell us if anything goes wrong! e.printStackTrace(); } } public void paint(Graphics g) { super.paint(g); if (aang!=null) { g.drawImage(aang, 100, 100, this); } } }\n\nThen go to the prompt and compile the code then call applet viewer using the source name as argument. C:\\Path>javac FirstAirBender.java C:\\Path>appletviewer FirstAirBender.java C:\\Path>\n\nYou should see your image in the applet, painted at 100x100 from the top-left. Andrew ThompsonAndrew Thompson\n\n6\n\nthe name of the image is just ""images"". Yeah, they are on the same directory but I am just wondering because you said about HTML, do I still to use HTML? I just want to display only the image in the JApplet. follows suggestions by @Andrew Thompson +1\n\nerror: ""javax.imageio.IIOException: Can\'t get input stream from URL!"" What does it mean? What do you understand from reading these posts?""""""', '""""""– Andrew Thompson Sep 16, 2011 at 10:09\n\n | Show 1 more comment\n\n1) we living .. in 21century, then please JApplet instead of Applet\n\nimport java.awt.*; import javax.swing.JApplet; public class LastAirBender extends JApplet { private static final long serialVersionUID = 1L; private Image aang; @Override public void init() { aang = getImage(getDocumentBase(), getParameter(""images.jpg"")); } @Override public void paint(Graphics g) { g.drawImage(aang, 100, 100, this); } }\n\n2) for Icon/ImageIcon would be better to look for JLabel\n\n3) please what\'s getImage(getDocumentBase(), getParameter(""images.jpg""));\n\nthere I\'ll be awaiting something like as\n\nURL imageURL = this.getClass().getResource(""images.jpg""); Image image = Toolkit.getDefaultToolkit().createImage(imageURL); Image scaled = image.getScaledInstance(100, 150, Image.SCALE_SMOOTH); JLabel label = new JLabel(new ImageIcon(scaled));\n\n1\n\nDo I need to remove the line with a getDocumentBase()? Well , above answers are correct. This is the code I used to display image. Hope it helps:\n\n/* <applet code = ""DisplayImage.class"" width = 500 height = 300> </applet> */ import java.applet.Applet; import java.awt.*; public class DisplayImage extends Applet { Image img1; public void init(){ img1 = getImage(getCodeBase(),""Nature.jpg"" ); } public void paint(Graphics g){ g.drawImage(img1, 0,0,500,300,this); } }\n\nIn above code, we create an image class object and get image from location specified by codebase. Then plot the image using drawImage method. Those who are interested in knowing value of getCodeBase() and getDocumentBase() methods can add following code in paint method. They are actually location of src folder in your project folder:-\n\nString msg; URL url=getDocumentBase(); msg=""Document Base ""+url.toString(); g.drawString(msg,10,20); url=getCodeBase(); msg=""Code Base ""+url.toString(); g.drawString(msg,10,40);\n\nOne more point to note:- Make sure images and classes don\'t have same name in src folder. This was preventing my image to be displayed.""""""']",0.166666667,0.153846154
applet,Applet,Classloader in Applet: Cant access files,['<p>If you re still seeing an  Illegal Escape Character  error on line 57  it s down to the string literal you re passing when instantiating <code>order</code>:</p>\nTherefore  every time you use a back slash  the compiler thinks you re trying to escape the character that follows it.\n<p>...the compiler is treating <code>\\D</code> as a single escaped character rather than as two characters.\nThe compiler error you re seeing is telling you that it doesn t recognise some of the escaped characters (<code>\\D</code>  <code>\\A</code>  <code>\\t</code>) in that string.\n<p>The solution is to escape the escape character  e.g. prefix each backslash with a blackslash:</p>\n<p>This tells the compiler to treat the backslashes as backslashes  rather than as escape characters.\nitself  then you can embed one into the other  for your specific case you can embed <strong>\n<p>There are so many things wrong with the applets it is hard to know where to begin.\nBut let us concentrate 1st on a more sensible strategy to cause the change beteween one view and another.</p>\nInstead of having two applets  have two panels that are swapped in a <code>CardLayout</code></li> <li>Instead of having both applets in one page  call <code>getAppletContext().\nPresumably <code>secondAppletURL</code> is different to the URL of the page that hosts the first applet.</li> </ol>\nDon t try to set the size of an applet.\nmethod might be called repeatedly.\nAs a stylistic point  it is typically better to create an anonymous inner <code>ActionListener</code>\nthan implement it on the parent class.</li> <li>Overriding <code>paint()</code> with an empty implementation is not a good idea.\nThe methods in the <code>actionPerformed()</code> are equally nonsensical.\nuntil after <code>init()</code> &amp; <code>start()</code> have been called  which would mean that calling those methods explicitly causes them to be invoked a second time.\nmethod is meant to be called multiple times  the <code>init()</code>\n<p>I had the very same problem and found a trick that need to be applied server side.\nIt seems that jars aren t cached if their mime type is incorrect.\n<p>Another problem I found is related to a specific jar.\nMy archive parameter was listing many jars  but only a few were cached.\nI found that all jars upto a specific one where cached  all remaining jars weren t cached at all.\nWhile loading applet  I pressed  5  in its java console and found this message just after the last cached jar: cache: signed entry  missing from jar .\nI still don t know what is wrong with this file  but I moved that jar at the end of the archive parameter list.\n<p>Personally I solved the caching issues by using cache_archive and cache_version parameters docummented at <a href= \n<p>For me I had to remove the Jar files from the Archive tag and just have it in the cache_archive parameter  and specify the versions that way it doesn t piggy back to the server for last modified date</p>'],"['Classloader hierarchy\nWhenever a new JVM is started the bootstrap classloader is responsible to load key Java classes (from java.lang package) and other runtime classes to the memory first. The bootstrap classloader is a parent of all other classloaders. Consequently, it is the only one without a parent.\n\nNext comes the extension classloader. It has the bootstrap classloader as parent and is responsible for loading classes from all .jar files kept in the java.ext.dirs path‚Äìthese are available regardless of the JVM‚Äôs classpath.\n\nThe third and most important classloader from a developer‚Äôs perspective is the system classpath classloader, which is an immediate child of the extension classloader. It loads classes from directories and jar files specified by the CLASSPATH environment variable, java.class.path system property or -classpath command line option.\n\nClassloader hierarchy\n\nClassLoader Namespace\n\nIn Java a class is uniquely identified using ClassLoader + Class as the same class may be loaded by two different class loaders.\n\nClass A loaded by ClassLoader A != Class A loaded by ClassLoader B\nHow is it helpful?\n\nIt is helpful for defining different protection and access policies for different classloaders. Take an example of applet which is loaded using a different classloader, you would not want a third party application all access to your resources. So for security its important to maintain different namespaces.']","['""""""Classloader in Applet: Can\'t access files\n\nI have an application that uses reflection to instantiate code saved in some directory: I create a URLClassLoader that then loads the classes using the URLs provided; this works fine. I tried to port the application to an Applet. For loading text files and images, I changed the code from using relative paths to use getResourceAsStream() which works great. For the class loader, however, I still have an I/O exception (which I also used to get with the text files and images before I changed the code to use streams):\n\njava.security.AccessControlException: access denied (java.io.FilePermission /.../... read)\n\nThe classes to be loaded are contained in the jar file (as are all the other resources). Is there any way to load classes using something like getResourceAsStream() that does not invoke a security exception? Please note: I am talking about a class loader invoked from within the java code, not the class loader that loads the applet. EDIT: More details on the file/folder structure:\n\nMy applet is in a package a, a.MyApplet, which makes use of a class a.aa.Loader which is meant to load classes stored in another folder b (hence not loaded when the applet is loaded). The folder b contains many directories, b.c_i, where c_i is a unique directory. In each of these directories are classes that belong to a package x.y.z, so the overall folder structure of b is b.c_i.x.y.z; z contains the file to be loaded. When I create the jar, the top-level looks like follows ([] indicates folder): [a],[b],[data],[images] where [a]={MyApplet,[aa],[aaa],etc.} and [b]={c_1,_c2,...} where c_i={[x]}, [x]={[y]}, [y]={[z]} and finally [z]={Class.class}. Hope the notation is not too weird.""""""']",0.166666667,0.111111111
applet,Applet,How to access a file in a Java Applet?,['<p>If you re still seeing an  Illegal Escape Character  error on line 57  it s down to the string literal you re passing when instantiating <code>order</code>:</p>\nTherefore  every time you use a back slash  the compiler thinks you re trying to escape the character that follows it.\n<p>...the compiler is treating <code>\\D</code> as a single escaped character rather than as two characters.\nThe compiler error you re seeing is telling you that it doesn t recognise some of the escaped characters (<code>\\D</code>  <code>\\A</code>  <code>\\t</code>) in that string.\n<p>The solution is to escape the escape character  e.g. prefix each backslash with a blackslash:</p>\n<p>This tells the compiler to treat the backslashes as backslashes  rather than as escape characters.\nitself  then you can embed one into the other  for your specific case you can embed <strong>\n<p>There are so many things wrong with the applets it is hard to know where to begin.\nBut let us concentrate 1st on a more sensible strategy to cause the change beteween one view and another.</p>\nInstead of having two applets  have two panels that are swapped in a <code>CardLayout</code></li> <li>Instead of having both applets in one page  call <code>getAppletContext().\nPresumably <code>secondAppletURL</code> is different to the URL of the page that hosts the first applet.</li> </ol>\nDon t try to set the size of an applet.\nmethod might be called repeatedly.\nAs a stylistic point  it is typically better to create an anonymous inner <code>ActionListener</code>\nthan implement it on the parent class.</li> <li>Overriding <code>paint()</code> with an empty implementation is not a good idea.\nThe methods in the <code>actionPerformed()</code> are equally nonsensical.\nuntil after <code>init()</code> &amp; <code>start()</code> have been called  which would mean that calling those methods explicitly causes them to be invoked a second time.\nmethod is meant to be called multiple times  the <code>init()</code>\n<p>I had the very same problem and found a trick that need to be applied server side.\nIt seems that jars aren t cached if their mime type is incorrect.\n<p>Another problem I found is related to a specific jar.\nMy archive parameter was listing many jars  but only a few were cached.\nI found that all jars upto a specific one where cached  all remaining jars weren t cached at all.\nWhile loading applet  I pressed  5  in its java console and found this message just after the last cached jar: cache: signed entry  missing from jar .\nI still don t know what is wrong with this file  but I moved that jar at the end of the archive parameter list.\n<p>Personally I solved the caching issues by using cache_archive and cache_version parameters docummented at <a href= \n<p>For me I had to remove the Jar files from the Archive tag and just have it in the cache_archive parameter  and specify the versions that way it doesn t piggy back to the server for last modified date</p>'],"['You need to wrap your code in AccessController.doPrivileged, like:\n\npublic class InJava extends Applet{\n\n  public void sayHello() {\n\n    final String parametro = getParameter(""parametro"");\n\n    FileInputStream fis =  AccessController.doPrivileged(new PrivilegedAction<FileInputStream>() {\n      public FileInputStream run() {\n        try  {\n          retrun new FileInputStream(parametro);\n        } catch (IOException e)  {\n          // handle exception\n        }\n      }\n    });\n  }\nMake sure that your applet jar(s) are signed, and that you understand all other consequences of running an applet.']","['""""""Accessing files from a Java Applet\n\nI\'m building this desktop application in java that reads input from Standard.in (or more specifically FileInputStream), I want to (or I am planning to) make it into a JApplet. I\'m not an expert when it comes to web-programming, so the question is, is it possible for a java applet to access local files? And better yet, can it execute system calls (i.e., Runtime.getRuntime().exec(...)) ? user1508893user1508893\n\n9,2\n\n""I want to (or I am planning to) make it into a JApplet."" Why not a JFrame launched from a link? It will still need to be signed/trusted, but deployment is easier for you and the user experience is better. That\'s sort of what I originally thought(ie., just give the user the installer), but from my experience, people tend to do everything via the browser nowadays! An applet would need to be digitally signed by you and trusted by the end user when prompted, before it could access the local file-system or use exec to start a process. Andrew ThompsonAndrew Thompson\n\n1\n\nI see.""""""', '""""""– Andrew Thompson Sep 16, 2011 at 10:09\n\n | Show 1 more comment\n\n1) we living .. in 21century, then please JApplet instead of Applet\n\nimport java.awt.*; import javax.swing.JApplet; public class LastAirBender extends JApplet { private static final long serialVersionUID = 1L; private Image aang; @Override public void init() { aang = getImage(getDocumentBase(), getParameter(""images.jpg"")); } @Override public void paint(Graphics g) { g.drawImage(aang, 100, 100, this); } }\n\n2) for Icon/ImageIcon would be better to look for JLabel\n\n3) please what\'s getImage(getDocumentBase(), getParameter(""images.jpg""));\n\nthere I\'ll be awaiting something like as\n\nURL imageURL = this.getClass().getResource(""images.jpg""); Image image = Toolkit.getDefaultToolkit().createImage(imageURL); Image scaled = image.getScaledInstance(100, 150, Image.SCALE_SMOOTH); JLabel label = new JLabel(new ImageIcon(scaled));\n\n1\n\nDo I need to remove the line with a getDocumentBase()? Well , above answers are correct. This is the code I used to display image. Hope it helps:\n\n/* <applet code = ""DisplayImage.class"" width = 500 height = 300> </applet> */ import java.applet.Applet; import java.awt.*; public class DisplayImage extends Applet { Image img1; public void init(){ img1 = getImage(getCodeBase(),""Nature.jpg"" ); } public void paint(Graphics g){ g.drawImage(img1, 0,0,500,300,this); } }\n\nIn above code, we create an image class object and get image from location specified by codebase. Then plot the image using drawImage method. Those who are interested in knowing value of getCodeBase() and getDocumentBase() methods can add following code in paint method. They are actually location of src folder in your project folder:-\n\nString msg; URL url=getDocumentBase(); msg=""Document Base ""+url.toString(); g.drawString(msg,10,20); url=getCodeBase(); msg=""Code Base ""+url.toString(); g.drawString(msg,10,40);\n\nOne more point to note:- Make sure images and classes don\'t have same name in src folder. This was preventing my image to be displayed.""""""']",0.166666667,0.333333333
swing,JPanel,how to set JFrame background transparent but JPanel or JLabel Background opaque?,['<p>If you are using JPanels  then are probably working with Swing.\n<p>The image is now a swing component.\nIt becomes subject to layout conditions like any other component.</p>\nLevel; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.\n<p>Since I only have a finite number (about 10) images that I need to load using this method  it works quite well.\n<p>I think there is no need to subclass of anything.\nYou can set an image into a Jlabel.\nSo  resize the Jlabel then fill it with an image.\n<p>You can avoid rolling your own Component subclass completely by using the JXImagePanel class from the free <a href= https://swingx.java.net//  rel= noreferrer >SwingX</a> libraries.</p>\n<p>You can subclass JPanel - here is an extract from my ImagePanel  which puts an image in any one of 5 locations  top/left  top/right  middle/middle  bottom/left or bottom/right:</p>\nThere shouldn t be any problem (other than any general problems you might have with very large images).</li> <li>\nIf you re talking about adding multiple images to a single panel  I would use <code>ImageIcon</code>s.\nFor a single image  I would think about making a custom subclass of <code>JPanel</code> and overriding its <code>paintComponent</code>\n<p><code>JPanel</code> is almost always the wrong class to subclass.\n<p>There is a slight problem with <code>ImageIcon</code> in that the constructor blocks reading the image.\nNot really a problem when loading from the application jar  but maybe if you re potentially reading over a network connection.\n<p>I m doing something very similar in a private project I m working on.\nThus far I ve generated images up to 1024x1024 without any problems (except memory) and can display them very quickly and without any performance problems.\n<p>Overriding the paint method of JPanel subclass is overkill and requires more work than you need to do.\nThis reduces the amount of flashing done while you generate your images  and you can thread it.\n<p>So then I use a JScrollPane to hold the MapLabel  which contains only the MapIcon.\n<p>But for your scenario (just show the whole image every time).\nYou need to add the MapLabel to the top JPanel  and make sure to size them all to the full size of the image (by overriding the GetPreferredSize()).\n<p>Set an <code>EmptyBorder</code> around your <code>JPanel</code>.<br>\ngenerally you add padding with the layout manager you are using.\nThere are cases that you can just expand the border of the <code>JPanel</code>.</p>\n<p>I will suppose your JPanel contains JTextField  for the sake of the demo.</p>\nmethod which seems to be what you re looking for.</p>\nSince it doesn t have to keep the elements sorted  <code>LinkedHashMap</code>\nThis will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.</p>\n<p>LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet()  entrySet() or values() of the map.\nObviously put and remove are not supported.\n<p>You can use <strong>LinkedHashMap</strong> to main insertion order in Map</p> <p>\nLinkedHashMap contains values based on the key.</p> </li> <li><p>\n<p>You can maintain a <code>Map</code> (for fast lookup) and <code>List</code> (for order) but a <code>LinkedHashMap</code>\nmay be the simplest.\n<ul> <li>Insertion order is maintained  by using LinkedHashMap internally.</li> <li>Keys with <code>null</code>\nOnce key with value is created  we are not overriding its value.</li> </ul>\n@SuppressWarnings({  rawtypes    unchecked  }) public class CustomHashMap&lt;K  V&gt; implements CustomMap&lt;K  V&gt; {     private Map&lt;K  V&gt; entryMap;     // SET: Adds the specified element to this set if it is not already present.\n@Override     public boolean insertionRule(K key  V value) {         // KEY as null and EMPTY String is not allowed.\nIf key already available then  we are not overriding its value.\n<p>If you know the KEY s are fixed then you can use EnumMap.\nhttp://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm  rel= nofollow noreferrer >this implementation of Map using ArrayList</a>.\nIt seems to be pre-1.5 Java  so you might want to genericize it  which should be easy.\nNote that this implementation has O(N) access  but this shouldn t be a problem if you don t add hundreds of widgets to your JPanel  which you shouldn t anyway.</p>\n<p>Whenever i need to maintain the natural order of things that are known ahead of time  i use a <a href= \n<p>the keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).\n<p>Also when using EnumMap there should be no collisions which can be more efficient.\n<p>I really find that using enumMap makes for clean readable code.\n<p>LinkedHashMap is used for maintaing insertion order.\nThe LinkedHashMap class of the Collections framework is the Hashtable and LinkedList implementation of the Map interface.\n<p>The problem is  a component can only reside in a single container  once  so doing something like...</p>\n<p>What I would suggest you do is create a  wrapper  or  card  panel which can contain the two images.\n<p>Yes  it is most definitely possible to do this.\n<p>Then you have an error in your code  but unfortunately based on code you ve posted I doubt that any of us can do more than just guess.\nIf you need more specific help  then you will want to post a small runnable example that demonstrates your problem  an <a href= http://sscce.org  rel= nofollow >sscce</a>.</p>'],"['I found another solution.\n\nSet the background color of your frame to\n\n// Set the frame background color to a transparent color\nyourFrameHere.setBackground(new Color(0, 0, 0, 0));\nAnd remember to set the opacity off of the contentpane (your JPanel or other component)\n\n// turn off opacity of the content pane\nyourContentPaneHere.setOpaque(false);']","['""""""how to set JFrame background transparent but JPanel or JLabel Background opaque? As per assignment, we have to create a image viewer just like Picasas one. picture in the middle, translucent black background and changing images with left/right buttons. i can display an image set it to undercoated, set it to translucent frame but along with frame the the picture becomes translucent. what am i doing wrong. Dimension dim = Toolkit.getDefaultToolkit().getScreenSize(); JFrame f1 = new JFrame(""ShowImage""); f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f1.setSize(dim); f1.setUndecorated(true); f1.setOpacity(0.5f); ShowImage panel = new ShowImage(); panel.setBackground(Color.black); f1.setContentPane(panel); f1.setVisible(true);\n\nsi.setOpaque(); si.setBackground(Color.black); si.setForeground(Color.red);\n\nwhen i took a boolean and tested\n\nsi.isDisplayable(); si.isVisible(); si.isShowing();\n\nonly is visible returns true, rest are false, are these any contributing factor? sabbibJAVAsabbibJAVA\n\n1,3\n\nJLabel is meant to be non Opaque by default, why do you want it to be otherwise ? Any specific need ? – nIcE cOw Jul 29, 2012 at 5:39\n\nJLabel is a just a method of displaying pictures, its i think the easiest way. the thing im trying to achieve is transparent background (window), and a opaque foreground(the picture imported by JLabel). but ive imported it in the proper way.""""""']",0.072463768,0.571428571
swing,JPanel,How to set a transparent background of JPanel?,['<p>If you are using JPanels  then are probably working with Swing.\n<p>The image is now a swing component.\nIt becomes subject to layout conditions like any other component.</p>\nLevel; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.\n<p>Since I only have a finite number (about 10) images that I need to load using this method  it works quite well.\n<p>I think there is no need to subclass of anything.\nYou can set an image into a Jlabel.\nSo  resize the Jlabel then fill it with an image.\n<p>You can avoid rolling your own Component subclass completely by using the JXImagePanel class from the free <a href= https://swingx.java.net//  rel= noreferrer >SwingX</a> libraries.</p>\n<p>You can subclass JPanel - here is an extract from my ImagePanel  which puts an image in any one of 5 locations  top/left  top/right  middle/middle  bottom/left or bottom/right:</p>\nThere shouldn t be any problem (other than any general problems you might have with very large images).</li> <li>\nIf you re talking about adding multiple images to a single panel  I would use <code>ImageIcon</code>s.\nFor a single image  I would think about making a custom subclass of <code>JPanel</code> and overriding its <code>paintComponent</code>\n<p><code>JPanel</code> is almost always the wrong class to subclass.\n<p>There is a slight problem with <code>ImageIcon</code> in that the constructor blocks reading the image.\nNot really a problem when loading from the application jar  but maybe if you re potentially reading over a network connection.\n<p>I m doing something very similar in a private project I m working on.\nThus far I ve generated images up to 1024x1024 without any problems (except memory) and can display them very quickly and without any performance problems.\n<p>Overriding the paint method of JPanel subclass is overkill and requires more work than you need to do.\nThis reduces the amount of flashing done while you generate your images  and you can thread it.\n<p>So then I use a JScrollPane to hold the MapLabel  which contains only the MapIcon.\n<p>But for your scenario (just show the whole image every time).\nYou need to add the MapLabel to the top JPanel  and make sure to size them all to the full size of the image (by overriding the GetPreferredSize()).\n<p>Set an <code>EmptyBorder</code> around your <code>JPanel</code>.<br>\ngenerally you add padding with the layout manager you are using.\nThere are cases that you can just expand the border of the <code>JPanel</code>.</p>\n<p>I will suppose your JPanel contains JTextField  for the sake of the demo.</p>\nmethod which seems to be what you re looking for.</p>\nSince it doesn t have to keep the elements sorted  <code>LinkedHashMap</code>\nThis will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.</p>\n<p>LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet()  entrySet() or values() of the map.\nObviously put and remove are not supported.\n<p>You can use <strong>LinkedHashMap</strong> to main insertion order in Map</p> <p>\nLinkedHashMap contains values based on the key.</p> </li> <li><p>\n<p>You can maintain a <code>Map</code> (for fast lookup) and <code>List</code> (for order) but a <code>LinkedHashMap</code>\nmay be the simplest.\n<ul> <li>Insertion order is maintained  by using LinkedHashMap internally.</li> <li>Keys with <code>null</code>\nOnce key with value is created  we are not overriding its value.</li> </ul>\n@SuppressWarnings({  rawtypes    unchecked  }) public class CustomHashMap&lt;K  V&gt; implements CustomMap&lt;K  V&gt; {     private Map&lt;K  V&gt; entryMap;     // SET: Adds the specified element to this set if it is not already present.\n@Override     public boolean insertionRule(K key  V value) {         // KEY as null and EMPTY String is not allowed.\nIf key already available then  we are not overriding its value.\n<p>If you know the KEY s are fixed then you can use EnumMap.\nhttp://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm  rel= nofollow noreferrer >this implementation of Map using ArrayList</a>.\nIt seems to be pre-1.5 Java  so you might want to genericize it  which should be easy.\nNote that this implementation has O(N) access  but this shouldn t be a problem if you don t add hundreds of widgets to your JPanel  which you shouldn t anyway.</p>\n<p>Whenever i need to maintain the natural order of things that are known ahead of time  i use a <a href= \n<p>the keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).\n<p>Also when using EnumMap there should be no collisions which can be more efficient.\n<p>I really find that using enumMap makes for clean readable code.\n<p>LinkedHashMap is used for maintaing insertion order.\nThe LinkedHashMap class of the Collections framework is the Hashtable and LinkedList implementation of the Map interface.\n<p>The problem is  a component can only reside in a single container  once  so doing something like...</p>\n<p>What I would suggest you do is create a  wrapper  or  card  panel which can contain the two images.\n<p>Yes  it is most definitely possible to do this.\n<p>Then you have an error in your code  but unfortunately based on code you ve posted I doubt that any of us can do more than just guess.\nIf you need more specific help  then you will want to post a small runnable example that demonstrates your problem  an <a href= http://sscce.org  rel= nofollow >sscce</a>.</p>'],"[""You could use setOpaque() to make the background of the JPanel transparent, but then you couldn't draw over the rectangles that you wanted to make transparent.\n\nSo another way of doing it would be to make a BufferedImage and draw the rectangles on that image and then add that BufferedImage to the JPanel.\n\nimport java.awt.AlphaComposite;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\nimport java.awt.image.BufferedImage;\nimport java.beans.Transient;\nimport java.io.File;\nimport java.io.IOException;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.AbstractAction;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.KeyStroke;\n\n\npublic class Showcase extends JFrame {\n\n    BufferedImage img;\n\n    public static void main(String[] args) {\n        Showcase window = new Showcase();\n    }\n\n    public Showcase() {\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        final JPanel contentPane = new JPanel();\n        contentPane.setBackground(Color.CYAN);\n        setContentPane(contentPane);\n\n\n        final TestPane tP = new TestPane();\n        contentPane.add(tP);\n\n        // make new buffered image\n        img = new BufferedImage(tP.getPreferredSize().width, \n                tP.getPreferredSize().height, BufferedImage.TYPE_INT_ARGB);\n\n        setVisible(true);\n        pack();\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(500, 300);\n    }\n\n    public class TestPane extends JPanel{\n\n        @Override\n        protected void paintComponent(Graphics g) {              \n            Graphics2D g2 = (Graphics2D) g;\n\n            Graphics2D imgG2 = img.createGraphics();\n\n            // make img background transparent\n            imgG2.setBackground(new Color(0,0,0,0));\n\n            imgG2.setColor(Color.red);\n            imgG2.fillRect(0, 0, 100, 100);\n\n            imgG2.clearRect(0, 0, 50, 50);\n\n            imgG2.dispose();\n\n            // draw buffered image to jpanel\n            g2.drawImage(img, 0, 0, null);\n\n            g2.dispose();\n\n            super.paintComponent(g);   \n        }\n\n        @Override\n        @Transient\n        public Dimension getPreferredSize() {\n            return new Dimension(100, 100);\n        }\n    }\n}""]","['""""""I want to create a semi-transparent JPanel. I\'ve done it by simply using RGBA value of color constructor but problem is when i m using event handling is not woking properly. My requirement is a semi transparent Jpanel when mouse enters it border of this panel became visible and if mouse exit the border shoud not visible. I have done this by following code but problem is its not working properly for transparent backgroud (RGBA) but it working fine for RGB color. import javax.swing.*; import javax.swing.border.*; import java.awt.*; import java.awt.event.*; public class MDCW extends JFrame { private JPanel contentPane; /** * Launch the application. */ public static void main(String[] args) { EventQueue.invokeLater(new Runnable() { public void run() { try { MDCW frame = new MDCW(); frame.setVisible(true); } catch (Exception e) { e.printStackTrace(); } } }); } /** * Create the frame. */ public MDCW() { setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); setBounds(100, 100, 1013, 551); contentPane = new JPanel(); contentPane.setBackground(new Color(0, 139, 139)); contentPane.setBorder(new EmptyBorder(5, 5, 5, 5)); setContentPane(contentPane); contentPane.setLayout(null); final JPanel panel = new JPanel(); panel.setBackground(new Color(0, 0, 0,50)); panel.addMouseListener(new MouseAdapter() { @Override public void mouseEntered(MouseEvent e) { panel.setBorder(new LineBorder(new Color(255, 255, 255), 5)); } @Override public void mouseExited(MouseEvent e) { panel.setBorder(null); } }); panel.setBounds(360, 155, 215, 215); contentPane.add(panel); final JPanel panel_1 = new JPanel(); panel_1.setBackground(new Color(0, 0, 0)); panel_1.addMouseListener(new MouseAdapter() { @Override public void mouseEntered(MouseEvent e) { panel_1.setBorder(new LineBorder(new Color(255, 255, 255), 5)); } @Override public void mouseExited(MouseEvent e) { panel_1.setBorder(null); } }); panel_1.setBounds(84, 155, 215, 215); contentPane.add(panel_1); } }\n\nPawan GuptaPawan Gupta\n\nJPanel does not support semi-transparent backgrounds. There are two steps needed to take care of this problem:\n\nFirst, to have any correctly-functioning transparency at all, you must setOpaque(false) on the panel; otherwise you will have glitches, because an opaque panel is assumed to completely cover what is underneath its bounds. However, when opaque is false, the panel also does not draw its background at all (!) so you will have to draw a background in paintComponent. Here is a drop-in replacement class which will take care of both of these steps. private class TransparentPanel extends JPanel { { setOpaque(false); } public void paintComponent(Graphics g) { g.setColor(getBackground()); Rectangle r = g.getClipBounds(); g.fillRect(r.x, r.y, r.width, r.height); super.paintComponent(g); } }\n\nI’ve checked that it works in your program if I change the first panel creation to:\n\nfinal JPanel panel = new TransparentPanel();\n\nKevin ReidKevin Reid\n\n2\n\nMust have searched for 2 ours before finding this! Why oh why can\'t jpanel just have a setOpacity method like JFrame? – Adam Hughes Oct 27, 2016 at 16:19\n\n@AdamHughes stackoverflow.com/a/2452381/3560873 because the answer to your question is a bit convoluted and overloaded. It\'s easy to do it like so:\n\n// initialise JPanel JPanel somePanel = new JPanel(new GridBagLayout()); somePanel.setBackground(new Color(0,0,0,x);\n\nx in this case is the level of transparency you\'re looking for 0 being invisible, 100 being solid. somePanel.setBackground(new Color(0,0,0,55)\n\nSee: http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html\n\nitsthatblackkiditsthatblackkid\n\n2\n\nIt\'s actually not this easy to do by any means. – Hesein Burg Jul 20, 2016 at 15:20\n\nAfter resizing your window it\'s not working anymore!""""""', '""""""how to set JFrame background transparent but JPanel or JLabel Background opaque? Asked 11 years, 8 months ago\n\nModified 11 years, 8 months ago\n\nAs per assignment, we have to create a image viewer just like Picasas one. picture in the middle, translucent black background and changing images with left/right buttons. i can display an image set it to undercoated, set it to translucent frame but along with frame the the picture becomes translucent. what am i doing wrong. Dimension dim = Toolkit.getDefaultToolkit().getScreenSize(); JFrame f1 = new JFrame(""ShowImage""); f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f1.setSize(dim); f1.setUndecorated(true); f1.setOpacity(0.5f); ShowImage panel = new ShowImage(); panel.setBackground(Color.black); f1.setContentPane(panel); f1.setVisible(true);\n\nsi.setOpaque(); si.setBackground(Color.black); si.setForeground(Color.red);\n\nwhen i took a boolean and tested\n\nsi.isDisplayable(); si.isVisible(); si.isShowing();\n\nonly is visible returns true, rest are false, are these any contributing factor? sabbibJAVAsabbibJAVA\n\n1,3\n\nJLabel is meant to be non Opaque by default, why do you want it to be otherwise ? Any specific need ? – nIcE cOw Jul 29, 2012 at 5:39\n\nJLabel is a just a method of displaying pictures, its i think the easiest way. the thing im trying to achieve is transparent background (window), and a opaque foreground(the picture imported by JLabel). but ive imported it in the proper way.""""""']",0.072463768,0.015151515
swing,JPanel,How to make JFrame background and JPanel transparent with only image showing,['<p>If you are using JPanels  then are probably working with Swing.\n<p>The image is now a swing component.\nIt becomes subject to layout conditions like any other component.</p>\nLevel; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.\n<p>Since I only have a finite number (about 10) images that I need to load using this method  it works quite well.\n<p>I think there is no need to subclass of anything.\nYou can set an image into a Jlabel.\nSo  resize the Jlabel then fill it with an image.\n<p>You can avoid rolling your own Component subclass completely by using the JXImagePanel class from the free <a href= https://swingx.java.net//  rel= noreferrer >SwingX</a> libraries.</p>\n<p>You can subclass JPanel - here is an extract from my ImagePanel  which puts an image in any one of 5 locations  top/left  top/right  middle/middle  bottom/left or bottom/right:</p>\nThere shouldn t be any problem (other than any general problems you might have with very large images).</li> <li>\nIf you re talking about adding multiple images to a single panel  I would use <code>ImageIcon</code>s.\nFor a single image  I would think about making a custom subclass of <code>JPanel</code> and overriding its <code>paintComponent</code>\n<p><code>JPanel</code> is almost always the wrong class to subclass.\n<p>There is a slight problem with <code>ImageIcon</code> in that the constructor blocks reading the image.\nNot really a problem when loading from the application jar  but maybe if you re potentially reading over a network connection.\n<p>I m doing something very similar in a private project I m working on.\nThus far I ve generated images up to 1024x1024 without any problems (except memory) and can display them very quickly and without any performance problems.\n<p>Overriding the paint method of JPanel subclass is overkill and requires more work than you need to do.\nThis reduces the amount of flashing done while you generate your images  and you can thread it.\n<p>So then I use a JScrollPane to hold the MapLabel  which contains only the MapIcon.\n<p>But for your scenario (just show the whole image every time).\nYou need to add the MapLabel to the top JPanel  and make sure to size them all to the full size of the image (by overriding the GetPreferredSize()).\n<p>Set an <code>EmptyBorder</code> around your <code>JPanel</code>.<br>\ngenerally you add padding with the layout manager you are using.\nThere are cases that you can just expand the border of the <code>JPanel</code>.</p>\n<p>I will suppose your JPanel contains JTextField  for the sake of the demo.</p>\nmethod which seems to be what you re looking for.</p>\nSince it doesn t have to keep the elements sorted  <code>LinkedHashMap</code>\nThis will allow you not to leak specific implementations into your API and switch to either of those specific classes or a completely different implementation at will afterwards.</p>\n<p>LinkedHashMap will return the elements in the order they were inserted into the map when you iterate over the keySet()  entrySet() or values() of the map.\nObviously put and remove are not supported.\n<p>You can use <strong>LinkedHashMap</strong> to main insertion order in Map</p> <p>\nLinkedHashMap contains values based on the key.</p> </li> <li><p>\n<p>You can maintain a <code>Map</code> (for fast lookup) and <code>List</code> (for order) but a <code>LinkedHashMap</code>\nmay be the simplest.\n<ul> <li>Insertion order is maintained  by using LinkedHashMap internally.</li> <li>Keys with <code>null</code>\nOnce key with value is created  we are not overriding its value.</li> </ul>\n@SuppressWarnings({  rawtypes    unchecked  }) public class CustomHashMap&lt;K  V&gt; implements CustomMap&lt;K  V&gt; {     private Map&lt;K  V&gt; entryMap;     // SET: Adds the specified element to this set if it is not already present.\n@Override     public boolean insertionRule(K key  V value) {         // KEY as null and EMPTY String is not allowed.\nIf key already available then  we are not overriding its value.\n<p>If you know the KEY s are fixed then you can use EnumMap.\nhttp://www.java2s.com/Code/Java/Collections-Data-Structure/ArrayMapextendsAbstractMap.htm  rel= nofollow noreferrer >this implementation of Map using ArrayList</a>.\nIt seems to be pre-1.5 Java  so you might want to genericize it  which should be easy.\nNote that this implementation has O(N) access  but this shouldn t be a problem if you don t add hundreds of widgets to your JPanel  which you shouldn t anyway.</p>\n<p>Whenever i need to maintain the natural order of things that are known ahead of time  i use a <a href= \n<p>the keys will be enums and you can insert in any order you want but when you iterate it will iterate in the enum order (the natural order).\n<p>Also when using EnumMap there should be no collisions which can be more efficient.\n<p>I really find that using enumMap makes for clean readable code.\n<p>LinkedHashMap is used for maintaing insertion order.\nThe LinkedHashMap class of the Collections framework is the Hashtable and LinkedList implementation of the Map interface.\n<p>The problem is  a component can only reside in a single container  once  so doing something like...</p>\n<p>What I would suggest you do is create a  wrapper  or  card  panel which can contain the two images.\n<p>Yes  it is most definitely possible to do this.\n<p>Then you have an error in your code  but unfortunately based on code you ve posted I doubt that any of us can do more than just guess.\nIf you need more specific help  then you will want to post a small runnable example that demonstrates your problem  an <a href= http://sscce.org  rel= nofollow >sscce</a>.</p>'],"['I try it on my computer and image is showing up on icon. If you want show the image on background try this :\n\nimport java.awt.Image;\nimport java.awt.Toolkit;\nimport javax.swing.*;\n\n        public class Caine extends JFrame{\n        //the pictures\n        ImageIcon guy = new ImageIcon(""tester.gif"");\n        JLabel pn = new JLabel(guy);\n        JPanel panel = new JPanel();\n\n        Caine(){\n            super(""Photuris Lucicrescens"");\n\n            //Important\n            setSize(700,600);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            add(panel);\n            setVisible(true);\n            JLabel im = new JLabel(new ImageIcon(""iconImage.gif""));\n            setIconImage(customIcon);\n            panel.add(im);\n            add(pn);\n        }\n        }']","['""""""How to make JFrame background and JPanel transparent with only image showing\n\nHey I am trying to make a some kind of launcher and the ""window"" must be transparent because I want the image I am using to be the design of it if you understand what I mean. I tried to do setUndecorated(true); and setBackground(new Color(0, 0, 0, 0)); but it just looked weird. Here is a picture on how it looks: http://prntscr.com/2pqohq Here is my code:\n\nimport java.awt.Color; import java.awt.Dimension; import java.awt.Graphics; import java.awt.GridBagLayout; import java.awt.image.BufferedImage; import java.io.File; import java.io.IOException; import java.net.MalformedURLException; import java.util.logging.Level; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.JFrame; import javax.swing.JPanel; import javax.swing.SwingUtilities; /** * * Our Launcher for the client * * @author Daniel <Skype: daniel.gusdal> * * Current Date: 5. feb. 2014 Current Time: 14:29:54 * Project: 742 client. File Name: Launcher.java * */ public class Launcher2 { public Launcher2() { JFrame frame = new JFrame(); frame.getContentPane().add(new ImagePanel()); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //frame.pack(); //had to remove, got an error from it... frame.setUndecorated(true); //transparent frame.setBackground(new Color(0, 0, 0, 0)); //transparent frame.setVisible(true); frame.setSize(1080, 550); } public static void main(String[] args) { SwingUtilities.invokeLater(new Runnable(){ public void run() { new Launcher2(); } }); } @SuppressWarnings(""serial"") public class ImagePanel extends JPanel { BufferedImage img; public ImagePanel() { setLayout(new GridBagLayout()); try { img = ImageIO.read(new File(""C:/Users/Daniel/Pictures/Launcher3.png/"")); } catch (MalformedURLException ex) { Logger.getLogger(Launcher2.class.getName()).log(Level.SEVERE, null, ex); } catch (IOException ex) { Logger.getLogger(Launcher2.class.getName()).log(Level.SEVERE, null, ex); } } /** * Draws the image and sets the image dimension */ @Override protected void paintComponent(Graphics g) { super.paintComponent(g); //g.drawImage(img, 100, 100, 1080, 550, this); g.drawImage(img, 0, 0, getWidth(), getHeight(), this); } /** * Sets the JPanel dimension */ public Dimension getPreferredSize() { return new Dimension(1080, 550); } } }\n\nYou need to set the ImagePanel to setOpaque(false)\n\npublic ImagePanel() { setOpaque(false);\n\nAlso you were getting the exception because you need to setUndecorate(true) before you pack();\n\nJFrame frame = new JFrame(); frame.add(new ImagePanel()); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); frame.setUndecorated(true); frame.pack(); frame.setBackground(new Color(0, 0, 0, 0)); frame.setVisible(true);\n\nThose are the only two things I changed and it works. Also I got rid of the setSize()\n\nAlso use frame.setLocationRelativeTo(null); after pack() to center the frame. Here\'s is an example (just for future readers, since I think this may be a popular question)\n\nimport java.awt.*; import java.awt.image.BufferedImage; import java.io.IOException; import java.net.URL; import java.util.logging.Level; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.*; public class CircleSplashScreen { public CircleSplashScreen() { JFrame frame = new JFrame(); frame.getContentPane().add(new ImagePanel()); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); frame.setUndecorated(true); frame.pack(); frame.setLocationRelativeTo(null); frame.setBackground(new Color(0, 0, 0, 0)); frame.setVisible(true); } public static void main(String[] args) { SwingUtilities.invokeLater(new Runnable() { public void run() { new CircleSplashScreen(); } }); } @SuppressWarnings(""serial"") public class ImagePanel extends JPanel { BufferedImage img; public ImagePanel() { setOpaque(false); setLayout(new GridBagLayout()); try { img = ImageIO.read(new URL(""http://www.iconsdb.com/icons/preview/royal-blue/stackoverflow-4-xxl.png"")); } catch (IOException ex) { Logger.getLogger(CircleSplashScreen.class.getName()).log(Level.SEVERE, null, ex); } } @Override protected void paintComponent(Graphics g) { super.paintComponent(g); g.drawImage(img, 0, 0, getWidth(), getHeight(), this); } @Override public Dimension getPreferredSize() { return new Dimension(500, 500); } } }\n\nPaul SamsothaPaul Samsotha\n\n3\n\nThank you so much again peeskillet, it finally works! :) Cant accept answer yet...""""""']",0.072463768,0.041666667
swing,JFrame,java: How to add Transparent Gradient Background to JFrame,['By allowing separate <code>JFrame</code>s  you give your end-user the ability to spread out and control what s on his/her screen.\nFor modeless dialogs  pass a null parent to the constructor  but locate them relative to their  parent  window.\n<p>To switch between this <code>JPanel</code>s use <code>JMenuBar</code> with <code>JMenuItems</code> for each <code>JPanel</code>or  JButton<code>for each</code>JPanel`.</p>'],"['I found another solution.\n\nSet the background color of your frame to\n\n// Set the frame background color to a transparent color\nyourFrameHere.setBackground(new Color(0, 0, 0, 0));\nAnd remember to set the opacity off of the contentpane (your JPanel or other component)\n\n// turn off opacity of the content pane\nyourContentPaneHere.setOpaque(false);']","['""""""How can I overide this for child jpanel ? public void paintComponent(Graphics g) { Graphics2D g2d = (Graphics2D) g; Color color1 = getBackground(); Color color2 = color1.darker(); int w = getWidth(); int h = getHeight(); GradientPaint gp = new GradientPaint( 0, 0, color1, 0, h, color2); g2d.setPaint(gp); g2d.fillRect(0, 0, w, h); }\n\n5,4\n\nYou\'ll have to use that code in another separate class that extends JPanel. Afaik, there\'s no way for a parent component to change how its children are painted. So extend JPanel for your subcomponents and put the code you have here into your subpanels. @Brian, Thanks. Is it same for other JComponents(when need to overide its methods)? All JComponent classes have this paintComponent method, so yes. @AashMaharoon for some components you can set their background transparent using setOpaque(false) this way whatever the parent draws is still visible inside the child. If you are careful to invoke super.paintComponent(g), you can add the gradient directly to the panel as shown below. For usability, I would resist the temptation to try making the individual components transparent. Note also that opacity is controlled by the Look & Feel. import java.awt.Color; import java.awt.EventQueue; import java.awt.GradientPaint; import java.awt.Graphics; import java.awt.Graphics2D; import javax.swing.BorderFactory; import javax.swing.JFrame; import javax.swing.JLabel; import javax.swing.JPanel; import javax.swing.JTextField; /** * @see http://stackoverflow.com/q/12220853/230513 */ public class GradientPanel extends JPanel { private static final int N = 32; public GradientPanel() { this.setBorder(BorderFactory.createEmptyBorder(N, N, N, N)); this.add(new JLabel(""Test:"", JLabel.CENTER)); this.add(new JTextField(""This is a test."")); } @Override public void paintComponent(Graphics g) { super.paintComponent(g); Graphics2D g2d = (Graphics2D) g; Color color1 = getBackground(); Color color2 = color1.darker(); int w = getWidth(); int h = getHeight(); GradientPaint gp = new GradientPaint( 0, 0, color1, 0, h, color2); g2d.setPaint(gp); g2d.fillRect(0, 0, w, h); } private void display() { JFrame f = new JFrame(""GradientPanel""); f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f.add(this); f.pack(); f.setLocationRelativeTo(null); f.setVisible(true); } public static void main(String[] args) { EventQueue.invokeLater(new Runnable() { @Override public void run() { new GradientPanel().display(); } }); } }\n\n1.1k2\n\nthanks for your answer. What you have mentioned is already implemented for my parent JPanel( the codes also mentioned in my question). What I ask is, lets say, if another JPanel is required to add to your \'GradientPanel\'. and make its background gradient. Then how it can be done ? Ah, you want to alter the background of a JPanel for which you do not have source code access. You could use UIManager.put() to supply your own PanelUI with a custom implementation of paint(). I think this is what you were trying to do\n\njPanel1 = new JPanel() { @Override protected void paintComponent(Graphics g) { super.paintComponent(g); Graphics2D g2d = (Graphics2D) g; g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY); int w = getWidth(); int h = getHeight(); Color color1 = new Color(81,80,106); Color color2 = new Color(165,164,241); GradientPaint gp = new GradientPaint(0, 0, color1, 0, h, color2); g2d.setPaint(gp); g2d.fillRect(0, 0, w, h); } };\n\n""""""', '""""""Calling all who code. Take the 2023 Developer Survey. How to make JFrame background and JPanel transparent with only image showing\n\nAsked 9 years, 3 months ago\n\nModified 3 years, 11 months ago\n\nHey I am trying to make a some kind of launcher and the ""window"" must be transparent because I want the image I am using to be the design of it if you understand what I mean. I tried to do setUndecorated(true); and setBackground(new Color(0, 0, 0, 0)); but it just looked weird. Here is a picture on how it looks: http://prntscr.com/2pqohq Here is my code:\n\nimport java.awt.Color; import java.awt.Dimension; import java.awt.Graphics; import java.awt.GridBagLayout; import java.awt.image.BufferedImage; import java.io.File; import java.io.IOException; import java.net.MalformedURLException; import java.util.logging.Level; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.JFrame; import javax.swing.JPanel; import javax.swing.SwingUtilities; /** * * Our Launcher for the client * * @author Daniel <Skype: daniel.gusdal> * * Current Date: 5. feb. 2014 Current Time: 14:29:54 * Project: 742 client. File Name: Launcher.java * */ public class Launcher2 { public Launcher2() { JFrame frame = new JFrame(); frame.getContentPane().add(new ImagePanel()); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //frame.pack(); //had to remove, got an error from it... frame.setUndecorated(true); //transparent frame.setBackground(new Color(0, 0, 0, 0)); //transparent frame.setVisible(true); frame.setSize(1080, 550); } public static void main(String[] args) { SwingUtilities.invokeLater(new Runnable(){ public void run() { new Launcher2(); } }); } @SuppressWarnings(""serial"") public class ImagePanel extends JPanel { BufferedImage img; public ImagePanel() { setLayout(new GridBagLayout()); try { img = ImageIO.read(new File(""C:/Users/Daniel/Pictures/Launcher3.png/"")); } catch (MalformedURLException ex) { Logger.getLogger(Launcher2.class.getName()).log(Level.SEVERE, null, ex); } catch (IOException ex) { Logger.getLogger(Launcher2.class.getName()).log(Level.SEVERE, null, ex); } } /** * Draws the image and sets the image dimension */ @Override protected void paintComponent(Graphics g) { super.paintComponent(g); //g.drawImage(img, 100, 100, 1080, 550, this); g.drawImage(img, 0, 0, getWidth(), getHeight(), this); } /** * Sets the JPanel dimension */ public Dimension getPreferredSize() { return new Dimension(1080, 550); } } }\n\nYou need to set the ImagePanel to setOpaque(false)\n\npublic ImagePanel() { setOpaque(false);\n\nAlso you were getting the exception because you need to setUndecorate(true) before you pack();\n\nJFrame frame = new JFrame(); frame.add(new ImagePanel()); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); frame.setUndecorated(true); frame.pack(); frame.setBackground(new Color(0, 0, 0, 0)); frame.setVisible(true);\n\nThose are the only two things I changed and it works. Also I got rid of the setSize()\n\nAlso use frame.setLocationRelativeTo(null); after pack() to center the frame. Here\'s is an example (just for future readers, since I think this may be a popular question)\n\nimport java.awt.*; import java.awt.image.BufferedImage; import java.io.IOException; import java.net.URL; import java.util.logging.Level; import java.util.logging.Logger; import javax.imageio.ImageIO; import javax.swing.*; public class CircleSplashScreen { public CircleSplashScreen() { JFrame frame = new JFrame(); frame.getContentPane().add(new ImagePanel()); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); frame.setUndecorated(true); frame.pack(); frame.setLocationRelativeTo(null); frame.setBackground(new Color(0, 0, 0, 0)); frame.setVisible(true); } public static void main(String[] args) { SwingUtilities.invokeLater(new Runnable() { public void run() { new CircleSplashScreen(); } }); } @SuppressWarnings(""serial"") public class ImagePanel extends JPanel { BufferedImage img; public ImagePanel() { setOpaque(false); setLayout(new GridBagLayout()); try { img = ImageIO.read(new URL(""http://www.iconsdb.com/icons/preview/royal-blue/stackoverflow-4-xxl.png"")); } catch (IOException ex) { Logger.getLogger(CircleSplashScreen.class.getName()).log(Level.SEVERE, null, ex); } } @Override protected void paintComponent(Graphics g) { super.paintComponent(g); g.drawImage(img, 0, 0, getWidth(), getHeight(), this); } @Override public Dimension getPreferredSize() { return new Dimension(500, 500); } } }\n\nPaul SamsothaPaul Samsotha\n\n3\n\nThank you so much again peeskillet, it finally works! :) Cant accept answer yet...""""""']",0.4666666,0.142857143
swing,JFrame,Swing: Obtain Image of JFrame,['By allowing separate <code>JFrame</code>s  you give your end-user the ability to spread out and control what s on his/her screen.\nFor modeless dialogs  pass a null parent to the constructor  but locate them relative to their  parent  window.\n<p>To switch between this <code>JPanel</code>s use <code>JMenuBar</code> with <code>JMenuItems</code> for each <code>JPanel</code>or  JButton<code>for each</code>JPanel`.</p>'],"['I believe you are looking for internal frames.\n\nFor the background image bit, sublass JPanel, override its paintComponent() method, and blit your image there. Then set an instance of that panel as your JFrame\'s content pane.\n\npublic class BackgroundPanel extends JPanel {\n    private BufferedImage bgImg;\n\n    public BackgroundPanel() {\n        try {\n            bgImg = ImageIO.read(BackgroundPanel.class.getResourceAsStream(\n                    ""mybackgroundimage.png""));\n        } catch (IOException ex) {\n            System.err.println(""Could not load background image!"");\n            ex.printStackTrace();\n        }\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        if (bgImg != null) {\n            g.drawImage(bgImg, 0, 0, null);\n        }\n    }\n}\n\npublic class MyJFrame extends JFrame {\n\n    public MyJFrame() {\n        setContentPane(new BackgroundPanel());\n    }\n\n}']","['""""""Adding image to JFrame\n\nSo I am using Eclipse with Windows builder. I was just wondering if there was anyway I can import an image that\'ll show up on the JFrame that I can easily move around and re-size instead of setting the location and size and drawing it. user2612619user2612619\n\n 2\n\nAdd the image to a JLabel\n\n\n\nThat was a good idea, thanks for that. Here is a simple example of adding an image to a JFrame:\n\nframe.add(new JLabel(new ImageIcon(""Path/To/Your/Image.png"")));\n\n\n\n\n\nThere is no specialized image component provided in Swing (which is sad in my opinion). So, there are a few options:\n\nAs @Reimeus said: Use a JLabel with an icon. Create in the window builder a JPanel, that will represent the location of the image. Then add your own custom image component to the JPanel using a few lines of code you will never have to change. They should look like this:\n\nJImageComponent ic = new JImageComponent(myImageGoesHere); imagePanel.add(ic);\n\nwhere JImageComponent is a self created class that extends JComponent that overrides the paintComponent() method to draw the image. Martijn CourteauxMartijn Courteaux\n\n 0\n\nIf you are using Netbeans to develop, use JLabel and change its icon property. 1,3\n\nTHIS WORKED FOR ME VERY WELL; I\'M A NEWBIE. Why only netbeans? Java is Java, regardless of whether you use netbeans, eclipse or anything else. @AndreaOggioni Did I mentioned that only Netbeans? There are several ways to develop Java app. Using Netbeans is just one of them. My answer is for those who are using Netbeans. But it can applied other IDEs also.""""""']",0.4666666,0.148148148
swing,JFrame,Transparent JFrame background,['By allowing separate <code>JFrame</code>s  you give your end-user the ability to spread out and control what s on his/her screen.\nFor modeless dialogs  pass a null parent to the constructor  but locate them relative to their  parent  window.\n<p>To switch between this <code>JPanel</code>s use <code>JMenuBar</code> with <code>JMenuItems</code> for each <code>JPanel</code>or  JButton<code>for each</code>JPanel`.</p>'],"['You should make content pane transparent too.\n\nframe.setUndecorated(true);\nframe.getContentPane().setBackground(new Color(1.0f,1.0f,1.0f,0.0f));\nframe.setBackground(new Color(1.0f,1.0f,1.0f,0.0f));']","['""""""Transparent JFrame background\n\nIs it possible to make a JFrame that has a transparent background and draw an image on it, so only the image will be visible with no border or background? 6,Yes, it\'s possible in many ways. This is one of them:\n\nsetUndecorated(true); setBackground(new Color(1.0f,1.0f,1.0f,0.5f));\n\n4th float (which I set to 0.5f) in Color\'s constructor is alpha channel. It can be 0.0f - 1.0f depend on transparency you want. 1\n\nThis is worked for me once I replaced 0.5f with 0.0f. Nice Answer. – Hasitha Jayawardana May 7, 2019 at 4:58\n\nSee Translucent and Shaped Swing Windows by Kirill Grouchnikov. 1\n\nLink is now dead. Google suggests this blog post: pushing-pixels.org/2008/02/27/…\n\n– Mark Peschel Mar 4, 2018 at 20:59\n\nYou should make content pane transparent too. frame.setUndecorated(true); frame.getContentPane().setBackground(new Color(1.0f,1.0f,1.0f,0.0f)); frame.setBackground(new Color(1.0f,1.0f,1.0f,0.0f));\n\nIf your JFrame is a local variable or field:\n\nmyJFrame.setUndecorated(true);\n\nIf your class extends JFrame:\n\nsetUndecorated(true);\n\n1,Taylor GoldenTaylor Golden\n\n1\n\ntrue that since jdk7, transparency is only supported for undecorated frames. How to call methods should be basic knowledge, though :-)\n\nFor a Mac OS X example, see Re-paint problem on translucent frame/panel/component.""""""']",0.4666666,0.2
io,Serializable,Java Serializable Object to Byte Array,['<p>To add to the other answers  by implementating <code>java.io.Serializable</code>  you get  automatic  serialization capability for objects of your class.\nThe Java runtime will use reflection to figure out how to marshal and unmarshal your objects.</p>\n<p>In earlier version of Java  reflection was very slow  and so serializaing large object graphs (e.g. in client-server RMI applications) was a bit of a performance problem.\n<p>In recent versions of Java (1.3 onwards  certainly) the performance of reflection is vastly better than it used to be  and so this is much less of a problem.\n<p>Also  the built-in Java serialization mechanism isn t the only one  you can get third-party replacements  such as JBoss Serialization  which is considerably quicker  and is a drop-in replacement for the default.</p>\n<p>Serialization provides default functionality to store and later recreate the object.\nIn default serialization the object is constructed entirely from its stored bits  with no constructor calls.</p> <pre><code>  ObjectOutputStream oos = new ObjectOutputStream(       new FileOutputStream(&quot;/Users/Desktop/files/temp.txt&quot;));   oos.writeObject(linkedListHead); //writing head of linked list   oos.close(); </code></pre> <p>\nBut if you want restricted serialization or don t want some portion of your object to be serialized then use Externalizable.\nThe Externalizable interface extends the Serializable interface and adds two methods  writeExternal() and readExternal().\nWhile working with Externalizable we should remember that the default constructer should be public else the code will throw exception.\nHere if you comment the default constructer then the code will throw below exception:</p> <pre><code> java.io.InvalidClassException: javaserialization.\nWe can observe that as password is sensitive information  so i am not serializing it in writeExternal(ObjectOutput oo) method and not setting the value of same in readExternal(ObjectInput oi).\nWe can observe as we are not setting the value of passWord so it s null.</p> <p>\n<code>Externalizable</code> interface contains two methods: <code>writeExternal()</code> and <code>readExternal()</code>.</li> <li><strong>\nIncompatible changes to classes are those changes for which the guarantee of interoperability cannot be maintained like Deleting fields etc.</p> </blockquote> <ol start= 4 >\nYou can support different versions of your object.</li> <li><strong>public No-arg constructor</strong>:  <code>Serializable</code> uses reflection to construct object and does not require no arg constructor.\n<p>Serialization uses certain default behaviors to store and later recreate the object.\n<p>Externalization is used in the rare cases that you really want to store and rebuild your object in a completely different way and without using the default serialization mechanisms for data fields.\nA Java object is only serializable.\nMost of the java class are serializable</em>.</p>\n<p>Object Serialization produces a stream with information about the Java classes for the objects which are being saved.\nFor serializable objects  sufficient information is kept to restore those objects even if a different (but compatible) version of the implementation of the class is present.\nThe Serializable interface is defined to identify classes which implement the serializable protocol:</p>\nThe serialization interface has no methods or fields and serves only to identify the semantics of being serializable.\nFor serializing/deserializing a class  either we can use default writeObject and readObject methods (or) we can overriding writeObject and readObject methods from a class.</li>\nThe values of the non-transient and non-static fields of the class get serialized.</li> </ul>\n<p>For Externalizable objects  only the identity of the class of the object is saved by the container; the class must save and restore the contents.\nThe Externalizable interface has two methods  an externalizable object must implement a writeExternal and readExternal methods to save/restore the state of an object.</li> <li>\nProgrammer has to take care of which objects to be serialized.\nAs a programmer take care of Serialization So  here transient keyword will not restrict any object in Serialization process.</li> <li>\nWhen an Externalizable object is reconstructed  an instance is created using the public no-arg constructor  then the readExternal method called.\n<p>Default serialization is somewhat verbose  and assumes the widest possible usage scenario of the serialized object  and accordingly the default format (Serializable) annotates the resultant stream with information about the class of the serialized object.</p>\n<p>Externalization give the producer of the object stream complete control over the precise class meta-data (if any) beyond the minimal required identification of the class (e.g. its name).\nThis is clearly desirable in certain situations  such as closed environments  where producer of the object stream and its consumer (which reifies the object from the stream) are matched  and additional metadata about the class serves no purpose and degrades performance.</p>\n<p>Additionally (as Uri point out) externalization also provides for complete control over the encoding of the data in the stream corresponding to Java types.\nFor (a contrived) example  you may wish to record boolean true as  Y  and false as  N .\n<p>The Externalizable interface was not actually provided to optimize the serialization process performance!\nbut to provide means of implementing your own custom processing and offer complete control over the format and contents of the stream for an object and its super types!</p>\n<p>When considering options for improving performance  don t forget custom serialization.\nYou can let Java do what it does well  or at least good enough  <em>for free</em>  and provide custom support for what it does badly.\n<p>There are so many difference exist between Serializable and Externalizable but when we compare difference between custom Serializable(overrided writeObject() &amp; readObject()) and Externalizable  then we find that custom implementation is tightly bind with ObjectOutputStream class where as in Externalizable case   we ourself provide an implementation of ObjectOutput which may be ObjectOutputStream class or it could be some other like org.apache.mina.filter.codec.serialization.ObjectSerializationOutputStream</p>\nWe can comment below two method and use default serialization process as well              Sequence of class attributes in read and write methods MUST BE same.\nWe can define custom validation or business rules inside read/write methods.\nplease check in/out object case of Externalizable.\nWhere as Outstream/Instream are tightly bind to classes.\nWe can extends ObjectOutputStream/ObjectInputStream but it will a bit difficult to use.</p>\n<code>Externalizable</code> contains 2 methods  <code>readExternal</code> and <code>writeExternal</code>.\nallows the implementer to decide how an object is serialized  where as <code>Serializable</code>\n<p>For long-term persistence  the class must be able to decode this form  which restricts the changes you can make to class design.\n<p>Serialization can also lead to security problems.\nBy being able to serialize any object it has a reference to  a class can access data it would not normally be able to (by parsing the resultant byte data).</p>\n<p>There are other issues  such as the serialized form of inner classes not being well defined.</p>\nNet people got it wrong this time around  would have been better to make everything serializable by default and only need to mark those classes that can t be safely serialized instead.</p>\n<p>For example in Smalltalk (a language created in 70s) every object is serializable by default.\nI have no idea why this is not the case in Java  considering the fact that the vast majority of objects are safe to serialize and just a few of them aren t.\n<p>Marking an object as serializable (with an interface) doesn t magically make that object serializable  <strong>it was serializable all along</strong>  it s just that now you expressed something that the system could have found on his own  so I see no real good reason for serialization being the way it is now.</p>\n<p>Not everything is genuinely serializable.\nYou could serialize the data/state of your socket object  but the essence of an active connection would be lost.</p>\n<p>The main role of Serializable in Java is to actually make  by default  all other objects nonserializable.\nSerialization is a very dangerous mechanism  especially in its default implementation.\nHence  like friendship in C++  it is off by default  even if it costs a little to make things serializable.</p>\n<p>Serialization adds constraints and potential problems since structure compatibility is not insured.\nSo the effort you d spend making the class serializble properly dwarves the cost of adding the interface.\n<p>For some classes  especially those that represent something more physical like a File  a Socket  a Thread  or a DB connection  it makes absolutely no sense to serialize instances.\nFor many others  Serialization may be problematic because it destroys uniqueness constraints  or simply forces you to deal with instances of different versions of a class  which you may not want to.</p>\n<p>Arguably  it might have been better to make everything Serializable by default and make classes non-serializable through a keyword or marker interface - but then  those who should use that option probably would not think about it.\n<p>Apparently everything was serializable in some preliminary designs  but because of security and correctness concerns the final design ended up as we all know.</p>\n<p>Having to state explicitely that instances of a certain class are Serializable the language forces you to think about if you you should allow that.\nFor simple value objects serialization is trivial  but in more complex cases you need to really think things through.</p>\n<p>By just relying on the standard serialization support of the JVM you expose yourself to all kinds of nasty versioning issues.</p>\n<p>Uniqueness  references to  real  resources  timers and lots of other types of artifacts are NOT candidates for serialization.</p>\nOther languages happily try serializing everything that doesn t jump on a tree after you ve counted to 10.\nAn Object should default to be serializable.\n<p>So  what you basically need to do is read all the properties of your 3rd-party class yourself.'],['If the object array contains Serializable objects then you can use java.io.ObjectOutputStream\n\nObjectOutputStream out = new ObjectOutputStream(anyOutputStream);\nout.writeObject(objectArray);\n‚Ä¶'],"['""""""Java Serializable Object to Byte Array\n\nLet\'s say I have a serializable class AppMessage. I would like to transmit it as byte[] over sockets to another machine where it is rebuilt from the bytes received. How could I achieve this? 3,8,3\n\nWhy as byte[]? Why not just write it directly to the socket with ObjectOutputStream, and read it with ObjectInputStream? new ObjectMapper().writeValueAsBytes(JAVA_OBJECT_HERE)\n\n\n\nPrepare the byte array to send:\n\nstatic byte[] serialize(final Object obj) { ByteArrayOutputStream bos = new ByteArrayOutputStream(); try (ObjectOutputStream out = new ObjectOutputStream(bos)) { out.writeObject(obj); out.flush(); return bos.toByteArray(); } catch (Exception ex) { throw new RuntimeException(ex); } }\n\nCreate an object from a byte array:\n\nstatic Object deserialize(byte[] bytes) { ByteArrayInputStream bis = new ByteArrayInputStream(bytes); try (ObjectInput in = new ObjectInputStream(bis)) { return in.readObject(); } catch (Exception ex) { throw new RuntimeException(ex); } }\n\nedited Mar 5 at 1:18\n\nTaylor LeeseTaylor Leese\n\n12\n\nThat\'s not how I read the question. To me it sounds like his problem is how to convert the object to a byte[] -- not how to send it. Taylor: yes you got it right. i want to turn the object into a byte[] and transmit it. can you please also provide the code regarding how to turn this byte[] into an object please? Please close always any stream to release the system resources. (Edited in code)\n\n\n\ncan this work with objects that I can\'t implement serializable? ObjectInput, ObjectOuput, ByteArrayOutputStream and ByteArrayInputStream all implement the AutoCloseable interface, wouldn\'t it be good practice to use it to avoid missing closing them by mistake? (I\'m not entirely sure if this is the best practice, that\'s why I\'m wondering.) Example: try(ByteArrayOutputStream bos = new ByteArrayOutputStream(); ObjectOutput out = new ObjectOutputStream(bos)){ /*Do stuff*/ }catch(IOException e){/*suppress exception*/}. It also removes the need for the final clause and its additional try-catch. | Show 7 more comments\n\nThe best way to do it is to use SerializationUtils from Apache Commons Lang. byte[] data = SerializationUtils.serialize(yourObject);\n\nYourObject yourObject = SerializationUtils.deserialize(data)\n\nAs mentioned, this requires Commons Lang library. It can be imported using Gradle:\n\ncompile \'org.apache.commons:commons-lang3:3.5\'\n\n<!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --> <dependency> <groupId>org.apache.commons</groupId> <artifactId>commons-lang3</artifactId> <version>3.5</version> </dependency>\n\nAnd more ways mentioned here\n\nAlternatively, the whole collection can be imported. Refer this link\n\n2,6,9\n\nAdded overhead?""""""']",0.158415842,0.25
io,Serializable,JSONObject Not Serializable?,['<p>To add to the other answers  by implementating <code>java.io.Serializable</code>  you get  automatic  serialization capability for objects of your class.\nThe Java runtime will use reflection to figure out how to marshal and unmarshal your objects.</p>\n<p>In earlier version of Java  reflection was very slow  and so serializaing large object graphs (e.g. in client-server RMI applications) was a bit of a performance problem.\n<p>In recent versions of Java (1.3 onwards  certainly) the performance of reflection is vastly better than it used to be  and so this is much less of a problem.\n<p>Also  the built-in Java serialization mechanism isn t the only one  you can get third-party replacements  such as JBoss Serialization  which is considerably quicker  and is a drop-in replacement for the default.</p>\n<p>Serialization provides default functionality to store and later recreate the object.\nIn default serialization the object is constructed entirely from its stored bits  with no constructor calls.</p> <pre><code>  ObjectOutputStream oos = new ObjectOutputStream(       new FileOutputStream(&quot;/Users/Desktop/files/temp.txt&quot;));   oos.writeObject(linkedListHead); //writing head of linked list   oos.close(); </code></pre> <p>\nBut if you want restricted serialization or don t want some portion of your object to be serialized then use Externalizable.\nThe Externalizable interface extends the Serializable interface and adds two methods  writeExternal() and readExternal().\nWhile working with Externalizable we should remember that the default constructer should be public else the code will throw exception.\nHere if you comment the default constructer then the code will throw below exception:</p> <pre><code> java.io.InvalidClassException: javaserialization.\nWe can observe that as password is sensitive information  so i am not serializing it in writeExternal(ObjectOutput oo) method and not setting the value of same in readExternal(ObjectInput oi).\nWe can observe as we are not setting the value of passWord so it s null.</p> <p>\n<code>Externalizable</code> interface contains two methods: <code>writeExternal()</code> and <code>readExternal()</code>.</li> <li><strong>\nIncompatible changes to classes are those changes for which the guarantee of interoperability cannot be maintained like Deleting fields etc.</p> </blockquote> <ol start= 4 >\nYou can support different versions of your object.</li> <li><strong>public No-arg constructor</strong>:  <code>Serializable</code> uses reflection to construct object and does not require no arg constructor.\n<p>Serialization uses certain default behaviors to store and later recreate the object.\n<p>Externalization is used in the rare cases that you really want to store and rebuild your object in a completely different way and without using the default serialization mechanisms for data fields.\nA Java object is only serializable.\nMost of the java class are serializable</em>.</p>\n<p>Object Serialization produces a stream with information about the Java classes for the objects which are being saved.\nFor serializable objects  sufficient information is kept to restore those objects even if a different (but compatible) version of the implementation of the class is present.\nThe Serializable interface is defined to identify classes which implement the serializable protocol:</p>\nThe serialization interface has no methods or fields and serves only to identify the semantics of being serializable.\nFor serializing/deserializing a class  either we can use default writeObject and readObject methods (or) we can overriding writeObject and readObject methods from a class.</li>\nThe values of the non-transient and non-static fields of the class get serialized.</li> </ul>\n<p>For Externalizable objects  only the identity of the class of the object is saved by the container; the class must save and restore the contents.\nThe Externalizable interface has two methods  an externalizable object must implement a writeExternal and readExternal methods to save/restore the state of an object.</li> <li>\nProgrammer has to take care of which objects to be serialized.\nAs a programmer take care of Serialization So  here transient keyword will not restrict any object in Serialization process.</li> <li>\nWhen an Externalizable object is reconstructed  an instance is created using the public no-arg constructor  then the readExternal method called.\n<p>Default serialization is somewhat verbose  and assumes the widest possible usage scenario of the serialized object  and accordingly the default format (Serializable) annotates the resultant stream with information about the class of the serialized object.</p>\n<p>Externalization give the producer of the object stream complete control over the precise class meta-data (if any) beyond the minimal required identification of the class (e.g. its name).\nThis is clearly desirable in certain situations  such as closed environments  where producer of the object stream and its consumer (which reifies the object from the stream) are matched  and additional metadata about the class serves no purpose and degrades performance.</p>\n<p>Additionally (as Uri point out) externalization also provides for complete control over the encoding of the data in the stream corresponding to Java types.\nFor (a contrived) example  you may wish to record boolean true as  Y  and false as  N .\n<p>The Externalizable interface was not actually provided to optimize the serialization process performance!\nbut to provide means of implementing your own custom processing and offer complete control over the format and contents of the stream for an object and its super types!</p>\n<p>When considering options for improving performance  don t forget custom serialization.\nYou can let Java do what it does well  or at least good enough  <em>for free</em>  and provide custom support for what it does badly.\n<p>There are so many difference exist between Serializable and Externalizable but when we compare difference between custom Serializable(overrided writeObject() &amp; readObject()) and Externalizable  then we find that custom implementation is tightly bind with ObjectOutputStream class where as in Externalizable case   we ourself provide an implementation of ObjectOutput which may be ObjectOutputStream class or it could be some other like org.apache.mina.filter.codec.serialization.ObjectSerializationOutputStream</p>\nWe can comment below two method and use default serialization process as well              Sequence of class attributes in read and write methods MUST BE same.\nWe can define custom validation or business rules inside read/write methods.\nplease check in/out object case of Externalizable.\nWhere as Outstream/Instream are tightly bind to classes.\nWe can extends ObjectOutputStream/ObjectInputStream but it will a bit difficult to use.</p>\n<code>Externalizable</code> contains 2 methods  <code>readExternal</code> and <code>writeExternal</code>.\nallows the implementer to decide how an object is serialized  where as <code>Serializable</code>\n<p>For long-term persistence  the class must be able to decode this form  which restricts the changes you can make to class design.\n<p>Serialization can also lead to security problems.\nBy being able to serialize any object it has a reference to  a class can access data it would not normally be able to (by parsing the resultant byte data).</p>\n<p>There are other issues  such as the serialized form of inner classes not being well defined.</p>\nNet people got it wrong this time around  would have been better to make everything serializable by default and only need to mark those classes that can t be safely serialized instead.</p>\n<p>For example in Smalltalk (a language created in 70s) every object is serializable by default.\nI have no idea why this is not the case in Java  considering the fact that the vast majority of objects are safe to serialize and just a few of them aren t.\n<p>Marking an object as serializable (with an interface) doesn t magically make that object serializable  <strong>it was serializable all along</strong>  it s just that now you expressed something that the system could have found on his own  so I see no real good reason for serialization being the way it is now.</p>\n<p>Not everything is genuinely serializable.\nYou could serialize the data/state of your socket object  but the essence of an active connection would be lost.</p>\n<p>The main role of Serializable in Java is to actually make  by default  all other objects nonserializable.\nSerialization is a very dangerous mechanism  especially in its default implementation.\nHence  like friendship in C++  it is off by default  even if it costs a little to make things serializable.</p>\n<p>Serialization adds constraints and potential problems since structure compatibility is not insured.\nSo the effort you d spend making the class serializble properly dwarves the cost of adding the interface.\n<p>For some classes  especially those that represent something more physical like a File  a Socket  a Thread  or a DB connection  it makes absolutely no sense to serialize instances.\nFor many others  Serialization may be problematic because it destroys uniqueness constraints  or simply forces you to deal with instances of different versions of a class  which you may not want to.</p>\n<p>Arguably  it might have been better to make everything Serializable by default and make classes non-serializable through a keyword or marker interface - but then  those who should use that option probably would not think about it.\n<p>Apparently everything was serializable in some preliminary designs  but because of security and correctness concerns the final design ended up as we all know.</p>\n<p>Having to state explicitely that instances of a certain class are Serializable the language forces you to think about if you you should allow that.\nFor simple value objects serialization is trivial  but in more complex cases you need to really think things through.</p>\n<p>By just relying on the standard serialization support of the JVM you expose yourself to all kinds of nasty versioning issues.</p>\n<p>Uniqueness  references to  real  resources  timers and lots of other types of artifacts are NOT candidates for serialization.</p>\nOther languages happily try serializing everything that doesn t jump on a tree after you ve counted to 10.\nAn Object should default to be serializable.\n<p>So  what you basically need to do is read all the properties of your 3rd-party class yourself.'],"['Call toString on the JSONObject, and then serialize the string. JSONObject itself is not serializable.\n\nString jsonString = jsonObject.toString();']","['""""""SONObject Not Serializable? I am trying to serialize an ArrayList of JSONObjects. But I get the error:\n\n05-07 01:04:24.130: WARN/System.err(913): java.io.NotSerializableException: org.json.JSONObject 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653) 05-07 01:04:24.130: WARN/System.err(913): at java.util.ArrayList.writeObject(ArrayList.java:651) 05-07 01:04:24.130: WARN/System.err(913): at java.lang.reflect.Method.invokeNative(Native Method) 05-07 01:04:24.130: WARN/System.err(913): at java.lang.reflect.Method.invoke(Method.java:507) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1219) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689) 05-07 01:04:24.130: WARN/System.err(913): at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653) 05-07 01:04:24.130: WARN/System.err(913): at org.stocktwits.activity.AddStocksActivity.serializeQuotes(AddStocksActivity.java:183) 05-07 01:04:24.130: WARN/System.err(913): at org.stocktwits.activity.AddStocksActivity.access$9(AddStocksActivity.java:178) 05-07 01:04:24.130: WARN/System.err(913): at org.stocktwits.activity.AddStocksActivity$2.onItemClick(AddStocksActivity.java:146) 05-07 01:04:24.130: WARN/System.err(913): at android.widget.AdapterView.performItemClick(AdapterView.java:284) 05-07 01:04:24.130: WARN/System.err(913): at android.widget.ListView.performItemClick(ListView.java:3513) 05-07 01:04:24.130: WARN/System.err(913): at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 05-07 01:04:24.130: WARN/System.err(913): at android.os.Handler.handleCallback(Handler.java:587) 05-07 01:04:24.130: WARN/System.err(913): at android.os.Handler.dispatchMessage(Handler.java:92) 05-07 01:04:24.130: WARN/System.err(913): at android.os.Looper.loop(Looper.java:130) 05-07 01:04:24.130: WARN/System.err(913): at android.app.ActivityThread.main(ActivityThread.java:3683) 05-07 01:04:24.130: WARN/System.err(913): at java.lang.reflect.Method.invokeNative(Native Method) 05-07 01:04:24.130: WARN/System.err(913): at java.lang.reflect.Method.invoke(Method.java:507) 05-07 01:04:24.130: WARN/System.err(913): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 05-07 01:04:24.130: WARN/System.err(913): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 05-07 01:04:24.130: WARN/System.err(913): at dalvik.system.NativeStart.main(Native Method)\n\nHere is my serialize & deserialize code:\n\nprivate void serializeQuotes() { FileOutputStream fos; try { fos = openFileOutput(Constants.FILENAME, Context.MODE_PRIVATE); ObjectOutputStream oos = new ObjectOutputStream(fos); oos.writeObject(quotes); oos.close(); } catch (FileNotFoundException e) { e.printStackTrace(); } catch (IOException e) { e.printStackTrace(); } } @SuppressWarnings(""unchecked"") private void deserializeQuotes() { try { FileInputStream fis = openFileInput(Constants.FILENAME); ObjectInputStream ois = new ObjectInputStream(fis); quotes = (ArrayList<JSONObject>) ois.readObject(); } catch (FileNotFoundException e) { e.printStackTrace(); } catch (IOException e) { e.printStackTrace(); } catch (ClassNotFoundException e) { e.printStackTrace(); } }\n\nSheehan AlamSheehan Alam\n\nDude, it\'s JSON. Why not just serialize it as JSON, instead of as a Java object of type JSONObject?""""""', '""""""It\'s not like it would break anything at all or am I missing something here? | Show 3 more comments\n\nIn the case you\'d still want Java built-in serialization without having to resort to marshal your JSON object into string notation, one thing you could do is extend JSONObject and JSONArray from org.json and just implement Serializable. Then you can use your own versions of JSONObject and JSONArray across the board instead of the originals. Make sure you define all constructors on your subclasses and call their super() counterparts as well as implement specific methods that return the parent types such as getJSONObject() and getJSONArray() from properties. Roberto AndradeRoberto Andrade\n\n1,3\n\nvoting up, since this is the right approach. I do the same since I am caching a comples JSONObject on MemCache, rather than get it created all the time or stringified. This does seem to work, but is it ""safe"" to do? Something about extending a 3rd party class that isn\'t serializable, and then marking it as so, seems a little risky. This is a better approach than the accepted one! Another way is to swap org.json library with json-simple. The JSONObject class from json-simple extends HashMap which is java Serializable as well as more java-ish API. http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1\n\nhttps://www.mkyong.com/java/json-simple-example-read-and-write-json/\n\nThamme GowdaThamme Gowda\n\nIf you have JSONArray inside Serializable object class try to initialize JSONArray in this way. private transient JSONArray jsonArray;\n\npublic class Person implements Serializable { private String name; private transient JSONArray jsonArray; public String getName() { return name; } public void setName(String name) { this.name = name; } public JSONArray getJsonArray() { return jsonArray; } public void setJsonArray(JSONArray jsonArray) { this.jsonArray = jsonArray; } }\n\n3,1\n\nBecause it\'ll change functionality, you might not want to lose your JSONArray on deserialize.. – James Andrew May 21, 2017 at 16:40\n\n""""""']",0.04950495,0.333333333
io,InputStream,Convert InputStream to byte array in Java,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\n<p>Here s a way using only the standard Java library (note that the stream is not closed  your mileage may vary).</p>\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nif we are not accessing it in multiple threads  and <code>StringBuilder</code> is faster).\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\nisn t necessary  but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n<p>If all you want to do is read the same information more than once  and the input data is small enough to fit into memory  you can copy the data from your <code>InputStream</code> to a <a href= http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html  rel= noreferrer >ByteArrayOutputStream</a>.</p> <p>\nBut if you really need to keep the original stream open to receive new data  then you will need to track the external call to <code>close()</code>.\n<p>You can t clone it  and how you are going to solve your problem depends on what the source of the data is.\n<p>One solution is to read all data from the InputStream into a byte array  and then create a ByteArrayInputStream around that byte array  and pass that input stream into your method.</p>\n<p>Edit 1: That is  if the other method also needs to read the same data.\n<p>If the data read from the stream is large  I would recommend using a TeeInputStream from Apache Commons IO.\nFilterInputStream</a> class and do the required processing of the bytes as the external lib reads the data.\nIt should be noted that this works byte for byte  so don t use this if high performance is a requirement.</strong></p>\nFetches entire contents of an InputStream and represent same data as result InputStream.\n<p>Cloning an input stream might not be a good idea  because this requires deep knowledge about the details of the input stream being cloned.\nA workaround for this is to create a new input stream that reads from the same source again.</p>\nAnd there is no need to maintain a second code path for the cloning of the stream.</p>\n<p>On the other hand  if reading from the stream is expensive (because a it s done over a low bandwith connection)  then this method will double the costs.\nJust create an instance  call the  multiply  method  and provide the source input stream and the amount of duplicates you need.</p>\nImportant: you must consume all cloned streams simultaneously in separate threads.</strong></p>'],"['I use this.\n\npublic static byte[] toByteArray(InputStream is) throws IOException {\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\n        try {\n            byte[] b = new byte[4096];\n            int n = 0;\n            while ((n = is.read(b)) != -1) {\n                output.write(b, 0, n);\n            }\n            return output.toByteArray();\n        } finally {\n            output.close();\n        }\n    }']","['""""""Convert InputStream to byte array in Java\n\nHow do I read an entire InputStream into a byte array? 1\n\nSee the reverse: byte[] to InputStream here: stackoverflow.com/questions/2091454/…\n\n\n\nYou can use Apache Commons IO to handle this and similar tasks. The IOUtils type has a static method to read an InputStream and return a byte[]. InputStream is; byte[] bytes = IOUtils.toByteArray(is);\n\nInternally this creates a ByteArrayOutputStream and copies the bytes to the output, then calls toByteArray(). It handles large files by copying the bytes in blocks of 4KiB. Rich SellerRich Seller\n\n24\n\nFor the want of writing 4 lines of code, you think that importing a 3rd-party dependency is worthwhile? If there is a library that handles the requirement, and deals with processing for large files, and is well tested, surely the question is why would I write it myself? The jar is only 107KB and if you have need for one method from it, you are likely to use others too\n\n\n\n@oxbow_lakes: considering the staggering amount of wrong implementations of this feature I\'ve seen in my developer life, I feel that yes it\'s very much worth the external dependency to get it right. Why not go and have a look at Apache commons stuff like FastArrayList or their soft & weak reference Maps and come back to tell me how ""well-tested"" this library is. It\'s a pile of rubbish\n\n\n\nIn addition to Apache commons-io, check out the ByteStreams class from Google Guava. InputStream is; byte[] filedata=ByteStreams.toByteArray(is);\n\n\n\n | Show 19 more comments\n\nYou need to read each byte from your InputStream and write it to a ByteArrayOutputStream. You can then retrieve the underlying byte array by calling toByteArray():\n\nInputStream is = ... ByteArrayOutputStream buffer = new ByteArrayOutputStream(); int nRead; byte[] data = new byte[16384]; while ((nRead = is.read(data, 0, data.length)) != -1) { buffer.write(data, 0, nRead); } return buffer.toByteArray();\n\n8,16\n\nWhat about the size of newly created byte[]. Why it is 16384?""""""', '""""""OP is asking for byte[]. It\'s not just \\r that could be a problem. This method converts the bytes to characters and back again (using the default character set for InputStreamReader). Any bytes which aren\'t valid in the default character encoding (say, -1 for UTF-8 on Linux) will be corrupted, potentially even changing the number of bytes. Seems like this is good answer, but text-oriented.""""""']",0.242424242,0.366666667
io,InputStream,Java: InputStream too slow to read huge files,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\n<p>Here s a way using only the standard Java library (note that the stream is not closed  your mileage may vary).</p>\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nif we are not accessing it in multiple threads  and <code>StringBuilder</code> is faster).\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\nisn t necessary  but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n<p>If all you want to do is read the same information more than once  and the input data is small enough to fit into memory  you can copy the data from your <code>InputStream</code> to a <a href= http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html  rel= noreferrer >ByteArrayOutputStream</a>.</p> <p>\nBut if you really need to keep the original stream open to receive new data  then you will need to track the external call to <code>close()</code>.\n<p>You can t clone it  and how you are going to solve your problem depends on what the source of the data is.\n<p>One solution is to read all data from the InputStream into a byte array  and then create a ByteArrayInputStream around that byte array  and pass that input stream into your method.</p>\n<p>Edit 1: That is  if the other method also needs to read the same data.\n<p>If the data read from the stream is large  I would recommend using a TeeInputStream from Apache Commons IO.\nFilterInputStream</a> class and do the required processing of the bytes as the external lib reads the data.\nIt should be noted that this works byte for byte  so don t use this if high performance is a requirement.</strong></p>\nFetches entire contents of an InputStream and represent same data as result InputStream.\n<p>Cloning an input stream might not be a good idea  because this requires deep knowledge about the details of the input stream being cloned.\nA workaround for this is to create a new input stream that reads from the same source again.</p>\nAnd there is no need to maintain a second code path for the cloning of the stream.</p>\n<p>On the other hand  if reading from the stream is expensive (because a it s done over a low bandwith connection)  then this method will double the costs.\nJust create an instance  call the  multiply  method  and provide the source input stream and the amount of duplicates you need.</p>\nImportant: you must consume all cloned streams simultaneously in separate threads.</strong></p>'],"['I would try this\n\n// create the file so we have something to read.\nfinal String fileName = ""1.2.fasta"";\nFileOutputStream fos = new FileOutputStream(fileName);\nfos.write(new byte[54 * 1024 * 1024]);\nfos.close();\n\n// read the file in one hit.\nlong start = System.nanoTime();\nFileChannel fc = new FileInputStream(fileName).getChannel();\nByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\nwhile (bb.remaining() > 0)\n    bb.getLong();\nlong time = System.nanoTime() - start;\nSystem.out.printf(""Took %.3f seconds to read %.1f MB%n"", time / 1e9, fc.size() / 1e6);\nfc.close();\n((DirectBuffer) bb).cleaner().clean();\nprints\n\nTook 0.016 seconds to read 56.6 MB']","['"""""" Java: InputStream too slow to read huge files\n\nI have to read a 53 MB file character by character. When I do it in C++ using ifstream, it is completed in milliseconds but using Java InputStream it takes several minutes. Is it normal for Java to be this slow or am I missing something? Also, I need to complete the program in Java (it uses servlets from which I have to call the functions which process these characters). I was thinking maybe writing the file processing part in C or C++ and then using Java Native Interface to interface these functions with my Java programs... How is this idea?""""""']",0.151515152,0.147619048
io,InputStream,Loading images using an InputStream,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\n<p>Here s a way using only the standard Java library (note that the stream is not closed  your mileage may vary).</p>\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nif we are not accessing it in multiple threads  and <code>StringBuilder</code> is faster).\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\nisn t necessary  but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n<p>If all you want to do is read the same information more than once  and the input data is small enough to fit into memory  you can copy the data from your <code>InputStream</code> to a <a href= http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html  rel= noreferrer >ByteArrayOutputStream</a>.</p> <p>\nBut if you really need to keep the original stream open to receive new data  then you will need to track the external call to <code>close()</code>.\n<p>You can t clone it  and how you are going to solve your problem depends on what the source of the data is.\n<p>One solution is to read all data from the InputStream into a byte array  and then create a ByteArrayInputStream around that byte array  and pass that input stream into your method.</p>\n<p>Edit 1: That is  if the other method also needs to read the same data.\n<p>If the data read from the stream is large  I would recommend using a TeeInputStream from Apache Commons IO.\nFilterInputStream</a> class and do the required processing of the bytes as the external lib reads the data.\nIt should be noted that this works byte for byte  so don t use this if high performance is a requirement.</strong></p>\nFetches entire contents of an InputStream and represent same data as result InputStream.\n<p>Cloning an input stream might not be a good idea  because this requires deep knowledge about the details of the input stream being cloned.\nA workaround for this is to create a new input stream that reads from the same source again.</p>\nAnd there is no need to maintain a second code path for the cloning of the stream.</p>\n<p>On the other hand  if reading from the stream is expensive (because a it s done over a low bandwith connection)  then this method will double the costs.\nJust create an instance  call the  multiply  method  and provide the source input stream and the amount of duplicates you need.</p>\nImportant: you must consume all cloned streams simultaneously in separate threads.</strong></p>'],"['If you are using PDFBox 2.0.0 or above\n\nPDDocument document = PDDocument.load(new File(""filePath"")); //filePath is the path to your .pdf\nPDFRenderer pdfRenderer = new PDFRenderer(document);\n\nfor(int i=0; i<document.getPages().getCount(); i++){\n    BufferedImage bim = pdfRenderer.renderImage(i, 1.0f, ImageType.RGB); //Get bufferedImage for page ""i"" with scale 1\n    ByteArrayOutputStream os = new ByteArrayOutputStream();\n    ImageIO.write(bim, ""jpg"", os);\n    InputStream is = new ByteArrayInputStream(os.toByteArray());\n    //Do whatever you need with the inputstream\n}\ndocument.close()']","['""""""Loading images using an InputStream\n\nAsked In my IDE I\'m able to get the path of an image that is in my resource folder and make that path a new file object by doing this:\n\nURL imagePath = getClass().getResource(""/image.png""); try { //Convert the URLs into URIs and make a file object with that path File image = new File(imagePath.toURI()); } catch (URISyntaxException e) { e.printStackTrace(); }\n\nBut when I make a jar file of my program I get the error URI is not hierarchical. And I have done some research and found out that I have to create an InputStream using the getResourceAsStream() method. But I do not know how to make that work for an image. I just need to be able to get the path of the image from my resource folder. How would I make this work even if its a jar. Don\'t convert the URL to a File reference, this defeats the point of having the embedded resource and embedded resources are simply entries inside a zip file, so they can\'t be treated as a File. Instead, use something like ImageIO.read(imagePath)\n\nSee Reading/Loading an Image for more details\n\nMadProgrammerMadProgrammer\n\nI think the best solution in this case would be to ask the ClassLoader directly for an InputStream (using ClassLoader.getResourceAsStream) and pass that to ImageIO.read. Here is a complete example. import java.awt.image.BufferedImage; import java.io.IOException; import java.io.InputStream; import javax.imageio.ImageIO; public final class Main { public static void main(final String[] args) { final ClassLoader clsldr = Main.class.getClassLoader(); for (final String path : args) { try { InputStream is = null; BufferedImage image = null; try { is = clsldr.getResourceAsStream(path); if (is != null) { image = ImageIO.read(is); if (image != null) { // Do something with the image. System.out.printf(""%s: %d x %d%n"", path, image.getWidth(), image.getHeight()); } else { System.err.printf(""error: %s: %s%n"", path, ""not a valid image file""); } } else { System.err.printf(""error: %s: %s%n"", path, ""no such resource""); } } finally { if (is != null) { is.close(); } } } catch (final IOException e) { System.err.printf(""error: %s: %s%n"", path, e.getMessage()); } } } }\n\nSay I have a picture file photo.jpg and then compile above file and create a JAR file like this\n\n$ javac *.java $ jar -cfe example.jar Main *.class photo.jpg\n\nthen I can run the program like this and get the following output. $ java -jar example NoSuchThing Main.class photo.jpg error: NoSuchThing: no such resource error: Main.class: not a valid image file photo.jpg: 328 x 328\n\n5gon12eder5gon12eder\n\n1\n\nYour answer is a great one if I use an InputStream. But MadProgrammer pointed out that I don\'t have to use an InputStream, I was getting an error because I was converting a URL into a URI then into a File. So in my case his answer is just simpler.""""""']",0.151515152,0.5
io,InputStream,How do I read bytes from InputStream?,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\n<p>Here s a way using only the standard Java library (note that the stream is not closed  your mileage may vary).</p>\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nif we are not accessing it in multiple threads  and <code>StringBuilder</code> is faster).\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\nisn t necessary  but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n<p>If all you want to do is read the same information more than once  and the input data is small enough to fit into memory  you can copy the data from your <code>InputStream</code> to a <a href= http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html  rel= noreferrer >ByteArrayOutputStream</a>.</p> <p>\nBut if you really need to keep the original stream open to receive new data  then you will need to track the external call to <code>close()</code>.\n<p>You can t clone it  and how you are going to solve your problem depends on what the source of the data is.\n<p>One solution is to read all data from the InputStream into a byte array  and then create a ByteArrayInputStream around that byte array  and pass that input stream into your method.</p>\n<p>Edit 1: That is  if the other method also needs to read the same data.\n<p>If the data read from the stream is large  I would recommend using a TeeInputStream from Apache Commons IO.\nFilterInputStream</a> class and do the required processing of the bytes as the external lib reads the data.\nIt should be noted that this works byte for byte  so don t use this if high performance is a requirement.</strong></p>\nFetches entire contents of an InputStream and represent same data as result InputStream.\n<p>Cloning an input stream might not be a good idea  because this requires deep knowledge about the details of the input stream being cloned.\nA workaround for this is to create a new input stream that reads from the same source again.</p>\nAnd there is no need to maintain a second code path for the cloning of the stream.</p>\n<p>On the other hand  if reading from the stream is expensive (because a it s done over a low bandwith connection)  then this method will double the costs.\nJust create an instance  call the  multiply  method  and provide the source input stream and the amount of duplicates you need.</p>\nImportant: you must consume all cloned streams simultaneously in separate threads.</strong></p>'],['Try this( IOUtils is commons-io)\n\nbyte[] bytes = IOUtils.toByteArray(instream);'],"['""""""12\n\n+1 for using the standard libraries instead of a 3rd party dependency. Unfortunately it doesn\'t work for me because I don\'t know the length of the stream upfront. @janus it is a ""File"". this way only works if u know the length of the file or the count of bytes to read. Interesting thing, but you must know the exact length of the (part of the) stream to read. Moreover, the class DataInputStream is primary used to read primary types (Longs, Shorts, Chars...) from a stream, so we can see this usage as a misuse of the class. If you already know the length of the data to read from the stream, this is no better than InputStream.read. @LoganPickup InputStream.read does not guarantee to return all the bytes you request! | Show 7 more comments\n\nIf you happen to use Google Guava, it\'ll be as simple as using ByteStreams:\n\nbyte[] bytes = ByteStreams.toByteArray(inputStream);\n\n0\n\nSafe solution (close streams correctly):\n\nfinal byte[] bytes; try (inputStream) { bytes = inputStream.readAllBytes(); }\n\npublic static byte[] readAllBytes(InputStream inputStream) throws IOException { final int bufLen = 4 * 0x400; // 4KB byte[] buf = new byte[bufLen]; int readLen; IOException exception = null; try { try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) { while ((readLen = inputStream.read(buf, 0, bufLen)) != -1) outputStream.write(buf, 0, readLen); return outputStream.toByteArray(); } } catch (IOException e) { exception = e; throw e; } finally { if (exception == null) inputStream.close(); else try { inputStream.close(); } catch (IOException e) { exception.addSuppressed(e); } } }\n\nKotlin (when Java 9+ isn\'t accessible):\n\n@Throws(IOException::class) fun InputStream.readAllBytes(): ByteArray { val bufLen = 4 * 0x400 // 4KB val buf = ByteArray(bufLen) var readLen: Int = 0 ByteArrayOutputStream().use { o -> this.use { i -> while (i.read(buf, 0, bufLen).also { readLen = it } != -1) o.write(buf, 0, readLen) } return o.toByteArray() } }\n\nTo avoid nested use see here. Scala (when Java 9+ isn\'t accessible) (By @Joan. Thx):\n\ndef readAllBytes(inputStream: InputStream): Array[Byte] = Stream.continually(inputStream.read).takeWhile(_ != -1).map(_.toByte).toArray\n\nMir-IsmailiMir-Ismaili\n\n6\n\nDoesn\'t it mean that at some point you\'d have double the memory used, because you have both the buffer and the byte array? Isn\'t there a way to send the bytes directly to the output byte array? @androiddeveloper; I\'m sorry.""""""', '""""""OP is asking for byte[]. It\'s not just \\r that could be a problem. This method converts the bytes to characters and back again (using the default character set for InputStreamReader). Any bytes which aren\'t valid in the default character encoding (say, -1 for UTF-8 on Linux) will be corrupted, potentially even changing the number of bytes. Seems like this is good answer, but text-oriented.""""""']",0.151515152,1
io,FileInputStream,FileInputStream read until last 128 bytes of file,['Don t use FileInputStream</strong> as a parameter or variable type.\nUse the abstract base class  in this case InputStream instead.</p>\n<p>But it will work only within your IDE  not in runnable JAR.\n<p>Don t make the mistake of relying upon or needlessly converting/losing endline characters.\nDon t forget to use the proper character encoding to interpres the stream.</p>\n<p>If you want to make this a little more efficient  you can use arrays of characters instead  but to be honest  looping over the characters can be still quite fast.</p>'],"['This should work.\n\nInputStream is = Context.openFileInput(someFileName);\nByteArrayOutputStream bos = new ByteArrayOutputStream();\nbyte[] b = new byte[1024];\nwhile ((int bytesRead = is.read(b)) != -1) {\n   bos.write(b, 0, bytesRead);\n}\nbyte[] bytes = bos.toByteArray();']","['""""""FileInputStream read until last 128 bytes of file\n\nI\'m trying to read the last 128 bytes from a file (the signature) and then trying to read until those bytes but the first part (reading the last 128 bytes) is returning an ArrayIndexOutOfBoundsException:\n\nbyte[] signature = new byte[128]; FileInputStream sigFis = new FileInputStream(f); sigFis.read(signature, (int)f.length()-128, 128); sigFis.close();\n\nAnd then the last part doesn\'t seem to be working either, I\'m using an offset that i increase gradually:\n\nCipherInputStream cis = new CipherInputStream(fis, c); FileOutputStream fos = new FileOutputStream(destFile); int i = cis.read(data); int offset = 0, maxsize = (int)f.length()-128; while((i != -1) && offset<maxsize){ fos.write(data, 0, i); sig.update(data); fos.flush(); i = cis.read(data); offset+=1024; }\n\nI get an EOFExcpetion with the RAF I used to do my ops... byte[] signature = new byte[128]; int offset = (int)f.length()-128; raf.seek(offset); raf.readFully(signature, 0, 128);\n\n2\n\nI\'m still having trouble with the damn randomAccessFile I use, I do a seek(file.length()-128) and then read(data, 0, 128) and it just sends an EOFException... I was making a dumb mistake, i was reading an empty file... I would use File or FileChannel to get the file size. This is how to read until the last 128 bytes\n\nFileInputStream is = new FileInputStream(""1.txt""); FileChannel ch = is.getChannel(); long len = ch.size() - 128; BufferedInputStream bis = new BufferedInputStream(is); for(long i = 0; i < len; i++) { int b = bis.read(); ... }\n\nif we continue reading we will get the last 128 bytes\n\nByteArrayOutputStream bout128 = new ByteArrayOutputStream(); for(int b; (b=bis.read() != -1);) { bout128.write(b); } byte[] last128 = bout128.toByteArray();\n\nEvgeniy DorofeevEvgeniy Dorofeev\n\n6\n\nThanks, that makes a lot of sense, I\'ll try that out but I think I\'m gonna use a RandomAccessFile and the skip the bytes, read the last 128\n\n\n\nSorry, but this thing is quite particular, won\'t this use of the stream change the pointer of my FileInputStream (or are you saying I should create a new stream?) and hence screw up the writing of the data? If you want only to read from file it\'s more logical to use FileInputStream. As for RandomAccessFile, if you change file position and then write, it will write from the new position. what do you mean ""more logical to use FileInputStream""? Because that is exactly what I\'m trying to find out, reading the file but stoping it when there are 128 bytes left on the stream/file\n\n\n\nCould you please help on reading until the last 128 bytes but using a fileinputstream? | Show 1 more comment\n\nI think you got confused with the read method parameters.. FileInputStream sigFis = new FileInputStream(f); sigFis.read(signature, (int)f.length()-128, 128); //This doesn\'t give you last 128 bits. // The offset is offset of the byte array \'signature // Thats the reason you see ArrayIndexOutOfBoundsException sigFis.close();\n\nreplace your read() method with\n\nsigFis.read(signature); //But now signature cannot be just 128 array but length of file. And read the last 128 bytes\n\nInputStream read method signature looks as below:\n\nint java.io.FileInputStream.read(byte[] b, int off, int len) Parameters: b the buffer into which the data is read. off the start offset in the destination array b len the maximum number of bytes read. prashantsunkariprashantsunkari\n\n1\n\nIt helps and a lot, what a stupid mistake I was making, that\'s what you get for not reading the method properties with propper attention...""""""']",0.555555556,0.111111111
lang,Object,Converting json from a file to a java Object,['<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>Both of these interfaces allow for different behavior.\nComparable allows you to make the object act like you just described Strings (in fact  String implements Comparable).\nThe second  Comparator  allows you to do what you are asking to do.\nIf the objects in the ArrayList implement comparable  you can instead do something like this:</p>\n<p>The <a href= http://java.sun.com/javase/6/docs/api/java/util/Collections.html  rel= noreferrer >Collections</a> class contains a number of these useful  common tools.</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>\n<p>Since technologies appear everyday  the answer will change in the time.\n<p>Of course  having this kind of beauty impacts in the performance (an average of 2 times)  but can you find a more readable code?</p>\nFortunately  the actual code is much simpler and shorter than this description.</p>\n<p>If you want to sort for alphabet that contains non English characters you can use Locale...'],"['This simple example works like a charm:\nDTOs\n\npublic class SampleDTO \n{\n   private String name;\n   private InnerDTO inner;\n   // getters/setters\n}\n\npublic class InnerDTO \n{\n   private int number;\n   private String str; \n   // getters/setters  \n}  \nGson\n\n  BufferedReader br = new BufferedReader(new FileReader(""/tmp/test.json""));\n  SampleDTO sample = new Gson().fromJson(br, SampleDTO.class);  \nJackson\n\n  InputStream inJson = SampleDTO.class.getResourceAsStream(""/test.json"");\n  SampleDTO sample = new ObjectMapper().readValue(inJson, SampleDTO.class);\nJSON (test.json)\n\n{\n   ""name"" : ""Mike"",\n   ""inner"": {\n      ""number"" : 5,\n      ""str"" : ""Simple!""\n   }\n}']","['""""""You are also likely to have positive feedback from users in the form of upvotes, when the code is explained. A common way of getting both array of json in file or simply json would be\n\nInputStream inputStream= Employee.class.getResourceAsStream(""/file.json""); CollectionType collectionType = mapper.getTypeFactory().constructCollectionType(List.class, Employee.class); List<Employee> lstEmployees = mapper.readValue(inputStream, collectionType);\n\nThe file.json needs to be placed in the resources folder. If your file only has a json block without json array square brackets [] , you can skip the CollectionType\n\nInputStream inputStream= Employee.class.getResourceAsStream(""/file.json""); Employee employee = mapper.readValue(inputStream, Employee.class);\n\nAlso refer here for original question from where I have drawn. Another simple way to convert json from a file to a java object is to use Filelize\n\nFilelizer filelizer = new Filelizer(""/tmp/""); var sample = filelizer.find(""test"", SampleDTO.class); System.out.println(sample);\n\nanswered Apr 19 at 7:57\n\nJan-Terje SørensenJan-Terje Sørensen\n\n""""""', '""""""3) Because Dan said so. 4) I\'m just kidding regarding to 3 :-)\n\n\n\nUnfortunately, the method restricts the output size to 1024. If one needs to convert a file to a byte stream, better not use this. to use SerializationUtils.serialize(o), your object need this implements Serializable\n\n\n\nBe careful of certain versions of Apache Commons\'s (de)serialization library if you are trying to sandbox the application! There are known vulnerabilities regarding custom deserialization methods. Use a SecurityManager or update to the newest Apache Commons version\n\n\n\n | Show 4 more comments\n\nIf you use Java >= 7, you could improve the accepted solution using try with resources:\n\nprivate byte[] convertToBytes(Object object) throws IOException { try (ByteArrayOutputStream bos = new ByteArrayOutputStream(); ObjectOutputStream out = new ObjectOutputStream(bos)) { out.writeObject(object); return bos.toByteArray(); } }\n\nAnd the other way around:\n\nprivate Object convertFromBytes(byte[] bytes) throws IOException, ClassNotFoundException { try (ByteArrayInputStream bis = new ByteArrayInputStream(bytes); ObjectInputStream in = new ObjectInputStream(bis)) { return in.readObject(); } }\n\nVíctor RomeroVíctor Romero\n\n5,1\n\nIt is not quite the same than the accepted solution as the written data is not flushed before method toByteArray() is invoked, i.e. it could happen that some data remains in internal buffers and that not all data is transferred to the returned byte[] array. I have not found a specification of the ObjectOutputStream which describe buffer behavior. Can be done by SerializationUtils, by serialize & deserialize method by ApacheUtils to convert object to byte[] and vice-versa , as stated in @uris answer. To convert an object to byte[] by serializing:\n\nbyte[] data = SerializationUtils.serialize(object);\n\nTo convert byte[] to object by deserializing::\n\nObject object = (Object) SerializationUtils.deserialize(byte[] data)\n\nClick on the link to Download org-apache-commons-lang.jar\n\nIntegrate .jar file by clicking:\n\nFileName -> Open Medule Settings -> Select your module -> Dependencies -> Add Jar file and you are done. Pankaj LilanPankaj Lilan\n\n4,1\n\nnever add a dependency like this, use maven/gradle to download dependency and add it to the build path\n\n\n\nAnother interesting method is from com.fasterxml.jackson.databind.ObjectMapper\n\nbyte[] data = new ObjectMapper().writeValueAsBytes(JAVA_OBJECT_HERE)\n\n<dependency> <groupId>com.fasterxml.jackson.core</groupId> <artifactId>jackson-databind</artifactId> </dependency>\n\nAsad ShakeelAsad Shakeel\n\n2,I also recommend to use SerializationUtils tool. I want to make a ajust on a wrong comment by @Abilash. The SerializationUtils.serialize() method is not restricted to 1024 bytes, contrary to another answer here. public static byte[] serialize(Object object) { if (object == null) { return null; } ByteArrayOutputStream baos = new ByteArrayOutputStream(1024); try { ObjectOutputStream oos = new ObjectOutputStream(baos); oos.writeObject(object); oos.flush(); } catch (IOException ex) { throw new IllegalArgumentException(""Failed to serialize object of type: "" + object.getClass(), ex); } return baos.toByteArray(); }\n\nAt first sight， you may think that new ByteArrayOutputStream(1024) will only allow a fixed size. But if you take a close look at the ByteArrayOutputStream, you will figure out the the stream will grow if necessary:\n\nThis class implements an output stream in which the data is written into a byte array. The buffer automatically grows as data is written to it. The data can be retrieved using toByteArray() and toString(). 2\n\ncan you add how to do the reverse? so byte[] to object? I know others have this, but I like your answer a lot more and I can\'t get the deserialisation to work. I want to avoid returning null in any case. I was also skeptical about this code after reading @Abilash answer. But you cleared me.""""""']",0.333333333,0.3
lang,Object,Java/JAXB: Unmarshall XML attributes to specific Java Object attributes,['<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>Both of these interfaces allow for different behavior.\nComparable allows you to make the object act like you just described Strings (in fact  String implements Comparable).\nThe second  Comparator  allows you to do what you are asking to do.\nIf the objects in the ArrayList implement comparable  you can instead do something like this:</p>\n<p>The <a href= http://java.sun.com/javase/6/docs/api/java/util/Collections.html  rel= noreferrer >Collections</a> class contains a number of these useful  common tools.</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>\n<p>Since technologies appear everyday  the answer will change in the time.\n<p>Of course  having this kind of beauty impacts in the performance (an average of 2 times)  but can you find a more readable code?</p>\nFortunately  the actual code is much simpler and shorter than this description.</p>\n<p>If you want to sort for alphabet that contains non English characters you can use Locale...'],"['You may create a separate classes to represent structure of your XML:\n\npublic class Section {\n    @XmlAttribute\n    public String name;\n    @XmlElement(name = ""value"")\n    public List<Value> values;\n}\n\npublic class Value {\n    @XmlAttribute\n    public String name;\n    @XmlValue\n    public String value;\n}\nand then use an XmlAdapter to perform conversion:\n\npublic class OptionsAdapter extends XmlAdapter<Section, Options> {\n    public Options unmarshal(Section s) {\n        if (""default_options"".equals(s.name)) {\n            ...\n        } else if (...) {\n            ...\n        }\n        ...\n    }\n    ...\n}\n\n@XmlElement\npublic class Configuration {\n    @XmlElement(name = ""section"")\n    @XmlJavaTypeAdapter(OptionsAdapter.class)\n    public List<Options> options;\n}\n\npublic class DefaultOptions extends Options { ... }\npublic class CustomOptions extends Options { ... }']","['""""""Java/JAXB: Unmarshall XML attributes to specific Java object attributes\n\nThere\'s ugly XML file that has to be unmarshalled:\n\n<?xml version=""1.0"" ?> <configuration> <section name=""default_options""> <value name=""default_port"">8081</value> <value name=""log_level"">WARNING</value> </section> <section name=""custom_options""> <value name=""memory"">64M</value> <value name=""compatibility"">yes</value> </section> </configuration>\n\nResulting Java Objects should be:\n\npublic class DefaultOptions { private int defaultPort; private String logLevel; // etc... } public class CustomOptions { private String memory; private String compatibility; // etc... }\n\nThis question\'s answer is very close but I can\'t figure out the final solution. Artyom SokolovArtyom Sokolov\n\n2,3\n\nCan\'t you change the resulting java objects? IMHO it would be much easier and cleaner if you just followed the xml structure (or change it to follow the structure u want)\n\n– Diego Dias Jul 19, 2010 at 20:42\n\n@Diego Dias, actually no. There have to be POJOs like these. – Artyom Sokolov Jul 19, 2010 at 20:53\n\nCan a common super class be added to DefaultOptions & CustomOptions? Introduce a common super class called Options:\n\nimport javax.xml.bind.annotation.XmlAttribute; public abstract class Options { private String name; @XmlAttribute public String getName() { return name; } public void setName(String name) { this.name = name; } }\n\nThen on your class with the list of options (Configuration in this example), specify an @XmlJavaTypeAdapter on that property:\n\nimport java.util.ArrayList; import java.util.List; import javax.xml.bind.annotation.XmlRootElement; import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter; @XmlRootElement public class Configuration { private List<Options> section = new ArrayList<Options>(); @XmlJavaTypeAdapter(OptionsAdapter.class) public List<Options> getSection() { return section; } public void setSection(List<Options> section) { this.section = section; } }\n\nThe XmlAdapter will look something like this:\n\nimport javax.xml.bind.annotation.adapters.XmlAdapter; public class OptionsAdapter extends XmlAdapter<AdaptedOptions, Options> { @Override public Options unmarshal(AdaptedOptions v) throws Exception { if(""default_options"".equals(v.name)) { DefaultOptions options = new DefaultOptions(); options.setName(v.getName()); options.setDefaultPort(Integer.valueOf(v.map.get(""default_port""))); options.setLogLevel(v.map.get(""log_level"")); return options; } else { CustomOptions options = new CustomOptions(); options.setName(v.getName()); options.setCompatibility(v.map.get(""compatibility"")); options.setMemory(v.map.get(""memory"")); return options; } } @Override public AdaptedOptions marshal(Options v) throws Exception { AdaptedOptions adaptedOptions = new AdaptedOptions(); adaptedOptions.setName(v.getName()); if(DefaultOptions.class == v.getClass()) { DefaultOptions options = (DefaultOptions) v; adaptedOptions.map.put(""default_port"", String.valueOf(options.getDefaultPort())); adaptedOptions.map.put(""log_level"", options.getLogLevel()); } else { CustomOptions options = (CustomOptions) v; adaptedOptions.map.put(""compatibility"", options.getCompatibility()); adaptedOptions.map.put(""memory"", options.getMemory()); } return adaptedOptions; } }\n\nAdaptedOptions looks like:\n\nimport java.util.ArrayList; import java.util.HashMap; import java.util.List; import java.util.Map; import java.util.Map.Entry; import javax.xml.bind.Marshaller; import javax.xml.bind.Unmarshaller; import javax.xml.bind.annotation.XmlAttribute; import javax.xml.bind.annotation.XmlElement; import javax.xml.bind.annotation.XmlValue; public class AdaptedOptions extends Options { @XmlAttribute String name; @XmlElement List<Value> value = new ArrayList<Value>(); Map<String, String> map = new HashMap<String, String>(); public void beforeMarshal(Marshaller marshaller) { for(Entry<String, String> entry : map.entrySet()) { Value aValue = new Value(); aValue.name = entry.getKey(); aValue.value = entry.getValue(); value.add(aValue); } } public void afterUnmarshal(Unmarshaller unmarshaller, Object parent) { for(Value aValue : value) { map.put(aValue.name, aValue.value); } } private static class Value { @XmlAttribute String name; @XmlValue String value; } }\n\nYou may create a separate classes to represent structure of your XML:\n\npublic class Section { @XmlAttribute public String name; @XmlElement(name = ""value"") public List<Value> values; } public class Value { @XmlAttribute public String name; @XmlValue public String value; }\n\nand then use an XmlAdapter to perform conversion:\n\npublic class OptionsAdapter extends XmlAdapter<Section, Options> { public Options unmarshal(Section s) { if (""default_options"".equals(s.name)) { ... } else if (...) { ...""""""']",0.333333333,0.264705882
lang,Object,Inserting Java Object to MongoDB Collection Using Java,['<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>Both of these interfaces allow for different behavior.\nComparable allows you to make the object act like you just described Strings (in fact  String implements Comparable).\nThe second  Comparator  allows you to do what you are asking to do.\nIf the objects in the ArrayList implement comparable  you can instead do something like this:</p>\n<p>The <a href= http://java.sun.com/javase/6/docs/api/java/util/Collections.html  rel= noreferrer >Collections</a> class contains a number of these useful  common tools.</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>\n<p>Since technologies appear everyday  the answer will change in the time.\n<p>Of course  having this kind of beauty impacts in the performance (an average of 2 times)  but can you find a more readable code?</p>\nFortunately  the actual code is much simpler and shorter than this description.</p>\n<p>If you want to sort for alphabet that contains non English characters you can use Locale...'],"['You can convert your java object into json string using the gson library and then insert it in mongodb.\n\nEg:\n\nGson gson = new Gson();\nString json = gson.toJson(Employee);    \nBasicDBObject basicDBObject = new BasicDBObject(""Name"", json );          \nDBCollection dbCollection = db.getCollection(""NameColl"");          \ndbCollection.save(basicDBObject);    ']","['""""""Inserting Java Object to MongoDB Collection Using Java\n\nI am trying to insert a whole Java object into a MongoDB Collection using Java. I am getting following error:\n\nException in thread ""main"" java.lang.IllegalArgumentException: can\'t serialize class net.yogesh.test.Employee at org.bson.BSONEncoder._putObjectField(BSONEncoder.java:185) at org.bson.BSONEncoder.putObject(BSONEncoder.java:119) at org.bson.BSONEncoder.putObject(BSONEncoder.java:65) at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:176) at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:134) at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:129) at com.mongodb.DBCollection.save(DBCollection.java:418) at net.yogesh.test.test.main(test.java:31)\n\nEmplyoee.java (POJO)\n\npackage net.yogesh.test; import java.io.Serializable; public class Employee implements Serializable { private static final long serialVersionUID = 1L; private long no; private String name; public Employee() { } public long getNo() { return no; } public void setNo(long no) { this.no = no; } public String getName() { return name; } public void setName(String name) { this.name = name; } }\n\nMain Method Class (test.java)\n\npackage net.yogesh.test; import java.net.UnknownHostException; import com.mongodb.BasicDBObject; import com.mongodb.DB; import com.mongodb.DBCollection; import com.mongodb.Mongo; import com.mongodb.MongoException; public class test { public static void main(String[] args) throws UnknownHostException, MongoException { Mongo mongo = new Mongo(""localhost"", 27017); DB db = mongo.getDB(""test""); Employee employee = new Employee(); employee.setNo(1L); employee.setName(""yogesh""); BasicDBObject basicDBObject = new BasicDBObject(""Name"", employee); DBCollection dbCollection = db.getCollection(""NameColl""); dbCollection.save(basicDBObject); } }\n\nCan anybody explain why I am getting this error? Yogesh PrajapatiYogesh Prajapati\n\n4,3\n\nMay be you can use some specialized Object Document Mapping framework API like Moprphia\n\n\n\nextands ReflectionDBObject like suggested by this stackoverflow.com/questions/12250969/…\n\n\n\nIn order to map it to DBObject, do NOT extend at all! It\'s against Object Oriented principles and is considered to be a bad smell. Instead, use a method in POJO to map it as I described: stackoverflow.com/a/46088053/387048\n\n\n\nI\'m a little confused as to know why you\'d think this would work in the first place. The first thing you need to know is how to map your POJO to a MongoDB document. Currently, you\'re not telling the system(your code) how to do that. You can either use a mapping library for this (Morphia comes to mind) or use ReflectionDBObject. Either solution allows you to map POJO to MongoDB document or MongoDB document to POJO(the former way is a lot more nicely than the latter). 1,Remon van VlietRemon van Vliet\n\n1\n\nWhy would you chose to use a third party library when mongo drivers support POJO\'s natively? mongodb.github.io/mongo-java-driver/3.5/driver/getting-started/…\n\n\n\nDB db = mongoClient.getDB( ""mydb"" ); coll = db.getCollection(""testCollection""); Employee emp = new Employee(); emp.setId(""1001""); emp.setName(""John Doe""); //Converting a custom Class(Employee) to BasicDBObject Gson gson = new Gson(); BasicDBObject obj = (BasicDBObject)JSON.parse(gson.toJson(emp)); coll.insert(obj); findEmployee(new BasicDBObject(""id"",""1001"")); public static void findEmployee(BasicDBObject query){ DBCursor cursor = coll.find(query); try { while(cursor.hasNext()) { DBObject dbobj = cursor.next(); //Converting BasicDBObject to a custom Class(Employee) Employee emp = (new Gson()).fromJson(dbobj.toString(), Employee.class); System.out.println(emp.getName()); } } finally { cursor.close(); } }\n\nI thought that it would be useful to post code that did conversions both ways. Storing an Employee Object Finding and re-creating an employee Object Hope this is useful.. user1456599user1456599\n\n2\n\nThis is perfect. Only this solution worked for me without any library! Thanks!!""""""']",0.333333333,1
lang,Object,Java - getting max value from an arraylist of Objects?,['<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>Both of these interfaces allow for different behavior.\nComparable allows you to make the object act like you just described Strings (in fact  String implements Comparable).\nThe second  Comparator  allows you to do what you are asking to do.\nIf the objects in the ArrayList implement comparable  you can instead do something like this:</p>\n<p>The <a href= http://java.sun.com/javase/6/docs/api/java/util/Collections.html  rel= noreferrer >Collections</a> class contains a number of these useful  common tools.</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>\n<p>Since technologies appear everyday  the answer will change in the time.\n<p>Of course  having this kind of beauty impacts in the performance (an average of 2 times)  but can you find a more readable code?</p>\nFortunately  the actual code is much simpler and shorter than this description.</p>\n<p>If you want to sort for alphabet that contains non English characters you can use Locale...'],"['You can use Java 8 Streams :\n\nArrayList<ArrayList<String>> allChains = new ArrayList<>();\nallChains.add (new ArrayList<String>(Arrays.asList (""apple"", ""b"", ""c"")));\nallChains.add (new ArrayList<String>(Arrays.asList (""a"")));\nallChains.add (new ArrayList<String>(Arrays.asList (""a"",""b"",""c"",""d"")));\n\nArrayList<String> longest = allChains.stream()\n                                     .max(Comparator.comparingInt(ArrayList::size))\n                                     .get();\n\nSystem.out.println (longest);\nOutput:\n\n[a, b, c, d]']","['"""""" How to get maximum value from the Collection (for example ArrayList)? There is an ArrayList which stores integer values. I need to find the maximum value in this list. E.g. suppose the arrayList stored values are : 10, 20, 30, 40, 50 and the max value would be 50. What is the efficient way to find the maximum value? @Edit : I just found one solution for which I am not very sure\n\nArrayList<Integer> arrayList = new ArrayList<Integer>(); arrayList.add(100); /* add(200), add(250) add(350) add(150) add(450)*/ Integer i = Collections.max(arrayList)\n\nand this returns the highest value. Another way to compare the each value e.g. selection sort or binary sort algorithm \n\n1,user1010399user1010399\n\n2,5\n\nHave you attempted to find the value? Where did you get stuck?""""""']",0.6,0.230769231
lang,String,Finding Largest String in ArrayList,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\n<p>Then just add those numbers to the integer representation of the character <code>`</code>\n<p>When <code>java.util.Random</code> is instantiated with a specific seed parameter (in this case <code>-229985452</code> or <code>-147909649</code>)  it follows the random number generation algorithm <em>beginning</em>\n<p>Everyone here did a great job of explaining how the code works and showing how you can construct your own examples  but here s an information theoretical answer showing why we can reasonably expect a solution to exist that the brute force search will eventually find.</p> <p>\nTo allow generating words of different lengths  we further add a terminator symbol <code>‚Äö√§‚Ä¢</code> to yield an extended alphabet <code>≈í¬£  := ≈í¬£ ‚Äö√†‚Ñ¢ {‚Äö√§‚Ä¢}</code>.</p> <p>Let <code>≈í¬±</code> be a symbol and X a uniformly distributed random variable over <code>≈í¬£ </code>.\nSince the Pseudorandom Number Generator (PRNG) is initialized with a 32-bit seed  we can expect most words of length up to</p> <blockquote> <p>≈í¬™ = floor[32/log‚Äö√á√á(27)] - 1 = 5</p> </blockquote> <p>to be generated by at least one seed.\nEven if we were to search for a 6-character word  we would still be successful about 41.06% of the time.\n<p>Most random number generators are  in fact   pseudo random. \n<p>LCGs are quite predictable given a fixed seed.\nBasically  use a seed that gives you your first letter  then write an app that continues to generate the next int (char) until you hit the next letter in your target string and write down how many times you had to invoke the LCG.\n<p>As multi-threading is very easy with Java  here is a variant that searches for a seed using all cores available: <a href= http://ideone.com/ROhmTA  rel= noreferrer >http://ideone.com/ROhmTA</a></p>\n<p>To get different sequences  it s necessary initialize the sequence in some position  called  seed .</p>\n<p>The randomSting get the random number in the i position (seed = -229985452) of the  random  sequence.\n<p>The principal is the Random Class constructed with the same seed will generate the same pattern of numbers every time.</p>'],"['Please try these code . Here i am trying with get() to access the ArrayList elements, which is working correctly.\n\nimport java.util.Scanner;                  \nimport java.util.ArrayList;\n\nclass ArraylistString\n{\n    public static void main(String args[])\n    {\n        ArrayList<String> Str = new ArrayList<String>();\n        Str.add(""Jim Bob"");\n        Str.add(""Bobby Jones"");\n        Str.add(""Rob Stiles"");\n        int largestString = Str.get(0).length();\n        int index = 0;\n\n        for(int i = 0; i < Str.size(); i++)\n        {\n            if(Str.get(i).length() > largestString)\n            {\n                largestString = Str.get(i).length();\n                                index = i;\n            }\n        }\n        System.out.println(""Index "" + index + "" ""+ Str.get(index) + "" "" + ""is the largest and is size "" + largestString);  \n\n    }\n\n}']","['""""""Finding Largest String in ArrayList\n\n// Im trying to find the largest String in my ArrayList and print it out and also to include what index the largest element resides at and to print that to screen too. Im just wondering where Im going wrong. import java.util.Scanner; import java.util.ArrayList; public class ArraylistString { public static void main(String [] args) { // Instance of Scanner class Scanner keyboardIn = new Scanner(System.in); // Declare an array list of Strings ArrayList<String> Str = new ArrayList<>(); // Add names to ArrayList Str.add(""Jim Bob""); Str.add(""Bobby Jones""); Str.add(""Rob Stiles""); int largestString = Str.size(); int index = 0; // Use for loop to print out elements from ArrayList for(int i = 0; i < Str.size(); i++) { // Test which String is the largest if(Str[i].size() > largestString) { largestString = Str[i].size(); index = i; } } // Output largest String and index it was found at System.out.println(""Index "" + index + "" ""+ Str[index] + "" "" + ""is the largest and is size "" + largestString); } }\n\nuser4536519user4536519\n\nYou could start by identifying how your program is misbehaving. – Scott Hunter Sep 15, 2015 at 19:17\n\nthink what initial value should largestString have if you are trying to maximize it. What do you mean by ""largest string""? – Scott Hunter Sep 15, 2015 at 19:19\n\nThis wouldn\'t compile at all. Str[i] is not a proper way to access a List. You can also use java.util.Collections.max or the Stream version:\n\nString max = Collections.max(strings, Comparator.comparing(String::length)); // or s -> s.length()\n\nString max = strings.stream().max(comparing(String::length)).get();\n\nString max = Collections.max(Str, new Comparator<String>() { @Override public int compare(String o1, String o2) { return o1.length() - o2.length(); } });\n\nSystem.out.println(""Index "" + arr.indexOf(max) + "" "" + max + "" "" + ""is the largest and is size "" + max.length());\n\nJohnny WillerJohnny Willer\n\n3,1\n\nThanks! Worked like a charm. Only one limitation with the logic is if there is more than one string having max length for example ""abcd"" and ""abca"" then too it will return only one result. Please try these code . Here i am trying with get() to access the ArrayList elements, which is working correctly. import java.util.Scanner; import java.util.ArrayList; class ArraylistString { public static void main(String args[]) { ArrayList<String> Str = new ArrayList<String>(); Str.add(""Jim Bob""); Str.add(""Bobby Jones""); Str.add(""Rob Stiles""); int largestString = Str.get(0).length(); int index = 0; for(int i = 0; i < Str.size(); i++) { if(Str.get(i).length() > largestString) { largestString = Str.get(i).length(); index = i; } } System.out.println(""Index "" + index + "" ""+ Str.get(index) + "" "" + ""is the largest and is size "" + largestString); } }\n\nABHISHEK RANAABHISHEK RANA\n\n0\n\nYou have the correct idea, but wrong syntax. In Java, only arrays support the [] syntax. An ArrayList isn\'t an array, it\'s a class that implements the List interface, and you should use the get method to access its members. Similarly, a String doesn\'t have a size() method, it has a length() method. I would set your largestString variable to your first String that you add:\n\nint largestString = Str.get(0).length();\n\nThen you should use the following to check for the largest String:\n\nif(Str.get(i).length() > largestString) { largestString = Str.get(i).length(); index = i; }\n\nYou cannot index into an ArrayList with [] as you were trying to do. I would also suggest better variable names.""""""', '""""""If I saw Str as a variable I would think it was a String. Maybe try strList or something like that. Evan LaHurdEvan LaHurd\n\nFrom Java-8 and onwards:\n\nList<Integer> numList = Arrays.stream(Str).map(String::length).collect(Collectors.toList()); Integer m = numList.stream().mapToInt(i->i).max().orElse(4000); //get strings with their length int k = numList.indexOf(m); //index of String with Maximum Length System.out.println(Str.get(k)); //get your longest string\n\nVishwa RatnaVishwa Ratna\n\n5,Optional<String> op = Str.stream().sorted((e1,e2)-> e1.length() > e2.length() ? -1 :1).findFirst();\n\nWhile this code may solve the question, including an explanation of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes.""""""']",0.208333333,0.035714286
lang,String,Strings written to file do not preserve line breaks,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\n<p>Then just add those numbers to the integer representation of the character <code>`</code>\n<p>When <code>java.util.Random</code> is instantiated with a specific seed parameter (in this case <code>-229985452</code> or <code>-147909649</code>)  it follows the random number generation algorithm <em>beginning</em>\n<p>Everyone here did a great job of explaining how the code works and showing how you can construct your own examples  but here s an information theoretical answer showing why we can reasonably expect a solution to exist that the brute force search will eventually find.</p> <p>\nTo allow generating words of different lengths  we further add a terminator symbol <code>‚Äö√§‚Ä¢</code> to yield an extended alphabet <code>≈í¬£  := ≈í¬£ ‚Äö√†‚Ñ¢ {‚Äö√§‚Ä¢}</code>.</p> <p>Let <code>≈í¬±</code> be a symbol and X a uniformly distributed random variable over <code>≈í¬£ </code>.\nSince the Pseudorandom Number Generator (PRNG) is initialized with a 32-bit seed  we can expect most words of length up to</p> <blockquote> <p>≈í¬™ = floor[32/log‚Äö√á√á(27)] - 1 = 5</p> </blockquote> <p>to be generated by at least one seed.\nEven if we were to search for a 6-character word  we would still be successful about 41.06% of the time.\n<p>Most random number generators are  in fact   pseudo random. \n<p>LCGs are quite predictable given a fixed seed.\nBasically  use a seed that gives you your first letter  then write an app that continues to generate the next int (char) until you hit the next letter in your target string and write down how many times you had to invoke the LCG.\n<p>As multi-threading is very easy with Java  here is a variant that searches for a seed using all cores available: <a href= http://ideone.com/ROhmTA  rel= noreferrer >http://ideone.com/ROhmTA</a></p>\n<p>To get different sequences  it s necessary initialize the sequence in some position  called  seed .</p>\n<p>The randomSting get the random number in the i position (seed = -229985452) of the  random  sequence.\n<p>The principal is the Random Class constructed with the same seed will generate the same pattern of numbers every time.</p>'],"['When you use readline() the line breaks are removed. You have to re-insert them with\n\nsb = sb.append(line).append(""\\n"");']","['""""""Strings written to file do not preserve line breaks\n\nI am trying to write a String(lengthy but wrapped), which is from JTextArea. When the string printed to console, formatting is same as it was in Text Area, but when I write them to file using BufferedWriter, it is writing that String in single line. Following snippet can reproduce it:\n\npublic class BufferedWriterTest { public static void main(String[] args) throws IOException { String string = ""This is lengthy string that contains many words. So\\nI am wrapping it.""; System.out.println(string); File file = new File(""C:/Users/User/Desktop/text.txt""); FileWriter fileWriter = new FileWriter(file); BufferedWriter bufferedWriter = new BufferedWriter(fileWriter); bufferedWriter.write(string); bufferedWriter.close(); } }\n\nWhat went wrong? How to resolve this?""""""', '"""""":(\n\nThere may be better ways that than, but it sounds like that solution would work for you. – nicholas.hauschild Feb 8, 2012 at 19:03\n\nIf you wish to keep the carriage return characters from a Java string into a file. Just replace each break line character (which is recognized in java as: \\n) as per the following statement:\n\nTempHtml = TempHtml.replaceAll(""\\n"", ""\\r\\n"");\n\nHere is an code example,\n\n// When Execute button is pressed String TempHtml = textArea.getText(); TempHtml = TempHtml.replaceAll(""\\n"", ""\\r\\n""); try (PrintStream out = new PrintStream(new FileOutputStream(""C:/Temp/temp.html""))) { out.print(TempHtml); } catch (FileNotFoundException e) { // TODO Auto-generated catch block e.printStackTrace(); } System.out.println(TempHtml);\n\nSupercoderSupercoder\n\n1,If you are using a BufferedWriter, you could also use the .newline() method to re-add the newline based on your platform. See this related question: Strings written to file do not preserve line breaks\n\nChristian VielmaChristian Vielma\n\n""""""']",0.208333333,0.5
lang,String,Converting an int to a binary string representation in Java?,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\n<p>Then just add those numbers to the integer representation of the character <code>`</code>\n<p>When <code>java.util.Random</code> is instantiated with a specific seed parameter (in this case <code>-229985452</code> or <code>-147909649</code>)  it follows the random number generation algorithm <em>beginning</em>\n<p>Everyone here did a great job of explaining how the code works and showing how you can construct your own examples  but here s an information theoretical answer showing why we can reasonably expect a solution to exist that the brute force search will eventually find.</p> <p>\nTo allow generating words of different lengths  we further add a terminator symbol <code>‚Äö√§‚Ä¢</code> to yield an extended alphabet <code>≈í¬£  := ≈í¬£ ‚Äö√†‚Ñ¢ {‚Äö√§‚Ä¢}</code>.</p> <p>Let <code>≈í¬±</code> be a symbol and X a uniformly distributed random variable over <code>≈í¬£ </code>.\nSince the Pseudorandom Number Generator (PRNG) is initialized with a 32-bit seed  we can expect most words of length up to</p> <blockquote> <p>≈í¬™ = floor[32/log‚Äö√á√á(27)] - 1 = 5</p> </blockquote> <p>to be generated by at least one seed.\nEven if we were to search for a 6-character word  we would still be successful about 41.06% of the time.\n<p>Most random number generators are  in fact   pseudo random. \n<p>LCGs are quite predictable given a fixed seed.\nBasically  use a seed that gives you your first letter  then write an app that continues to generate the next int (char) until you hit the next letter in your target string and write down how many times you had to invoke the LCG.\n<p>As multi-threading is very easy with Java  here is a variant that searches for a seed using all cores available: <a href= http://ideone.com/ROhmTA  rel= noreferrer >http://ideone.com/ROhmTA</a></p>\n<p>To get different sequences  it s necessary initialize the sequence in some position  called  seed .</p>\n<p>The randomSting get the random number in the i position (seed = -229985452) of the  random  sequence.\n<p>The principal is the Random Class constructed with the same seed will generate the same pattern of numbers every time.</p>'],"['Convert Integer to Binary:\n\nimport java.util.Scanner;\n\npublic class IntegerToBinary {\n\n    public static void main(String[] args) {\n\n        Scanner input = new Scanner( System.in );\n\n        System.out.println(""Enter Integer: "");\n        String integerString =input.nextLine();\n\n        System.out.println(""Binary Number: ""+Integer.toBinaryString(Integer.parseInt(integerString)));\n    }\n\n}\nOutput:\n\nEnter Integer:\n\n10\n\nBinary Number: 1010']","['""""""Converting an int to a binary string representation in Java? What would be the best way (ideally, simplest) to convert an int to a binary string representation in Java? For example, say the int is 156. The binary string representation of this would be ""10011100"". 7,Tyler TreatTyler Treat\n\nInteger.toBinaryString(int i)\n\n3\n\n@Jack is there a way to get the binary string in a fixed number of bits like, decimal 8 in 8bit binary which 00001000\n\n\n\n@KasunSiyambalapitiya you could use StringUtils.leftPad from apache commons. Or you could do something like this to get the preceding zeroes: String.format(""%8s"", Integer.toBinaryString(i)).replace(\' \', \'0\')\n\n\n\nThere is also the java.lang.Integer.toString(int i, int base) method, which would be more appropriate if your code might one day handle bases other than 2 (binary). Keep in mind that this method only gives you an unsigned representation of the integer i, and if it is negative, it will tack on a negative sign at the front. It won\'t use two\'s complement. 4,0\n\npublic static string intToBinary(int n) { String s = """"; while (n > 0) { s = ( (n % 2 ) == 0 ? ""0"" : ""1"") +s; n = n / 2; } return s; }\n\nAriel BadillaAriel Badilla\n\n1\n\nThis code will not work with negative integers\n\n\n\nOne more way- By using java.lang.Integer you can get string representation of the first argument i in the radix (Octal - 8, Hex - 16, Binary - 2) specified by the second argument. Integer.toString(i, radix)\n\nprivate void getStrtingRadix() { // TODO Auto-generated method stub /* returns the string representation of the unsigned integer in concern radix*/ System.out.println(""Binary eqivalent of 100 = "" + Integer.toString(100, 2)); System.out.println(""Octal eqivalent of 100 = "" + Integer.toString(100, 8)); System.out.println(""Decimal eqivalent of 100 = "" + Integer.toString(100, 10)); System.out.println(""Hexadecimal eqivalent of 100 = "" + Integer.toString(100, 16)); }\n\nBinary eqivalent of 100 = 1100100 Octal eqivalent of 100 = 144 Decimal eqivalent of 100 = 100 Hexadecimal eqivalent of 100 = 64\n\nRupesh YadavRupesh Yadav\n\npublic class Main { public static String toBinary(int n, int l ) throws Exception { double pow = Math.pow(2, l); StringBuilder binary = new StringBuilder(); if ( pow < n ) { throw new Exception(""The length must be big from number ""); } int shift = l- 1; for (; shift >= 0 ; shift--) { int bit = (n >> shift) & 1; if (bit == 1) { binary.append(""1""); } else { binary.append(""0""); } } return binary.toString(); } public static void main(String[] args) throws Exception { System.out.println("" binary = "" + toBinary(7, 4)); System.out.println("" binary = "" + Integer.toString(7,2)); } }\n\nArtavazd ManukyanArtavazd Manukyan\n\n2\n\nResults binary = 0111 binary = 111\n\n\n\nString hexString = String.format(""%2s"", Integer.toHexString(h)).replace(\' \', \'0\');\n\n\n\nThis is something I wrote a few minutes ago just messing around. Hope it helps! public class Main { public static void main(String[] args) { ArrayList<Integer> powers = new ArrayList<Integer>(); ArrayList<Integer> binaryStore = new ArrayList<Integer>(); powers.add(128); powers.add(64); powers.add(32); powers.add(16); powers.add(8); powers.add(4); powers.add(2); powers.add(1); Scanner sc = new Scanner(System.in); System.out.println(""Welcome to Paden9000 binary converter. Please enter an integer you wish to convert: ""); int input = sc.nextInt(); int printableInput = input; for (int i : powers) { if (input < i) { binaryStore.add(0); } else { input = input - i; binaryStore.add(1); } } String newString= binaryStore.toString(); String finalOutput = newString.replace(""["", """") .replace("" "", """") .replace(""]"", """") .replace("","", """"); System.out.println(""Integer value: "" + printableInput + ""\\nBinary value: "" + finalOutput); sc.close(); }\n\nConvert Integer to Binary:\n\nimport java.util.Scanner; public class IntegerToBinary { public static void main(String[] args) { Scanner input = new Scanner( System.in ); System.out.println(""Enter Integer: ""); String integerString =input.nextLine(); System.out.println(""Binary Number: ""+Integer.toBinaryString(Integer.parseInt(integerString))); } }\n\n1\n\nExcessive promotion of a specific product/resource (that I removed here) may be perceived by the community as spam. Take a look at the help center, specially What kind of behavior is expected of users?\'s last section: Avoid overt self-promotion.""""""']",0.208333333,0.071428571
lang,String,How to convert binary string value to decimal,['Ways to convert an InputStream to a String:</strong></p> <ol> <li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p> <pre><code>\nApache Commons</a> <code><a href= https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html  rel= noreferrer >IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>...\nhttp://download.oracle.com/javase/8/docs/api/java/util/Scanner.html  rel= noreferrer >Scanner</a> iterates over tokens in the stream  and in this case we separate tokens using  beginning of the input boundary  (\\A)  thus giving us only one token for the entire contents of the stream.</p>\nThe trick here is that we work in blocks  and as such don t need other buffering streams.\nThe block size is parameterized for run-time performance optimization.</p>\n<p>Then just add those numbers to the integer representation of the character <code>`</code>\n<p>When <code>java.util.Random</code> is instantiated with a specific seed parameter (in this case <code>-229985452</code> or <code>-147909649</code>)  it follows the random number generation algorithm <em>beginning</em>\n<p>Everyone here did a great job of explaining how the code works and showing how you can construct your own examples  but here s an information theoretical answer showing why we can reasonably expect a solution to exist that the brute force search will eventually find.</p> <p>\nTo allow generating words of different lengths  we further add a terminator symbol <code>‚Äö√§‚Ä¢</code> to yield an extended alphabet <code>≈í¬£  := ≈í¬£ ‚Äö√†‚Ñ¢ {‚Äö√§‚Ä¢}</code>.</p> <p>Let <code>≈í¬±</code> be a symbol and X a uniformly distributed random variable over <code>≈í¬£ </code>.\nSince the Pseudorandom Number Generator (PRNG) is initialized with a 32-bit seed  we can expect most words of length up to</p> <blockquote> <p>≈í¬™ = floor[32/log‚Äö√á√á(27)] - 1 = 5</p> </blockquote> <p>to be generated by at least one seed.\nEven if we were to search for a 6-character word  we would still be successful about 41.06% of the time.\n<p>Most random number generators are  in fact   pseudo random. \n<p>LCGs are quite predictable given a fixed seed.\nBasically  use a seed that gives you your first letter  then write an app that continues to generate the next int (char) until you hit the next letter in your target string and write down how many times you had to invoke the LCG.\n<p>As multi-threading is very easy with Java  here is a variant that searches for a seed using all cores available: <a href= http://ideone.com/ROhmTA  rel= noreferrer >http://ideone.com/ROhmTA</a></p>\n<p>To get different sequences  it s necessary initialize the sequence in some position  called  seed .</p>\n<p>The randomSting get the random number in the i position (seed = -229985452) of the  random  sequence.\n<p>The principal is the Random Class constructed with the same seed will generate the same pattern of numbers every time.</p>'],"['Use Integer.parseInt (see javadoc), that converts your String to int using base two:\n\nint decimalValue = Integer.parseInt(c, 2);']","['""""""How to convert binary string value to decimal\n\nHow to convert a binary String such as\n\nString c = ""110010""; // as binary\n\nto the value in decimal in Java? (expected result in the example is 50)\n\n1\n\nplease refrain from posting questions that you have not tried to solve yourself. How to Ask\n\nUse Integer.parseInt (see javadoc), that converts your String to int using base two:\n\nint decimalValue = Integer.parseInt(c, 2);\n\n1\n\nwhat if the value of c is too long ? public static int integerfrmbinary(String str){ double j=0; for(int i=0;i<str.length();i++){ if(str.charAt(i)== \'1\'){ j=j+ Math.pow(2,str.length()-1-i); } } return (int) j; }\n\nThis piece of code I have written manually. You can also use parseInt as mentioned above . This function will give decimal value corresponding to the binary string :)\n\nSumeet R SharmaSumeet R Sharma\n\nI think you are looking for Integer.parseInt. The second argument takes a radix, which in this case is 2. Integer.parseInt(c, 2)\n\n0\n\nint i = Integer.parseInt(c, 2);\n\nint num = Integer.parseInt(""binaryString"",2);\n\nuser4058730user4058730\n\nThis solution was provided multiple times, years before this answer was posted. public static Long binToDec(String bin) { long dec = 0L; long pow = 1L; for (int i = (bin.length() - 1); i >= 0; i--) { char c = bin.charAt(i); dec = dec + (Long.parseLong(c + """") * pow); pow = pow * 2; } return dec; }\n\nlong num = Long.parseLong(""101110111"",2);\n\nHave to think about the decimal precision, so you must to limit the bitstring length. Anyway, using BigDecimal is a good choice. public BigDecimal bitStringToBigDecimal(String bitStr){ BigDecimal sum = new BigDecimal(""0""); BigDecimal base = new BigDecimal(2); BigDecimal temp; for(int i=0;i<bitStr.length();i++){ if(bitStr.charAt(i)== \'1\'){ int exponent= bitStr.length()-1-i; temp=base.pow(exponent); sum=sum.add(temp); } } return sum; }\n\n9,1\n\nyou can test by:str=""10000101001001000010111100100110000000000000000000001010111101"";\n\n– json.wei Jul 6, 2017 at 1:09\n\ntest this, you\'ll find out that there is a line in the code which contains Scan.S() .This is used only for stocking data (String). So just try this:\n\nPS:Don\'t forget to save the file as bindec\n\nimport java.io.*; class Scan { public static String S() { String x; char c; boolean erreur; do { x = """"; erreur = false; try { while((c = (char)System.in.read()) != \'\\n\') { if (c != \'\\r\') { x += c; } } } catch(IOException e) { System.out.print("" > enter String : ""); erreur = true; } } while(erreur); return x; } public class bindec{ public static void main (String[] args) { int b=0; String a; System.out.println(""bin: ""); a = Lire.S(); int j=a.length()-1; for(int i=0;i<a.length() ;i++ ){ if(a.charAt(i)==\'1\'){ b += Math.pow(2,j); } if(a.charAt(i)==\'0\'){ b+=0; } j=j-1; } System.out.println(""dec: ""+b); } }\n\nMouad AbriniMouad Abrini\n\nAccording to this : we can write this help function :\n\npublic static int convertBinaryToDecimal(String str) { int result = 0; for (int i = 0; i < str.length(); i++) { int value = Character.getNumericValue(str.charAt(i)); result = result * 2 + value; } return result; }\n\n4,it has a binary string of 1011001011110110000010101\n\neasiest way is to put all copies of the base needed on the left, which should always be string length - 1 (assuming not leading edge zeros), put and all the coefficients on the right :\n\necho \'1011001011110110000010101\' |\n\nmawk \'function __(_) { print; gsub(/./, ""2*("", _) return substr(_, 4) } $!_ = __($_) $!_\' FS= OFS=\')+\' | gtee >( gcat -b | lgp3 >&2; ) | bc\n\n23456789 1011001011110110000010101\n\n2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*( +1)+0)+1)+1)+0)+0)+1)+0)+1)+1)+1)+1)+0)+1)+1)+0)+0)+0)+0)+0)+1)+0)+1)+0)+1 2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*( 1) )+1)+1) ) )+1) )+1)+1)+1)+1) )+1)+1) ) ) ) ) )+1) )+1) )+1 2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*( 2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(2*(1) )+1)+1)))+1))+1)+1)+1)+1) )+1)+1) ))) ))+1) )+1) )+1\n\nversus the standard form, which is succinct only for base-2, and more helpful for polynomials than for bit-string/vector conversion :\n\n2^24 + 2^22 + 2^21 + 2^18 + 2^16 + 2^15 + 2^14 + 2^13 + 2^11 + 2^10 + 2^4 + 2^2 1*2^24 + 0*2^23 + 1*2^22 + 1*2^21 + 0*2^20 + 0*2^19 + 1*2^18 + 0*2^17 + 1*2^16 + 1*2^15 + 1*2^14 + 1*2^13 + 0*2^12 + 1*2^11 + 1*2^10 + 0*2^ 9 + 0*2^ 8 + 0*2^ 7 + 0*2^ 6 + 0*2^ 5 + 1*2^ 4 + 0*2^ 3 + 1*2^ 2 + 0*2 + 1\n\nDigits are always kept adjacent to one another, in big-endian notation, without the base and exponent getting in the way\n\nIt completely eliminated the power operator ^ from the chain of operations by using nested layers of the base supporting one another instead. Count up # of 2*s (i.e.""""""', '""""""(1 << 1)) to get floor of log2(x)\n\nSimilarly, count up # of 10*s (i.e. ((1 << 3) + (1 << 1)) in the decimal version to get floor of log10(x)\n\nFor each of the 1 bits, the power of 2 exponent associated with it would be just # of closing parenthesis ) to its right\n\nThe decimal equivalent of this structure is shown below. If anything, the condensed gapless form of the notation increases readability due to close proximity of digits with one another. 10*(10*(10*(10*(10*(10*(10*( 2)+ 3)+ 4)+ 5)+ 6)+ 7)+ 8)+ 9 10*(10*(10*(10*(10*(10*(10*(2)+3)+4)+5)+6)+7)+8)+9\n\nBut instead of using the minimum of 7 copies of 10 and 8 coefficient digits for a total of 15 numbers, the standard form needs 21 numbers for including superfluous exponents that could be easily derived just by counting layers in nested form. 2*10^7 + 3*10^6 + 4*10^5 + 5*10^4 + 6*10^3 + 7*10^2 + 8*10 + 9 2*10^7 + 3*10^6 + 4*10^5 + 5*10^4 + 6*10^3 + 7*10^2 + 8*10 + 9\n\nThe clutter in its gapless form…\n\n2*10^7+3*10^6+4*10^5+5*10^4+6*10^3+7*10^2+8*10+9\n\nOnce you see numbers in any base in this nested form instead of standard notation, then base-conversion becomes a trivial exercise of nothing more than peeling back the nested layers. RARE Kpop ManifestoRARE Kpop Manifesto\n\n2,public static void convertStringToDecimal(String binary) { int decimal=0; int power=0; while(binary.length()>0) { int temp = Integer.parseInt(binary.charAt((binary.length())-1)+""""); decimal+=temp*Math.pow(2, power++); binary=binary.substring(0,binary.length()-1); } System.out.println(decimal); }\n\nimport java.util.Scanner; public class BinaryToDecimal{ public static void main(String[] args) { Scanner input = new Scanner(System.in); int binaryNumber = 0; int counter = 0; int number = 0; System.out.print(""Input binary number: ""); binaryNumber = input.nextInt(); //it\'s going to stop when the binaryNumber/10 is less than 0 //example: //binaryNumber = 11/10. The result value is 1 when you do the next //operation 1/10 . The result value is 0 while(binaryNumber != 0) { //Obtaining the remainder of the division and multiplying it //with the number raised to two //adding it up with the previous result number += ((binaryNumber % 10)) * Math.pow(2,counter); binaryNumber /= 10; //removing one digit from the binary number //Increasing counter 2^0, 2^1, 2^2, 2^3..... counter++; } System.out.println(""Decimal number : "" + number); }\n\nVictor FernándezVictor Fernández\n\nprivate static int convertBinaryToDecimal(String strOfBinary){ int flag = 1, binary=0; char binaryOne = \'1\'; char[] charArray = strOfBinary.toCharArray(); for(int i=charArray.length-1;i>=0;i--){ if(charArray[i] == binaryOne){ binary+=flag; } flag*=2; } return binary; }\n\n1,public static void main(String[] args) { java.util.Scanner scan = new java.util.Scanner(System.in); long decimalValue = 0; System.out.println(""Please enter a positive binary number.(Only 1s and 0s)""); //This reads the input as a String and splits each symbol into //array list String element = scan.nextLine(); String[] array = element.split(""""); //This assigns the length to integer arrys based on actual number of //symbols entered int[] numberSplit = new int[array.length]; int position = array.length - 1; //set beginning position to the end of array //This turns String array into Integer array for (int i = 0; i < array.length; i++) { numberSplit[i] = Integer.parseInt(array[i]); } //This loop goes from last to first position of an array making //calculation where power of 2 is the current loop instance number for (int i = 0; i < array.length; i++) { if (numberSplit[position] == 1) { decimalValue = decimalValue + (long) Math.pow(2, i); } position--; } System.out.println(decimalValue); main(null); }\n\n2,just wanted to share my solution :)\n\nimport java.util.*; public class BinaryToDecimal { public static void main() { Scanner sc=new Scanner(System.in); System.out.println(""enter the binary number""); double s=sc.nextDouble(); int c=0; long s1=0; while(s>0) { s1=s1+(long)(Math.pow(2,c)*(long)(s\x10)); s=(long)s/10; c++; } System.out.println(""The respective decimal number is : ""+s1); } }\n\nint base2(String bits) { int ans = 0; for (int i = bits.length() - 1, f = 1; i >= 0; i--) { ans += f * (bits.charAt(i) - \'0\'); f <<= 1; } return ans; }\n\n""""""']",0.208333333,1
lang,Thread,How to make a Java thread wait for another threads output?,['<p>(on the same <code>mon</code> object) and the first thread (assuming it is the only thread waiting on the monitor) will wake up.\nif more than one thread is waiting on the monitor ‚Äö√Ñ√¨ this will wake <em>all of them up</em>.\nHowever  only one of the threads will be able to grab the monitor (remember that the <code>wait</code> is in a <code>synchronized</code> block) and carry on ‚Äö√Ñ√¨ the others will then be blocked until they can acquire the monitor s lock.</p>\nThe OS doesn‚Äö√Ñ√¥t even try to   schedule the sleeping thread until requested time has passed.</p>\nThe OS is free to immediately give the thread another timeslice    or to give some other thread or process the CPU the yielding thread   just gave up.</p>\n<p>Threads also lose the remainder of their timeslice when they perform   blocking IO and under a few other circumstances.\nIf a thread works   through the entire timeslice  the OS forcibly takes control roughly as   if <code>yield()</code> had been called  so that other processes can run.</p>\nimprove system   responsiveness (at the expense of time ‚Äö√Ñ√Æ context switches  even just   to the OS and back  aren‚Äö√Ñ√¥t free).\nMeasure and test against goals you   care about  as always.</p> </blockquote>\n<p><code>sleep()</code> sends the Thread to sleep as it was before  it just packs the context and stops executing for a predefined time.\nSo in order to wake it up before the due time  you need to know the Thread reference.\nIt s mostly used for time-synchronization (e.g. wake in exactly 3.5 seconds) and/or hard-coded fairness (just sleep for a while and let others threads work).</p>\n<p><code>wait()</code>  on the contrary  is a thread (or message) synchronization mechanism that allows you to notify a Thread of which you have no stored reference (nor care).\nBasically using notify() you are sending a message (that might even not be received at all and normally you don t care).</p>\n<p>They could be implemented in the same manner in the underlying OS  or not at all (as previous versions of Java had no real multithreading; probably some small VMs doesn t do that either).\nDon t forget Java runs on a VM  so your code will be transformed in something different according to the VM/OS/HW it runs on.</p>\nmethod needs to be called from a loop in order to deal with false alarm.</p></li> <li><p><code>wait()</code> method must be called from synchronized context (i.e.  synchronized method or block)  otherwise  it will throw <code>IllegalMonitorStateException</code></p></li> </ol>\n<p>There are some difference key notes i conclude after working on wait and sleep  first take a look on sample using wait() and sleep():</p>\nThe major difference is to wait to release the lock or monitor while sleep doesn t release any lock or monitor while waiting.\nWait is used for inter-thread communication while sleep is used to introduce pause on execution.</strong> </p>\nif you have more then one thread in waiting state and you want to wake all of those thread).\nmethod is used for inter-thread communication because if a thread goes in waiting state you ll need another thread to wake that thread.</p>\nLike if you want something should happen after few seconds like in a game after user s turn you want the user to wait until the computer plays then you can mention the <code>sleep()</code> method.</p>\n<p>And there is a similarity between both methods: they both are checked statement so you need try catch or throws to access these methods.</p>\nThe thread keeps the monitors it has aquired   -- i.e. if the thread is currently in a synchronized block or method no other thread can enter this block or method.\n<p>Note that sleep is a static method  which means that it always affects   the current thread (the one that is executing the sleep method).\nUsing it is possible to halt a thread other   than the current thread.\nA suspended thread keeps all its monitors and   since this state is not interruptable it is deadlock prone.</p>\nWait is called on an object  not a   thread; we call this object the  lock object. \nthen releases this lock  and adds the thread to the  wait list    associated with the lock.\nLater  another thread can synchronize on the   same lock object and call <code>lock.notify()</code>.\nBasically  <code>wait()</code>/<code>notify()</code> is like   <code>sleep()</code>/<code>interrupt()</code>  only the active thread does not need a direct   pointer to the sleeping thread  but only to the shared lock object.</p> </blockquote>\nthe thread stops working until the object being waited-on is notified  generally by other threads.</li> </ul>'],"['You can use Thread.join() to do that:\n\nThread[] threads = new Thread[numOfThreads];\nfor (int i = 0; i < threads.length; i++) {\n    threads[i] = new Thread(new Runnable() {\n        public void run() {\n            System.out.println(""xxx"");\n        }\n    });\n    threads[i].start();\n}\n\nfor (int i = 0; i < threads.length; i++) {\n    try {\n        threads[i].join();\n    } catch (InterruptedException e) {\n    }\n}\nFor your solution\n\nThread[] threads = new Thread[3];\nthreads[i] = new Thread(new Runnable() {\n        ...\n}).start();\nthreads[i] = new Thread(new Runnable() {\n        ...\n}).start();\nthreads[i] = new Thread(new Runnable() {\n        ...\n}).start();\n\nfor (int i = 0; i < threads.length; i++) {\n    try {\n        threads[i].join();\n    } catch (InterruptedException e) {\n    }\n}']","['""""""I followed SwingWorker... The code was very messy and I don\'t like this approach. Instead of get(), which waits for completion, use process() and setProgress() to show intermediate results, as suggested in this simple example or this related example. 1.1kThe join() method allows one thread to wait for the completion of another.However, as with sleep, join is dependent on the OS for timing, so you should not assume that join will wait exactly as long as you specify. Jatin MandankaJatin Mandanka\n\n""""""']",0.224489796,0.230769231
lang,Thread,When does Javas Thread.sleep throw InterruptedException?,['<p>(on the same <code>mon</code> object) and the first thread (assuming it is the only thread waiting on the monitor) will wake up.\nif more than one thread is waiting on the monitor ‚Äö√Ñ√¨ this will wake <em>all of them up</em>.\nHowever  only one of the threads will be able to grab the monitor (remember that the <code>wait</code> is in a <code>synchronized</code> block) and carry on ‚Äö√Ñ√¨ the others will then be blocked until they can acquire the monitor s lock.</p>\nThe OS doesn‚Äö√Ñ√¥t even try to   schedule the sleeping thread until requested time has passed.</p>\nThe OS is free to immediately give the thread another timeslice    or to give some other thread or process the CPU the yielding thread   just gave up.</p>\n<p>Threads also lose the remainder of their timeslice when they perform   blocking IO and under a few other circumstances.\nIf a thread works   through the entire timeslice  the OS forcibly takes control roughly as   if <code>yield()</code> had been called  so that other processes can run.</p>\nimprove system   responsiveness (at the expense of time ‚Äö√Ñ√Æ context switches  even just   to the OS and back  aren‚Äö√Ñ√¥t free).\nMeasure and test against goals you   care about  as always.</p> </blockquote>\n<p><code>sleep()</code> sends the Thread to sleep as it was before  it just packs the context and stops executing for a predefined time.\nSo in order to wake it up before the due time  you need to know the Thread reference.\nIt s mostly used for time-synchronization (e.g. wake in exactly 3.5 seconds) and/or hard-coded fairness (just sleep for a while and let others threads work).</p>\n<p><code>wait()</code>  on the contrary  is a thread (or message) synchronization mechanism that allows you to notify a Thread of which you have no stored reference (nor care).\nBasically using notify() you are sending a message (that might even not be received at all and normally you don t care).</p>\n<p>They could be implemented in the same manner in the underlying OS  or not at all (as previous versions of Java had no real multithreading; probably some small VMs doesn t do that either).\nDon t forget Java runs on a VM  so your code will be transformed in something different according to the VM/OS/HW it runs on.</p>\nmethod needs to be called from a loop in order to deal with false alarm.</p></li> <li><p><code>wait()</code> method must be called from synchronized context (i.e.  synchronized method or block)  otherwise  it will throw <code>IllegalMonitorStateException</code></p></li> </ol>\n<p>There are some difference key notes i conclude after working on wait and sleep  first take a look on sample using wait() and sleep():</p>\nThe major difference is to wait to release the lock or monitor while sleep doesn t release any lock or monitor while waiting.\nWait is used for inter-thread communication while sleep is used to introduce pause on execution.</strong> </p>\nif you have more then one thread in waiting state and you want to wake all of those thread).\nmethod is used for inter-thread communication because if a thread goes in waiting state you ll need another thread to wake that thread.</p>\nLike if you want something should happen after few seconds like in a game after user s turn you want the user to wait until the computer plays then you can mention the <code>sleep()</code> method.</p>\n<p>And there is a similarity between both methods: they both are checked statement so you need try catch or throws to access these methods.</p>\nThe thread keeps the monitors it has aquired   -- i.e. if the thread is currently in a synchronized block or method no other thread can enter this block or method.\n<p>Note that sleep is a static method  which means that it always affects   the current thread (the one that is executing the sleep method).\nUsing it is possible to halt a thread other   than the current thread.\nA suspended thread keeps all its monitors and   since this state is not interruptable it is deadlock prone.</p>\nWait is called on an object  not a   thread; we call this object the  lock object. \nthen releases this lock  and adds the thread to the  wait list    associated with the lock.\nLater  another thread can synchronize on the   same lock object and call <code>lock.notify()</code>.\nBasically  <code>wait()</code>/<code>notify()</code> is like   <code>sleep()</code>/<code>interrupt()</code>  only the active thread does not need a direct   pointer to the sleeping thread  but only to the shared lock object.</p> </blockquote>\nthe thread stops working until the object being waited-on is notified  generally by other threads.</li> </ul>'],"['In this solution, I defined an interface Interruptible, and a method ignoreInterruption which converts an Interruptible to a Runnable:\n\npublic class Foo {\n\n  public static void main(String... args) {\n    new Thread(ignoreInterruption(Foo::bar)).start();\n    new Thread(ignoreInterruption(() -> Foo.baz(1, 2, 3))).start();\n  }\n\n  static void bar() throws InterruptedException {\n    // do something\n    Thread.sleep(1000);\n  }\n\n  static void baz(int a, int b, int c) throws InterruptedException {\n    // do something\n    Thread.sleep(1000);\n  }  \n\n  interface Interruptible {\n    public void run() throws InterruptedException;\n  }\n\n  static Runnable ignoreInterruption(Interruptible interruptible) {\n    return () -> { \n      try {\n        interruptible.run();\n      }\n      catch(InterruptedException ie) {\n        // ignored\n      }\n    };\n  }\n\n}']","['"""""" Java Thread Sleep and Interrupted Exception\n\nWhy does a sleep thread need a try catch to catch Interrupted Exception? Why does a sleep even emit an Interrupted Exception error? This are the two questions I really wanna find out about in java programming I\'ve been searching through google and i\'ve still haven\'t found a clear explanation is to why this two things happen. Jericho AganonJericho Aganon\n\n1\n\nFolks stumbling onto this from search engines who have more questions now about what InterruptedException is really for should check out this insightful answer: stackoverflow.com/a/3976377/1858327\n\n– Captain Man Nov 3, 2022 at 16:56\n\nAn InterruptedException is thrown when the thread is blocked/waiting and it is interrupted by another thread (by means of Thread.interrupt). Think of it as a request for immediate termination, that do not suffer the drawbacks of Thread.stop(). This way, even if you instruct a thread to sleep for several years, you are able to interrupt that thread. The recommended practice is aborting whatever you are processing when a InterruptedException is thrown. 7,4\n\nOh so, for example i have two frames, frame1 and frame2. Frame1 has a button that shows frame 2. By declaring an interrupted exception, I can click that button to show my frame2 while frame1 is sleeping? – Jericho Aganon Mar 20, 2013 at 15:47\n\nSorry, I don\'t have enough experience with concurrency in AWT/Swing. I use threads for background tasks. If you can rephrase your question not using GUI I would be happy to answer.""""""']",0.142857143,0.133333333
lang,Thread,Java: Thread.currentThread().sleep(x) vs. Thread.sleep(x),['<p>(on the same <code>mon</code> object) and the first thread (assuming it is the only thread waiting on the monitor) will wake up.\nif more than one thread is waiting on the monitor ‚Äö√Ñ√¨ this will wake <em>all of them up</em>.\nHowever  only one of the threads will be able to grab the monitor (remember that the <code>wait</code> is in a <code>synchronized</code> block) and carry on ‚Äö√Ñ√¨ the others will then be blocked until they can acquire the monitor s lock.</p>\nThe OS doesn‚Äö√Ñ√¥t even try to   schedule the sleeping thread until requested time has passed.</p>\nThe OS is free to immediately give the thread another timeslice    or to give some other thread or process the CPU the yielding thread   just gave up.</p>\n<p>Threads also lose the remainder of their timeslice when they perform   blocking IO and under a few other circumstances.\nIf a thread works   through the entire timeslice  the OS forcibly takes control roughly as   if <code>yield()</code> had been called  so that other processes can run.</p>\nimprove system   responsiveness (at the expense of time ‚Äö√Ñ√Æ context switches  even just   to the OS and back  aren‚Äö√Ñ√¥t free).\nMeasure and test against goals you   care about  as always.</p> </blockquote>\n<p><code>sleep()</code> sends the Thread to sleep as it was before  it just packs the context and stops executing for a predefined time.\nSo in order to wake it up before the due time  you need to know the Thread reference.\nIt s mostly used for time-synchronization (e.g. wake in exactly 3.5 seconds) and/or hard-coded fairness (just sleep for a while and let others threads work).</p>\n<p><code>wait()</code>  on the contrary  is a thread (or message) synchronization mechanism that allows you to notify a Thread of which you have no stored reference (nor care).\nBasically using notify() you are sending a message (that might even not be received at all and normally you don t care).</p>\n<p>They could be implemented in the same manner in the underlying OS  or not at all (as previous versions of Java had no real multithreading; probably some small VMs doesn t do that either).\nDon t forget Java runs on a VM  so your code will be transformed in something different according to the VM/OS/HW it runs on.</p>\nmethod needs to be called from a loop in order to deal with false alarm.</p></li> <li><p><code>wait()</code> method must be called from synchronized context (i.e.  synchronized method or block)  otherwise  it will throw <code>IllegalMonitorStateException</code></p></li> </ol>\n<p>There are some difference key notes i conclude after working on wait and sleep  first take a look on sample using wait() and sleep():</p>\nThe major difference is to wait to release the lock or monitor while sleep doesn t release any lock or monitor while waiting.\nWait is used for inter-thread communication while sleep is used to introduce pause on execution.</strong> </p>\nif you have more then one thread in waiting state and you want to wake all of those thread).\nmethod is used for inter-thread communication because if a thread goes in waiting state you ll need another thread to wake that thread.</p>\nLike if you want something should happen after few seconds like in a game after user s turn you want the user to wait until the computer plays then you can mention the <code>sleep()</code> method.</p>\n<p>And there is a similarity between both methods: they both are checked statement so you need try catch or throws to access these methods.</p>\nThe thread keeps the monitors it has aquired   -- i.e. if the thread is currently in a synchronized block or method no other thread can enter this block or method.\n<p>Note that sleep is a static method  which means that it always affects   the current thread (the one that is executing the sleep method).\nUsing it is possible to halt a thread other   than the current thread.\nA suspended thread keeps all its monitors and   since this state is not interruptable it is deadlock prone.</p>\nWait is called on an object  not a   thread; we call this object the  lock object. \nthen releases this lock  and adds the thread to the  wait list    associated with the lock.\nLater  another thread can synchronize on the   same lock object and call <code>lock.notify()</code>.\nBasically  <code>wait()</code>/<code>notify()</code> is like   <code>sleep()</code>/<code>interrupt()</code>  only the active thread does not need a direct   pointer to the sleeping thread  but only to the shared lock object.</p> </blockquote>\nthe thread stops working until the object being waited-on is notified  generally by other threads.</li> </ul>'],"['The Thread.interrupt() method interrupts the specific Thread that the instance references to:\n\nThread x = getSomeThreadInstance();\nx.interrupt();\nThe x variable can refer to any thread instance.\n\nThe Thread.currentThread().interrupt() method is the same as before, but applied to the current Thread, interrupting only the current thread of execution. It is equivalent to:\n\nThread x = Thread.currentThread();\nx.interrupt();\nAbout Thread.sleep() and Thread.currentThread().sleep() there is no difference. sleep() is a static method on the Thread class, and makes no difference on the way you call it. Calling it causes the current thread of execution to pause for the indicated amount of time.\n\nNonetheless, one should not call static method on an instance, which means static method should be called in a static way.']","['""""""Java: Thread.currentThread().sleep(x) vs. Thread.sleep(x)\n\nI have this in my code\n\nThread.currentThread().sleep(x);\n\nEclipse tells me to use the static\n\ninstead, why? What\'s the difference, is there some difference in functionality at all between these 2 methods? 1\n\nthere\'s a \'Save Action\' in Eclipse that will automatically replace static members access via instance variables with static access via the class name - enable this Save Action and as many of the other Save Actions as you agree with (e.g., remove unnecessary casts, unnecessary \'this\', etc.). There is only one method, not two, and it is static.""""""']",0.163265306,0.071428571
lang,Thread,How a thread should close itself in Java?,['<p>(on the same <code>mon</code> object) and the first thread (assuming it is the only thread waiting on the monitor) will wake up.\nif more than one thread is waiting on the monitor ‚Äö√Ñ√¨ this will wake <em>all of them up</em>.\nHowever  only one of the threads will be able to grab the monitor (remember that the <code>wait</code> is in a <code>synchronized</code> block) and carry on ‚Äö√Ñ√¨ the others will then be blocked until they can acquire the monitor s lock.</p>\nThe OS doesn‚Äö√Ñ√¥t even try to   schedule the sleeping thread until requested time has passed.</p>\nThe OS is free to immediately give the thread another timeslice    or to give some other thread or process the CPU the yielding thread   just gave up.</p>\n<p>Threads also lose the remainder of their timeslice when they perform   blocking IO and under a few other circumstances.\nIf a thread works   through the entire timeslice  the OS forcibly takes control roughly as   if <code>yield()</code> had been called  so that other processes can run.</p>\nimprove system   responsiveness (at the expense of time ‚Äö√Ñ√Æ context switches  even just   to the OS and back  aren‚Äö√Ñ√¥t free).\nMeasure and test against goals you   care about  as always.</p> </blockquote>\n<p><code>sleep()</code> sends the Thread to sleep as it was before  it just packs the context and stops executing for a predefined time.\nSo in order to wake it up before the due time  you need to know the Thread reference.\nIt s mostly used for time-synchronization (e.g. wake in exactly 3.5 seconds) and/or hard-coded fairness (just sleep for a while and let others threads work).</p>\n<p><code>wait()</code>  on the contrary  is a thread (or message) synchronization mechanism that allows you to notify a Thread of which you have no stored reference (nor care).\nBasically using notify() you are sending a message (that might even not be received at all and normally you don t care).</p>\n<p>They could be implemented in the same manner in the underlying OS  or not at all (as previous versions of Java had no real multithreading; probably some small VMs doesn t do that either).\nDon t forget Java runs on a VM  so your code will be transformed in something different according to the VM/OS/HW it runs on.</p>\nmethod needs to be called from a loop in order to deal with false alarm.</p></li> <li><p><code>wait()</code> method must be called from synchronized context (i.e.  synchronized method or block)  otherwise  it will throw <code>IllegalMonitorStateException</code></p></li> </ol>\n<p>There are some difference key notes i conclude after working on wait and sleep  first take a look on sample using wait() and sleep():</p>\nThe major difference is to wait to release the lock or monitor while sleep doesn t release any lock or monitor while waiting.\nWait is used for inter-thread communication while sleep is used to introduce pause on execution.</strong> </p>\nif you have more then one thread in waiting state and you want to wake all of those thread).\nmethod is used for inter-thread communication because if a thread goes in waiting state you ll need another thread to wake that thread.</p>\nLike if you want something should happen after few seconds like in a game after user s turn you want the user to wait until the computer plays then you can mention the <code>sleep()</code> method.</p>\n<p>And there is a similarity between both methods: they both are checked statement so you need try catch or throws to access these methods.</p>\nThe thread keeps the monitors it has aquired   -- i.e. if the thread is currently in a synchronized block or method no other thread can enter this block or method.\n<p>Note that sleep is a static method  which means that it always affects   the current thread (the one that is executing the sleep method).\nUsing it is possible to halt a thread other   than the current thread.\nA suspended thread keeps all its monitors and   since this state is not interruptable it is deadlock prone.</p>\nWait is called on an object  not a   thread; we call this object the  lock object. \nthen releases this lock  and adds the thread to the  wait list    associated with the lock.\nLater  another thread can synchronize on the   same lock object and call <code>lock.notify()</code>.\nBasically  <code>wait()</code>/<code>notify()</code> is like   <code>sleep()</code>/<code>interrupt()</code>  only the active thread does not need a direct   pointer to the sleeping thread  but only to the shared lock object.</p> </blockquote>\nthe thread stops working until the object being waited-on is notified  generally by other threads.</li> </ul>'],['You can add a method like this as any blocking IO operation will throw an IOException:-\n\npublic void close() throws IOException {\n    this.socket.close();\n}\nFrom the javadoc:-\n\nCloses this socket. Any thread currently blocked in accept() will throw a SocketException.'],"['""""""You should always end threads by checking a flag in the run() loop (if any). Your thread should look like this:\n\npublic class IndexProcessor implements Runnable { private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class); private volatile boolean execute; @Override public void run() { this.execute = true; while (this.execute) { try { LOGGER.debug(""Sleeping...""); Thread.sleep((long) 15000); LOGGER.debug(""Processing""); } catch (InterruptedException e) { LOGGER.error(""Exception"", e); this.execute = false; } } } public void stopExecuting() { this.execute = false; } }\n\nThen you can end the thread by calling thread.stopExecuting(). That way the thread is ended clean, but this takes up to 15 seconds (due to your sleep). You can still call thread.interrupt() if it\'s really urgent - but the prefered way should always be checking the flag. To avoid waiting for 15 seconds, you can split up the sleep like this:\n\n... try { LOGGER.debug(""Sleeping...""); for (int i = 0; (i < 150) && this.execute; i++) { Thread.sleep((long) 100); } LOGGER.debug(""Processing""); } catch (InterruptedException e) { ... 3,1\n\nit\'s not a Thread -- it implements Runnable -- you can\'t call Thread methods on it unless you declare it in as a Thread in which case you can\'t call stopExecuting()\n\n\n\nTypically, a thread is terminated when it\'s interrupted. So, why not use the native boolean? Try isInterrupted():\n\nThread t = new Thread(new Runnable(){ @Override public void run() { while(!Thread.currentThread().isInterrupted()){ // do stuff } }}); t.start(); // Sleep a second, and then interrupt try { Thread.sleep(1000); } catch (InterruptedException e) {} t.interrupt();\n\nref- How can I kill a thread? without using stop();\n\nLovekush VishwakarmaLovekush Vishwakarma\n\n3,3\n\nThe interrupted thread IS NOT terminated, it\'s just interrupted. If the thread is interrupted while in sleep(), then it throws InterruptedException which your thread should catch and possibly end itself or maybe simply go on with further processing. isInterrutped will be true ONLY if the thread was not in sleep or wait (it was actually running) and this can give you a hint, that the thread was interrupted. In other words: if you put sleep() in your // do stuff line, then t.interrupt() won\'t terminate it (well, for 99.9% it won\'t). The first sentence of the answer should say ""Typically, the goal of interruption is to terminate a thread."" To clarify what @Cromax said, if this while condition is going to be the sole way to stop the thread, then any catch (InterruptedException) block needs to call Thread.currentThread().interrupt(); in order to maintain the interrupted status for the while condition. But depending on the work, it might be safe to use those catch blocks to break; out of the loop early, or even safe to add more .isInterrupted() checks throughout the loop body. ""Blocking library methods like Thread.sleep and Object.wait try to detect when a thread has been interrupted and return early. They respond to interruption by clearing the interrupted status and throwing InterruptedException, indicating that the blocking operation completed early due to interruption. The JVM makes no guarantees on how quickly a blocking method will detect inter- ruption, but in practice this happens reasonably quickly."" Brian Goetz\n\n\n\nFor synchronizing threads I prefer using CountDownLatch which helps threads to wait until the process being performed complete. In this case, the worker class is set up with a CountDownLatch instance with a given count. A call to await method will block until the current count reaches zero due to invocations of the countDown method or the timeout set is reached. This approach allows interrupting a thread instantly without having to wait for the specified waiting time to elapse:\n\npublic class IndexProcessor implements Runnable { private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class); private final CountDownLatch countdownlatch; public IndexProcessor(CountDownLatch countdownlatch) { this.countdownlatch = countdownlatch; } public void run() { try { while (!countdownlatch.await(15000, TimeUnit.MILLISECONDS)) { LOGGER.debug(""Processing...""); } } catch (InterruptedException e) { LOGGER.error(""Exception"", e); run = false; } } }\n\nWhen you want to finish execution of the other thread, execute countDown on the CountDownLatch and join the thread to the main thread:\n\npublic class SearchEngineContextListener implements ServletContextListener { private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class); private Thread thread = null; private IndexProcessor runnable = null; private CountDownLatch countdownLatch = null; @Override public void contextInitialized(ServletContextEvent event) { countdownLatch = new CountDownLatch(1); Thread thread = new Thread(new IndexProcessor(countdownLatch)); LOGGER.debug(""Starting thread: "" + thread); thread.start(); LOGGER.debug(""Background process successfully started.""); } @Override public void contextDestroyed(ServletContextEvent event) { LOGGER.debug(""Stopping thread: "" + thread); if (countdownLatch != null) { countdownLatch.countDown(); } if (thread != null) { try { thread.join(); } catch (InterruptedException e) { LOGGER.error(""Exception"", e); } LOGGER.debug(""Thread successfully stopped.""); } } }\n\nEduardo Sanchez-RosEduardo Sanchez-Ros\n\n1,Some supplementary info. Both flag and interrupt are suggested in the Java doc.""""""']",0.102040816,0.142857143
net,Socket,Java sending and receiving file (byte[]) over sockets,['Therefore  you have to create a bunch of different threads if your server has a bunch of open <code>Socket</code>s.</p>\n<p>A <code>SocketChannel</code> is a non-blocking way to read from sockets  so that you can have one thread communicate with a bunch of open connections at once.\nBuffer</code>s are another feature of NIO that allows you to access the underlying data from reads and writes to avoid the overhead of copying data into new arrays.</p>\n<p>In a nutshell  up to Java 1.3  all I/O was of the blocking type.\n<p>The basic point of NIO  introduced in Java 1.4  was to make the functionality of traditional UNIX-style multiplexed non-blocking I/O available in Java.\nServers with threadpools  or with threads handling more than one connection each  now become possible.\nIf only part of a buffer can be written immediately  with blocking I/O your thread will simply block until the entirety can be written.\nWith non-blocking I/O  your thread gets a return value of how much was written  leaving it up to you to handle the left-over for the next round.\nA <code>Buffer</code> takes care of such mechanical details by explicitly implementing a producer/consumer pattern for filling and draining  it being understood that your threads and the JVM s kernel will <em>not</em>\nSelectors</code>  if one channel takes 1 seconds for processing  and there are 10 channels in queue  it means you have to wait 10 seconds before next polling which is untolerable.\npattern  the task is smaller  it s more like thread-per-task  and tasks could be read  write  biz process etc. for more detail  you can take a look at <strong>\n<p>If you are really fancy at one thread  the bottom-line is at least you shold have pooled I/O threads  because I/O operations is often oders of magnitude slower than instruction-processing cycles  you would not want the precious one thread being blocked by I/O  and this is exactly <strong>NodeJS</strong>\nI don t think so  NIO programming is complex  and multi-threads is not naturally evil  Keep in mind that modern operating systems and CPU s become better and better at multitasking  so the overheads of multithreading becomes smaller over time.</p>'],"['Take a look at the tutorial on Reading from and Writing to a Socket.\n\nTo write a byte array to a socket you would:\n\nbyte[] message = ...;\nSocket socket=new Socket(ipAddress, port);\nOutputStream socketOutputStream = socket.getOutputStream();\nsocketOutputStream.write(message);\nSimilarly, to read, you would use socket.getInputStream.']","['""""""Java sending and receiving file (byte[]) over sockets\n\nI am trying to develop a very simple client / server where the client converts a file to bytes, sends it to the server, and then converts the bytes back in to a file. Currently the program just creates an empty file. I\'m not a fantastic Java developer so any help much appreciated. This is the server part that receives what the client sends. ServerSocket serverSocket = null; serverSocket = new ServerSocket(4444); Socket socket = null; socket = serverSocket.accept(); DataOutputStream out = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream())); DataInputStream in = new DataInputStream(new BufferedInputStream(socket.getInputStream())); byte[] bytes = new byte[1024]; in.read(bytes); System.out.println(bytes); FileOutputStream fos = new FileOutputStream(""C:\\\\test2.xml""); fos.write(bytes);\n\nAnd here is the client part\n\nSocket socket = null; DataOutputStream out = null; DataInputStream in = null; String host = ""127.0.0.1""; socket = new Socket(host, 4444); out = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream())); in = new DataInputStream(new BufferedInputStream(socket.getInputStream())); File file = new File(""C:\\\\test.xml""); //InputStream is = new FileInputStream(file); // Get the size of the file long length = file.length(); if (length > Integer.MAX_VALUE) { System.out.println(""File is too large.""); } byte[] bytes = new byte[(int) length]; //out.write(bytes); System.out.println(bytes); out.close(); in.close(); socket.close();\n\n1,3\n\nI bet you threw away all the exceptions... Please post the whole program. Your client doesn\'t write anything to its output stream, and your server ignores the result of the read method. Google for ""Java IO tutorial"". – JB Nizet Mar 1, 2012 at 17:30\n\nare the answers to the solution can be modified for chat and file sharing on same time and same socket stream\n\n– Nimish Bansal May 31, 2018 at 18:08\n\nThe correct way to copy a stream in Java is as follows:\n\nint count; byte[] buffer = new byte[8192]; // or 4096, or more while ((count = in.read(buffer)) > 0) { out.write(buffer, 0, count); }\n\nWish I had a dollar for every time I\'ve posted that in a forum. user207421user207421\n\n10\n\nThank you!""""""', '""""""Thanks. If you are using spring, there\'s a util class available in spring-core. You can simply do\n\nimport org.springframework.util.SerializationUtils; byte[] bytes = SerializationUtils.serialize(anyObject); Object object = SerializationUtils.deserialize(bytes);\n\nSupun WijerathneSupun Wijerathne\n\n1\n\n@PaleBlueDot yes it is, if you go to the method and see the implementation, you could see that it doesn\'t involve any global member. I would like to transmit it as byte[] over sockets to another machine\n\n// When you connect ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream()); // When you want to send it oos.writeObject(appMessage);\n\nwhere it is rebuilt from the bytes received. // When you connect ObjectInputStream ois = new ObjectInputStream(socket.getInputStream()); // When you want to receive it AppMessage appMessage = (AppMessage)ois.readObject();\n\nuser207421user207421\n\nSpring Framework org.springframework.util.SerializationUtils\n\nbyte[] data = SerializationUtils.serialize(obj);\n\n2,In case you want a nice no dependencies copy-paste solution. Grab the code below. MyObject myObject = ... byte[] bytes = SerializeUtils.serialize(myObject); myObject = SerializeUtils.deserialize(bytes);\n\nimport java.io.*; public class SerializeUtils { public static byte[] serialize(Serializable value) throws IOException { ByteArrayOutputStream out = new ByteArrayOutputStream(); try(ObjectOutputStream outputStream = new ObjectOutputStream(out)) { outputStream.writeObject(value); } return out.toByteArray(); } public static <T extends Serializable> T deserialize(byte[] data) throws IOException, ClassNotFoundException { try(ByteArrayInputStream bis = new ByteArrayInputStream(data)) { //noinspection unchecked return (T) new ObjectInputStream(bis).readObject(); } } }\n\nIlya GazmanIlya Gazman\n\nThis is just an optimized code form of the accepted answer in case anyone wants to use this in production :\n\npublic static void byteArrayOps() throws IOException, ClassNotFoundException{ String str=""123""; byte[] yourBytes = null; // Convert to byte[] try(ByteArrayOutputStream bos = new ByteArrayOutputStream(); ObjectOutputStream out = new ObjectOutputStream(bos);) { out.writeObject(str); out.flush(); yourBytes = bos.toByteArray(); } finally { } // convert back to Object try(ByteArrayInputStream bis = new ByteArrayInputStream(yourBytes); ObjectInput in = new ObjectInputStream(bis);) { Object o = in.readObject(); } finally { } }\n\nNishant_SinghNishant_Singh\n\nmake sure to implements Serializable or exception will be your destiny\n\npublic class Dto implements Serializable { private String firstName; private String lastName; private Integer myNumber; public String getFirstName() { return firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getLastName() { return lastName; } public void setLastName(String lastName) { this.lastName = lastName; } public Integer getMyNumber() { return myNumber; } public void setMyNumber(Integer myNumber) { this.myNumber = myNumber; } @Override public String toString() { return ""Dto{"" + ""firstName=\'"" + firstName + \'\\\'\' + "", lastName=\'"" + lastName + \'\\\'\' + "", myNumber="" + myNumber + \'}\'; }\n\npublic class Main { public static void main(String[] args) { Dto dto=new Dto(); dto.setFirstName(""Sajjad""); dto.setLastName(""ahmed""); dto.setMyNumber(0305); byte[] serializedDto = serializeObject(dto); System.out.println(""Serialized Dto=== "" + new String(serializedDto)); Dto deserializedDto = deserializeObject(serializedDto); System.out.println(""Deserialized Dto==="" + deserializedDto); } private static byte[] serializeObject(Dto dto) { try { ByteArrayOutputStream byteOutputStream = new ByteArrayOutputStream(); ObjectOutputStream objectOutputStream = new ObjectOutputStream(byteOutputStream); objectOutputStream.writeObject(dto); objectOutputStream.close(); byteOutputStream.close(); return byteOutputStream.toByteArray(); } catch (IOException e) { e.printStackTrace(); return null; }} private static Dto deserializeObject(byte[] byteArray) { try { ByteArrayInputStream byteInputStream = new ByteArrayInputStream(byteArray); ObjectInputStream objectInputStream = new ObjectInputStream(byteInputStream); Dto deserializedObject = (Dto) objectInputStream.readObject(); objectInputStream.close(); byteInputStream.close(); return deserializedObject; } catch (IOException | ClassNotFoundException e) { e.printStackTrace(); return null; } }\n\nSajjad AhmedSajjad Ahmed\n\ncode example with java 8+:\n\npublic class Person implements Serializable { private String lastName; private String firstName; public Person() { } public Person(String firstName, String lastName) { this.firstName = firstName; this.lastName = lastName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getFirstName() { return firstName; } public String getLastName() { return lastName; } public void setLastName(String lastName) { this.lastName = lastName; } @Override public String toString() { return ""firstName: "" + firstName + "", lastName: "" + lastName; } } public interface PersonMarshaller { default Person fromStream(InputStream inputStream) { try (ObjectInputStream objectInputStream = new ObjectInputStream(inputStream)) { Person person= (Person) objectInputStream.readObject(); return person; } catch (IOException | ClassNotFoundException e) { System.err.println(e.getMessage()); return null; } } default OutputStream toStream(Person person) { try (OutputStream outputStream = new ByteArrayOutputStream()) { ObjectOutput objectOutput = new ObjectOutputStream(outputStream); objectOutput.writeObject(person); objectOutput.flush(); return outputStream; } catch (IOException e) { System.err.println(e.getMessage()); return null; } } }\n\nMohamed.AbdoMohamed.Abdo\n\n2,""""""', '""""""Buyer beware. The other case to get correct byte array via stream, after send request to server and waiting for the response. /** * Begin setup TCP connection to PC app * to open integrate connection between mobile app and pc app (or mobile app) */ mSocket = new Socket(IP, port); // mSocket.setSoTimeout(30000); DataOutputStream mDos = new DataOutputStream(mSocket.getOutputStream()); String str = ""MobileRequest#"" + params[0] + ""#<EOF>""; mDos.write(str.getBytes()); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } /* Since data are accepted as byte, all of them will be collected in the following byte array which initialised with accepted data length. */ DataInputStream mDis = new DataInputStream(mSocket.getInputStream()); byte[] data = new byte[mDis.available()]; // Collecting data into byte array for (int i = 0; i < data.length; i++) data[i] = mDis.readByte(); // Converting collected data in byte array into String. String RESPONSE = new String(data);\n\n7,You\'re doing an extra copy if you use ByteArrayOutputStream. If you know the length of the stream before you start reading it (e.g. the InputStream is actually a FileInputStream, and you can call file.length() on the file, or the InputStream is a zipfile entry InputStream, and you can call zipEntry.length()), then it\'s far better to write directly into the byte[] array -- it uses half the memory, and saves time. // Read the file contents into a byte[] array byte[] buf = new byte[inputStreamLength]; int bytesRead = Math.max(0, inputStream.read(buf)); // If needed: for safety, truncate the array if the file may somehow get // truncated during the read operation byte[] contents = bytesRead == inputStreamLength ? buf : Arrays.copyOf(buf, bytesRead);\n\nN.B. the last line above deals with files getting truncated while the stream is being read, if you need to handle that possibility, but if the file gets longer while the stream is being read, the contents in the byte[] array will not be lengthened to include the new file content, the array will simply be truncated to the old length inputStreamLength. Luke HutchisonLuke Hutchison\n\n8,if(inputStream != null){ ByteArrayOutputStream contentStream = readSourceContent(inputStream); String stringContent = contentStream.toString(); byte[] byteArr = encodeString(stringContent); }\n\npublic static ByteArrayOutputStream readSourceContent(InputStream inputStream) throws IOException { ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); int nextChar; try { while ((nextChar = inputStream.read()) != -1) { outputStream.write(nextChar); } outputStream.flush(); } catch (IOException e) { throw new IOException(""Exception occurred while reading content"", e); } return outputStream; }\n\npublic static byte[] encodeString(String content) throws UnsupportedEncodingException { byte[] bytes; try { bytes = content.getBytes(); } catch (UnsupportedEncodingException e) { String msg = ENCODING + "" is unsupported encoding type""; log.error(msg,e); throw new UnsupportedEncodingException(msg, e); } return bytes; }\n\n1\n\nWhy convert to String and then to byte[] (which might mess with binary data)? ByteArrayOutputStream has .toByteArray(): docs.oracle.com/javase/7/docs/api/java/io/…\n\n\n\npublic static byte[] toByteArray(InputStream is) throws IOException { ByteArrayOutputStream output = new ByteArrayOutputStream(); try { byte[] b = new byte[4096]; int n = 0; while ((n = is.read(b)) != -1) { output.write(b, 0, n); } return output.toByteArray(); } finally { output.close(); } }\n\n1\n\nAdd some explanation with answer for how this answer help OP in fixing current issue\n\n\n\nThis is my copy-paste version:\n\n@SuppressWarnings(""empty-statement"") public static byte[] inputStreamToByte(InputStream is) throws IOException { if (is == null) { return null; } // Define a size if you have an idea of it. ByteArrayOutputStream r = new ByteArrayOutputStream(2048); byte[] read = new byte[512]; // Your buffer size. for (int i; -1 != (i = is.read(read)); r.write(read, 0, i)); is.close(); return r.toByteArray(); }\n\nDaniel De LeónDaniel De León\n\n1\n\nWhile this code snippet may solve the question, including an explanation really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion. import sun.misc.IOUtils; ... InputStream in = ...; byte[] buf = IOUtils.readFully(in, -1, false);\n\n1\n\nsun.misc.IOUtils is not “Java 7”. It’s a proprietary, implementation specific class that may not be present in other JRE implementations and can disappear without any warning in one of the next releases. You can try Cactoos:\n\nbyte[] array = new BytesOf(stream).bytes();\n\nHere is an optimized version, that tries to avoid copying data bytes as much as possible:\n\nprivate static byte[] loadStream (InputStream stream) throws IOException { int available = stream.available(); int expectedSize = available > 0 ? available : -1; return loadStream(stream, expectedSize); } private static byte[] loadStream (InputStream stream, int expectedSize) throws IOException { int basicBufferSize = 0x4000; int initialBufferSize = (expectedSize >= 0) ? expectedSize : basicBufferSize; byte[] buf = new byte[initialBufferSize]; int pos = 0; while (true) { if (pos == buf.length) { int readAhead = -1; if (pos == expectedSize) { readAhead = stream.read(); // test whether EOF is at expectedSize if (readAhead == -1) { return buf; } } int newBufferSize = Math.max(2 * buf.length, basicBufferSize); buf = Arrays.copyOf(buf, newBufferSize); if (readAhead != -1) { buf[pos++] = (byte)readAhead; } } int len = stream.read(buf, pos, buf.length - pos); if (len < 0) { return Arrays.copyOf(buf, pos); } pos += len; } }\n\nChristian d\'HeureuseChristian d\'Heureuse\n\n5,Solution in Kotlin (will work in Java too, of course), which includes both cases of when you know the size or not:\n\nfun InputStream.readBytesWithSize(size: Long): ByteArray? { return when { size < 0L -> this.readBytes() size == 0L -> ByteArray(0) size > Int.MAX_VALUE -> null else -> { val sizeInt = size.toInt() val result = ByteArray(sizeInt) readBytesIntoByteArray(result, sizeInt) result } } } fun InputStream.readBytesIntoByteArray(byteArray: ByteArray,bytesToRead:Int=byteArray.size) { var offset = 0 while (true) { val read = this.read(byteArray, offset, bytesToRead - offset) if (read == -1) break offset += read if (offset >= bytesToRead) break } }\n\nIf you know the size, it saves you on having double the memory used compared to the other solutions (in a brief moment, but still could be useful). That\'s because you have to read the entire stream to the end, and then convert it to a byte array (similar to ArrayList which you convert to just an array). So, if you are on Android, for example, and you got some Uri to handle, you can try to get the size using this:\n\nfun getStreamLengthFromUri(context: Context, uri: Uri): Long { context.contentResolver.query(uri, arrayOf(MediaStore.MediaColumns.SIZE), null, null, null)?.use { if (!it.moveToNext()) return@use val fileSize = it.getLong(it.getColumnIndex(MediaStore.MediaColumns.SIZE)) if (fileSize > 0) return fileSize } //if you wish, you can also get the file-path from the uri here, and then try to get its size, using this: https://stackoverflow.com/a/61835665/878126 FileUtilEx.getFilePathFromUri(context, uri, false)?.use { val file = it.file val fileSize = file.length() if (fileSize > 0) return fileSize } context.contentResolver.openInputStream(uri)?.use { inputStream -> if (inputStream is FileInputStream) return inputStream.channel.size() else { var bytesCount = 0L while (true) { val available = inputStream.available() if (available == 0) break val skip = inputStream.skip(available.toLong()) if (skip < 0) break bytesCount += skip } if (bytesCount > 0L) return bytesCount } } return -1L }\n\nandroid developerandroid developer\n\n1.3kHighly active question. Earn 10 reputation (not counting the association bonus) in order to answer this question.""""""']",0.3125,0.571428571
net,Socket,Sending compressed JPG image over socket,['Therefore  you have to create a bunch of different threads if your server has a bunch of open <code>Socket</code>s.</p>\n<p>A <code>SocketChannel</code> is a non-blocking way to read from sockets  so that you can have one thread communicate with a bunch of open connections at once.\nBuffer</code>s are another feature of NIO that allows you to access the underlying data from reads and writes to avoid the overhead of copying data into new arrays.</p>\n<p>In a nutshell  up to Java 1.3  all I/O was of the blocking type.\n<p>The basic point of NIO  introduced in Java 1.4  was to make the functionality of traditional UNIX-style multiplexed non-blocking I/O available in Java.\nServers with threadpools  or with threads handling more than one connection each  now become possible.\nIf only part of a buffer can be written immediately  with blocking I/O your thread will simply block until the entirety can be written.\nWith non-blocking I/O  your thread gets a return value of how much was written  leaving it up to you to handle the left-over for the next round.\nA <code>Buffer</code> takes care of such mechanical details by explicitly implementing a producer/consumer pattern for filling and draining  it being understood that your threads and the JVM s kernel will <em>not</em>\nSelectors</code>  if one channel takes 1 seconds for processing  and there are 10 channels in queue  it means you have to wait 10 seconds before next polling which is untolerable.\npattern  the task is smaller  it s more like thread-per-task  and tasks could be read  write  biz process etc. for more detail  you can take a look at <strong>\n<p>If you are really fancy at one thread  the bottom-line is at least you shold have pooled I/O threads  because I/O operations is often oders of magnitude slower than instruction-processing cycles  you would not want the precious one thread being blocked by I/O  and this is exactly <strong>NodeJS</strong>\nI don t think so  NIO programming is complex  and multi-threads is not naturally evil  Keep in mind that modern operating systems and CPU s become better and better at multitasking  so the overheads of multithreading becomes smaller over time.</p>'],"['Actually the code looks ok. Here\'s a complete code, that works fine on my machine:\n\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.net.*;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.*;\n\npublic class Server {\n  public static void main(String[] args) throws Exception {\n    BufferedImage screencapture = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));\n    try (ServerSocket serv = new ServerSocket(25000)) {\n      System.out.println(""waiting..."");\n      try (Socket socket = serv.accept()) {\n        System.out.println(""client connected"");\n        ImageIO.write(screencapture, ""jpg"", socket.getOutputStream());\n        System.out.println(""sent"");\n      }\n    }\n  }\n}\n\nclass Client {\n  public static void main(String[] args) throws Exception {\n    try(Socket socket = new Socket(""localhost"", 25000)){\n      BufferedImage image = ImageIO.read(socket.getInputStream());\n      JLabel label = new JLabel(new ImageIcon(image));\n      JFrame f = new JFrame(""vnc"");\n      f.getContentPane().add(label);\n      f.pack();\n      f.setVisible(true);\n    }\n  }\n}\nThough this will only work if you close the socket after sending the images. It will fail if you\'ll just try to send a few images over the same socket. See https://stackoverflow.com/a/6973863/211205.']","['""""""Sending compressed JPG image over socket\n\nI am trying to create a program with Java which takes a screenshot of the user\'s screen, compresses the image, and sends it to a server over sockets. For some reason the image is saved corrupted in the end (it\'s unreadable). Can you maybe help me find what the problem could be? CLIENT: (the screenshot is entered as a BufferedImage, and the returned byte array is then returned to the second function which sends it to the server)\n\npublic static byte[] compressImage(BufferedImage image) throws IOException { System.out.println(""starting compression""); ByteArrayOutputStream os = new ByteArrayOutputStream(37628); float quality = 0.16f; // create a BufferedImage as the result of decoding the supplied InputStream // get all image writers for JPG format Iterator<ImageWriter> writers = ImageIO.getImageWritersByFormatName(""jpg""); //Iterator iter = ImageIO.getImageWritersByFormatName(""jpeg""); if (!writers.hasNext()) throw new IllegalStateException(""No writers found""); ImageWriter writer = (ImageWriter) writers.next(); ImageOutputStream ios = ImageIO.createImageOutputStream(os); writer.setOutput(ios); ImageWriteParam param = writer.getDefaultWriteParam(); // compress to a given quality param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT); param.setCompressionQuality(quality); // appends a complete image stream containing a single image and //associated stream and image metadata and thumbnails to the output writer.write(null, new IIOImage(image, null, null), param); os.flush(); return os.toByteArray(); } public void uploadShot(byte[] imgData, String nickname) { try { /* Try to connect to the server on localhost, port 5555 */ Socket sk = new Socket(""localhost"", 23232); OutputStream output = sk.getOutputStream(); /* Send filename to server */ OutputStreamWriter outputStream = new OutputStreamWriter(sk.getOutputStream()); outputStream.write(nickname + ""\\n""); outputStream.flush(); /* Get response from server */ BufferedReader inReader = new BufferedReader(new InputStreamReader(sk.getInputStream())); String serverStatus = inReader.readLine(); // Read the first line /* If server is ready, send the file */ if (serverStatus.equals(""READY"")){ int len = imgData.length; int start = 0; if (len < 0) throw new IllegalArgumentException(""Negative length not allowed""); if (start < 0 || start >= imgData.length) throw new IndexOutOfBoundsException(""Out of bounds: "" + start); // Other checks if needed. // May be better to save the streams in the support class; // just like the socket variable. OutputStream out = sk.getOutputStream(); DataOutputStream dos = new DataOutputStream(out); dos.writeInt(len); if (len > 0) { dos.write(imgData, start, len); } dos.close(); output.close(); sk.close(); System.out.println(""Transfer complete.""); } } catch (Exception ex){ /* Catch any errors */ System.out.println(ex.getMessage()); } }\n\nSERVER: (the received image is saved to the folder mentioned with a timestamp)\n\npublic static void main(String args[]) throws Exception{ System.out.println(""Server running...""); /* Listen on port 5555 */ ServerSocket server = new ServerSocket(23232); /* Accept the sk */ Socket sk = server.accept(); System.out.println(""Server accepted client""); InputStream input = sk.getInputStream(); BufferedReader inReader = new BufferedReader(new InputStreamReader(sk.getInputStream())); BufferedWriter outReader = new BufferedWriter(new OutputStreamWriter(sk.getOutputStream())); /* Read the filename */ String nickname = inReader.readLine(); if ( !nickname.equals("""") ){ /* Reply back to client with READY status */ outReader.write(""READY\\n""); outReader.flush(); } String current = ""/home/kasgel/screenshots""; DateFormat dateFormat = new SimpleDateFormat(""dd-MM-yyyy__HH:mm:ss""); Date timestamp = new Date(); File filename = new File(current + ""/"" + nickname + ""-"" + dateFormat.format(timestamp) + "".jpg""); if (!filename.exists()) { filename.createNewFile(); } FileOutputStream wr = new FileOutputStream(filename); byte[] buffer = new byte[sk.getReceiveBufferSize()]; int bytesReceived = 0; while((bytesReceived = input.read(buffer))>0) { wr.write(buffer,0,bytesReceived); } wr.close(); }\n\nAnd the error message which I get when opening the saved screenshot is the following: display.im6: Not a JPEG file: starts with 0x00 0x03 `MyNick-30-03-2015__19:27:58.jpg\' @ error/jpeg.c/JPEGErrorHandler/316. 2\n\nSend some known data and compare.""""""']",0.3125,0.024390244
sql,Connection,Authentication during connection to MongoDB server instance using Java,['could allow a malicious proxy to perform a MITM attack to get the plaintext password  so it is False by default and must be explicitly enabled.</p> <p>See <a href= https://mysql-net.github.io/MySqlConnector/connection-options/  rel= noreferrer >MySQL .NET Connection String Options</a></p> <p>you could also try adding <code>useSSL=false</code>\n<li><code>allowPublicKeyRetrieval=true</code> = to allow the client to automatically request the public key from the server.\n<p>The defaults for initiating a connection to a MySQL server were changed in the recent past  and (from a quick look through the most popular questions and answers on stack overflow) the new values are causing a lot of confusion.\nWhat is worse is that the standard advice seems to be to disable SSL altogether  which is a bit of a disaster in the making.</p>\n<p>Now  if your connection is genuinely not exposed to the network (localhost only) or you are working in a non-production environment with no real data  then sure: there s no harm in disabling SSL by including the option <code>useSSL=false</code>.</p>\n<p>For everyone else  the following set of options are required to get SSL working with certificate and host verification:</p>\n<p>As an added bonus  seeing as you re already playing with the options  it is simple to disable the weak SSL protocols too:</p>\n<p>First  make sure you have a valid certificate generated for the MySQL server host  and that the CA certificate is installed onto the client host (if you are using self-signed  then you ll likely need to do this manually  but for the popular public CAs it ll already be there).</p>\n<p>Next  make sure that the java keystore contains all the CA certificates.\n<p>Then finally  update the connection string to include all the required options  which on Debian/Ubuntu would be something a bit like (adapt as required):</p>'],"[""Following on from Bob Kuhar's accepted answer, in Mongo3 the mechanism has change to SHA1 from challenge response as shown in the code snippet. I need to update the code snippet as follows:\n\n...\nimport com.mongodb.MongoClient;\nimport com.mongodb.MongoCredential;\nimport com.mongodb.ServerAddress;\n...\n\n// Manage the mongo db connection...\nList<ServerAddress> seeds = new ArrayList<ServerAddress>();\nseeds.add( new ServerAddress(configuration.getMongoHost(), configuration.getMongoPort() ));\nList<MongoCredential> credentials = new ArrayList<MongoCredential>();\ncredentials.add(\n    MongoCredential.createScramSha1Credential(\n        configuration.getMongoUser(),\n        configuration.getMongoDb(),\n        configuration.getMongoPassword().toCharArray()\n    )\n);\nMongoClient mongo = new MongoClient( seeds, credentials );""]","['""""""Authentication during connection to MongoDB server instance using Java\n\n Is it possible to make something like :\n\nMongoClient mongo = new MongoClient(ip, port, usrName, password)\n\nin JAVA similar to the MongoVUE or other SQL based databases\' authentication method. There the authentication is done during connection to DB instance. I don\'t see an appropriate instance method in MongoClient java doc\n\nAnd the way in Authentication (Optional) Official docs\n\ndoesn\'t fit my goals, because it requires to change all the existing query methods in my application which don\'t use authentication now. The way in Authenticate to MongoDB with the Java Driver looks exactly what i need, but there\'s no com.mongodb.MongoCredential class in mongo 2.10.1 distribution. rokpoto.comrokpoto.com\n\n9,1\n\nHow about creating a wrapper for the instantiation of the Mongo client? – Alex Theedom Feb 18, 2014 at 16:54\n\nYou shouldn\'t need to change all your existing queries, you should only need to change the logic that establishes your MongoClient. Most applications do this as some sort of Singleton so adding authentication is just a matter of modifying the Singleton. It is a pain-in-the-butt that there isn\'t a signature that takes just String, String for username password, but its the Mongo Java API, get used to disappointment. You can either go the MongoURI path which gets you the shortest signature... MongoClient mongo = new MongoClient( new MongoClientURI( ""mongodb://app_user:bestPo55word3v3r@localhost/data"" ) );\n\nOr go with the more verbose List<MongoCredential> path\n\nList<ServerAddress> seeds = new ArrayList<ServerAddress>(); seeds.add( new ServerAddress( ""localhost"" ); List<MongoCredential> credentials = new ArrayList<MongoCredential>(); credentials.add( MongoCredential.createMongoCRCredential( ""app_user"", ""data"", ""bestPo55word3v3r"".toCharArray() ) ); MongoClient mongo = new MongoClient( seeds, credentials );\n\n6\n\nthanks. Can you say, please, which jar contains definition of MongoCredential type? – rokpoto.com Feb 18, 2014 at 17:14\n\nMongoClient is in the mongo-java-driver-2.11.3.jar, but the JavaDocs say its been there since 2.10.0. My project gets the JARs through gradle. – Bob Kuhar Feb 18, 2014 at 17:19\n\nI\'m confused. There\'s MongoClient, but not MongoCredential in mongo-2.10.1.jar. – rokpoto.com Feb 19, 2014 at 15:12\n\nBummer. You\'re screwed. If you are stuck with 2.10.1 than the MongoClientURI is your only path to Mongo Authentication. Looking again at the JavaDocs, it appears MongoCredential shows up at 2.11.0: api.mongodb.org/java/2.11.3/com/mongodb/MongoCredential.html. We are running 2.11.4 here and do our authentication through MongoCredentials. – Bob Kuhar Feb 19, 2014 at 17:06\n\n@Bob Kuhar: What about the port number port in the accepted solution? | Show 1 more comment\n\nFollowing on from Bob Kuhar\'s accepted answer, in Mongo3 the mechanism has change to SHA1 from challenge response as shown in the code snippet. I need to update the code snippet as follows:\n\n...""""""']",0.333333333,0.25
sql,Connection,How to get database url from java.sql.Connection?,['could allow a malicious proxy to perform a MITM attack to get the plaintext password  so it is False by default and must be explicitly enabled.</p> <p>See <a href= https://mysql-net.github.io/MySqlConnector/connection-options/  rel= noreferrer >MySQL .NET Connection String Options</a></p> <p>you could also try adding <code>useSSL=false</code>\n<li><code>allowPublicKeyRetrieval=true</code> = to allow the client to automatically request the public key from the server.\n<p>The defaults for initiating a connection to a MySQL server were changed in the recent past  and (from a quick look through the most popular questions and answers on stack overflow) the new values are causing a lot of confusion.\nWhat is worse is that the standard advice seems to be to disable SSL altogether  which is a bit of a disaster in the making.</p>\n<p>Now  if your connection is genuinely not exposed to the network (localhost only) or you are working in a non-production environment with no real data  then sure: there s no harm in disabling SSL by including the option <code>useSSL=false</code>.</p>\n<p>For everyone else  the following set of options are required to get SSL working with certificate and host verification:</p>\n<p>As an added bonus  seeing as you re already playing with the options  it is simple to disable the weak SSL protocols too:</p>\n<p>First  make sure you have a valid certificate generated for the MySQL server host  and that the CA certificate is installed onto the client host (if you are using self-signed  then you ll likely need to do this manually  but for the popular public CAs it ll already be there).</p>\n<p>Next  make sure that the java keystore contains all the CA certificates.\n<p>Then finally  update the connection string to include all the required options  which on Debian/Ubuntu would be something a bit like (adapt as required):</p>'],['I believe you can use the DatabaseMetaData object from the Connection and then get the URL. Try:\n\nDatabaseMetaData dmd = connection.getMetaData();\nString url = dmd.getURL();'],"['"""""" How to get database url from java.sql.Connection? For given Connection instance how do I find out url that the Connection uses to connect the database ? Is it somewhere in Properties returned by Connection.getClientInfo() method? If there you need me to provide clearer description all comments are welcome. Thank you\n\nConnection has the getMetaData() to return DatabaseMetaData . DatabaseMetaData has the getURL() to return the URL for this DBMS. 3\n\nIs there way to get it without metadata because if connections fails this code isnt work\n\n\n\ndo you think it makes sense that if you cannot connect to the server but can also get the information from the server ? ..... It dependes on your needs.I need to access only datasource url info in runtime.DirverManagedDatasource has getUrl method and give this info without any server request\n\n\n\nI believe you can use the DatabaseMetaData object from the Connection and then get the URL. Try:\n\nDatabaseMetaData dmd = connection.getMetaData(); String url = dmd.getURL();\n\n6,Lucas de OliveiraLucas de Oliveira\n\n1,Inside the Connection object, you have an object of type DatabaseMetaData, it contains a lot of information about the database. Lucas de Oliveira gave you a good example of code. And here is the documentation of the object : Interface DatabaseMetaData\n\n1\n\nWelcome to SO. Please consider add a link to DatabaseMetaData javadoc. connection.getClientInfo() has all the details related to connection. It returns a properties object. You can retrieve the value of ""password"" property to fetch the password that was used for the connection object. Please let me know if this solves your problem.""""""']",0.333333333,1
sql,Connection,How to get database schema name when using oracle jdbc connection?,['could allow a malicious proxy to perform a MITM attack to get the plaintext password  so it is False by default and must be explicitly enabled.</p> <p>See <a href= https://mysql-net.github.io/MySqlConnector/connection-options/  rel= noreferrer >MySQL .NET Connection String Options</a></p> <p>you could also try adding <code>useSSL=false</code>\n<li><code>allowPublicKeyRetrieval=true</code> = to allow the client to automatically request the public key from the server.\n<p>The defaults for initiating a connection to a MySQL server were changed in the recent past  and (from a quick look through the most popular questions and answers on stack overflow) the new values are causing a lot of confusion.\nWhat is worse is that the standard advice seems to be to disable SSL altogether  which is a bit of a disaster in the making.</p>\n<p>Now  if your connection is genuinely not exposed to the network (localhost only) or you are working in a non-production environment with no real data  then sure: there s no harm in disabling SSL by including the option <code>useSSL=false</code>.</p>\n<p>For everyone else  the following set of options are required to get SSL working with certificate and host verification:</p>\n<p>As an added bonus  seeing as you re already playing with the options  it is simple to disable the weak SSL protocols too:</p>\n<p>First  make sure you have a valid certificate generated for the MySQL server host  and that the CA certificate is installed onto the client host (if you are using self-signed  then you ll likely need to do this manually  but for the popular public CAs it ll already be there).</p>\n<p>Next  make sure that the java keystore contains all the CA certificates.\n<p>Then finally  update the connection string to include all the required options  which on Debian/Ubuntu would be something a bit like (adapt as required):</p>'],"['You can get schema name using\n\nConnection conn = \nDriverManager.getConnection(""jdbc:oracle:thin:@server:port:SID"",prop);    \nDatabaseMetaData databaseMetaData = conn.getMetaData();\nSystem.out.println(""schema name >>>> ""+databaseMetaData.getUserName());']","['""""""The answer unfortunately is that there are no consistent solutions. If John has access to Sally.Table ... the query will work but getUserName() will return John and not Sally schema. For Oracle the user owns their schema and while others may have access, that user ID is the default schema on that connection. Further, neither getSchemaName() nor getCatalog() will return the schema name. @horse_with_no_name has the closest answer for Oracle since a given user name is the (default) schema name unless overridden in object reference as shown. For other databases the same rules do not apply consistently. Darrell TeagueDarrell Teague\n\n4,You can get schema name using\n\nConnection conn = DriverManager.getConnection(""jdbc:oracle:thin:@server:port:SID"",prop); DatabaseMetaData databaseMetaData = conn.getMetaData(); System.out.println(""schema name >>>> ""+databaseMetaData.getUserName());\n\n""""""']",0.333333333,0.2
sql,Connection,Connect Java to a MySQL database,['could allow a malicious proxy to perform a MITM attack to get the plaintext password  so it is False by default and must be explicitly enabled.</p> <p>See <a href= https://mysql-net.github.io/MySqlConnector/connection-options/  rel= noreferrer >MySQL .NET Connection String Options</a></p> <p>you could also try adding <code>useSSL=false</code>\n<li><code>allowPublicKeyRetrieval=true</code> = to allow the client to automatically request the public key from the server.\n<p>The defaults for initiating a connection to a MySQL server were changed in the recent past  and (from a quick look through the most popular questions and answers on stack overflow) the new values are causing a lot of confusion.\nWhat is worse is that the standard advice seems to be to disable SSL altogether  which is a bit of a disaster in the making.</p>\n<p>Now  if your connection is genuinely not exposed to the network (localhost only) or you are working in a non-production environment with no real data  then sure: there s no harm in disabling SSL by including the option <code>useSSL=false</code>.</p>\n<p>For everyone else  the following set of options are required to get SSL working with certificate and host verification:</p>\n<p>As an added bonus  seeing as you re already playing with the options  it is simple to disable the weak SSL protocols too:</p>\n<p>First  make sure you have a valid certificate generated for the MySQL server host  and that the CA certificate is installed onto the client host (if you are using self-signed  then you ll likely need to do this manually  but for the popular public CAs it ll already be there).</p>\n<p>Next  make sure that the java keystore contains all the CA certificates.\n<p>Then finally  update the connection string to include all the required options  which on Debian/Ubuntu would be something a bit like (adapt as required):</p>'],"['To create database through Java code, you must use executeUpdate(sql) instead of executeQuery(sql); and connect to the mysql database as root:\n\nconnection =  DriverManager.getConnection(\n    ""jdbc:mysql://localhost:3306/mysql?zeroDateTimeBehavior=convertToNull"",\n    ""root"", ""root""\n);\nStatement st = connection.createStatement();\nst.executeUpdate(sql);\nst.close();']","['""""""Connect Java to a MySQL database\n\nHow do you connect to a MySQL database in Java? java.sql.SQLException: No suitable driver found for jdbc:mysql://database/table at java.sql.DriverManager.getConnection(DriverManager.java:689) at java.sql.DriverManager.getConnection(DriverManager.java:247)\n\njava.lang.ClassNotFoundException: com.mysql.jdbc.Driver\n\njava.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver\n\n9,1\n\nHere\'s a short 3-minute video tutorial that demonstrates using MySQL from Java. Check it out here: Quick Tutorial: Connecting to MySQL database using Java\n\n\n\nHere\'s a step by step explanation how to install MySQL and JDBC and how to use it:\n\nDownload and install the MySQL server. Just do it the usual way.""""""']",0.333333333,0.25
sql,Connection,Should you set up database connection properties in server.xml or context.xml,['could allow a malicious proxy to perform a MITM attack to get the plaintext password  so it is False by default and must be explicitly enabled.</p> <p>See <a href= https://mysql-net.github.io/MySqlConnector/connection-options/  rel= noreferrer >MySQL .NET Connection String Options</a></p> <p>you could also try adding <code>useSSL=false</code>\n<li><code>allowPublicKeyRetrieval=true</code> = to allow the client to automatically request the public key from the server.\n<p>The defaults for initiating a connection to a MySQL server were changed in the recent past  and (from a quick look through the most popular questions and answers on stack overflow) the new values are causing a lot of confusion.\nWhat is worse is that the standard advice seems to be to disable SSL altogether  which is a bit of a disaster in the making.</p>\n<p>Now  if your connection is genuinely not exposed to the network (localhost only) or you are working in a non-production environment with no real data  then sure: there s no harm in disabling SSL by including the option <code>useSSL=false</code>.</p>\n<p>For everyone else  the following set of options are required to get SSL working with certificate and host verification:</p>\n<p>As an added bonus  seeing as you re already playing with the options  it is simple to disable the weak SSL protocols too:</p>\n<p>First  make sure you have a valid certificate generated for the MySQL server host  and that the CA certificate is installed onto the client host (if you are using self-signed  then you ll likely need to do this manually  but for the popular public CAs it ll already be there).</p>\n<p>Next  make sure that the java keystore contains all the CA certificates.\n<p>Then finally  update the connection string to include all the required options  which on Debian/Ubuntu would be something a bit like (adapt as required):</p>'],"['A connection pool operates by performing the work of creating connections ahead of time. In the case of a JDBC connection pool, a pool of Connection objects is created at the time the application server starts. The client can access the connection object in connection pool and return the object to pool once the db work is completed.\n\nContext.xml\n\n   <Resource name=""jdbc/TestDB"" auth=""Container"" type=""javax.sql.DataSource"" \nmaxActive=""100"" maxIdle=""30"" maxWait=""10000"" username=""root"" password="""" \ndriverClassName=""com.mysql.jdbc.Driver""               \nurl=""jdbc:mysql://localhost:3306/cdcol""/>\n//This should be added in the servers context,xml file. For example if you are using apache server then the context.xml will be found in C:\\apache-tomcat-6.0.26\\conf\\Context.xml\n\nweb.xml\n\n  <resource-ref>\n      <description>DB Connection</description>\n      <res-ref-name>jdbc/TestDB</res-ref-name>\n      <res-type>javax.sql.DataSource</res-type>\n      <res-auth>Container</res-auth>\n  </resource-ref>\n//This should be added in the web.xml of the local project. (Not in server\'s web.xml).\n\nContext ctx=new InitialContext();\n          Context envContext = (Context)ctx.lookup(""java:comp/env"");\n          DataSource ds=(DataSource)envContext.lookup(""jdbc/TestDB"");//TestDB is the Database Name\n          con=ds.getConnection();\n          stmt = con.createStatement();']","['"""""" Should you set up database connection properties in server.xml or context.xml\n\nI am trying to set up the database connection properties using JNDI for a Spring web application. I am considering two approaches as below:\n\nIn your Spring configuration you may have something like:\n\n<jee:jndi-lookup id=""dataSource"" jndi-name=""java:comp/env/jdbc/facs""/>\n\nThen in your webapp /META-INF/context.xml file you should have something similar too:\n\n<?xml version=\'1.0\' encoding=\'utf-8\'?> <!-- antiResourceLocking=""true"" --> <Context path=""/podd-apn"" reloadable=""true"" cachingAllowed=""false"" antiResourceLocking=""true"" > <Resource name=""jdbc/facs"" type=""javax.sql.DataSource"" username=""${database.username}"" password=""${database.password}"" driverClassName=""org.postgresql.Driver"" url=""${database.url}"" maxActive=""8"" maxIdle=""4"" global=""jdbc/facs"" /> </Context>\n\nAnd in your web.xml you should something like:\n\n<!-- JNDI --> <resource-ref> <description>FACs Datasource</description> <res-ref-name>jdbc/facs</res-ref-name> <res-type>javax.sql.DataSource</res-type> <res-auth>Container</res-auth> </resource-ref>\n\nSetup in the Spring context like this:\n\n<jee:jndi-lookup id=""dbDataSource"" jndi-name=""jdbc/DatabaseName"" expected-type=""javax.sql.DataSource"" />\n\nYou can declare the JNDI resource in Tomcat\'s server.xml using something like this:\n\n<GlobalNamingResources> <Resource name=""jdbc/DatabaseName"" auth=""Container"" type=""javax.sql.DataSource"" username=""dbUsername"" password=""dbPasswd"" url=""jdbc:postgresql://localhost/dbname"" driverClassName=""org.postgresql.Driver"" initialSize=""5"" maxWait=""5000"" maxActive=""120"" maxIdle=""5"" validationQuery=""select 1"" poolPreparedStatements=""true""/> </GlobalNamingResources/>\n\nAnd reference the JNDI resource from Tomcat\'s web context.xml like this:\n\n<ResourceLink name=""jdbc/DatabaseName"" global=""jdbc/DatabaseName"" type=""javax.sql.DataSource""/>\n\nMy question is where is the best place to keep database properties? Should they be placed in server.xml or context.xml?""""""', '""""""7\n\nThanks for ur answer. if i place all the properties in our applications META-INF/context.xml? is it best place to keep? I do not think that placing some properties value INSIDE (for exampl in META-INF/context.xml) the application is a good approach, because then you have to recompile and deploy the application if the properties changes. - So this would be nearly the same like using no properties at all and placing the values directly in the spring config.xml\n\nThen which is the recommended place to keep them? I would just add, instead of defining these for all apps using context.xml.default, you can use application-specific context configuration files, like yourapp.xml in the same folder, which allows you to point two deployments of the same war to different databases. Not a helpful answer.""""""']",0.333333333,0.041666667
sql,ResultSet,HSQLDB delete row(s) from JDBC resultset,['<p>That s correct  initially the <code>ResultSet</code> s cursor is pointing to before the first row  if the first call to <code>next()</code> returns <code>false</code>\n<p>If you want to report an empty set  add a variable counting the items read.\n<p>The  check for any results  call ResultSet.next() moves the cursor to the first row  so use the do {...} while() syntax to process that row while continuing to process remaining rows returned by the loop.</p>\nUse  do...while  to process the first row  while continuing to process remaining rows\n<p>According to the most viable answer the suggestion is to use  isBeforeFirst() .\nYou check whether there is something in your  resultset  and don t advance your cursor.\nYou can also just call isBeforeFirst() to test if there are any rows returned without advancing the cursor  then proceed normally.\nFirst generates an exception if done on a resultset from type  forward only .\nalways moves to the next row  so if you are planning on doing any reading from the result set you need to take that into account.</p>\nAlthough there are methods for  backing up   they are not supported for all types of result sets.</p>\n<p>(Edited as @martin comments below; the OP code as written would not compile because <code>iVal</code> is not initialised)</p>\n<p>You could create an utility method to retrieve an optional value of any Java type from a given ResultSet  previously casted.</p>\n<p>Unfortunately  getObject(columnName  Class) does not return null  but the default value for given Java type  so 2 calls are required </p>\nThere will be no zeros returned for empty value in the database</p>\n<p>For convenience  you can create a wrapper class around ResultSet that returns null values when <code>ResultSet</code>\n<p>In general  however  forwarding and rewinding cursors may be quite inefficient for large result sets.\nAnother option in SQL Server would be to calculate the total number of rows directly in your SQL statement:</p>\n<p>Most drivers support forward only resultset - so method like last  beforeFirst etc are not supported.</p>\n<p>The first approach is suitable if you are also getting the data in the same loop - otherwise the resultSet has already been iterated and can not be used again.</p>\n<p>In most cases the requirement is to get the number of rows a query would return without fetching the rows.\nIterating through the result set to find the row count is almost same as processing the data.\n<p>Your function will return the size of a ResultSet  but its cursor will be set after last record  so without rewinding it by calling beforeFirst()  first() or previous() you won t be able to read its rows  and rewinding methods won t work with forward only ResultSet (you ll get the same exception you re getting in your second code fragment).</p>\n<p>There are very few circumstances where the row count is actually needed prior to reading the result set  especially in a language like Java.\nThe only case I think of where a row count would be necessary is when the row count is the only data you need(in which case a count query would be superior).\nOtherwise  you are better off using a wrapper object to represent your table data  and storing these objects in a dynamic container such as an ArrayList.\nFor every solution that requires knowing the row count before reading the result set  you can probably think of a solution that does so without knowing the row count before reading without much effort.\nBy thinking of solutions that bypass the need to know the row count before processing  you save the ResultSet the trouble of scrolling to the end of the result set  then back to the beginning (which can be a VERY expensive operation for large result sets).\nFirst  you should never return a <code>HashMap</code>  which is a specific implementation.\nSo i save the current ResultSet position and restore it after i created the maps.</p>\nI reduced that to only one array-acces each for-loop iteration.'],"['Specify the cursor holdability in the code:\n\nc.prepareStatement(select,\n     ResultSet.TYPE_SCROLL_INSENSITIVE,\n     ResultSet.CONCUR_UPDATABLE,\n     ResultSet.HOLD_CURSORS_OVER_COMMIT);\nThe problem seems to be that HSQLDB JDBC driver uses ResultSet.CLOSE_CURSOS_AT_COMMIT as the default value.']","['""""""HSQLDB delete row(s) from JDBC resultset\n\nI have run into a couple of problems while trying to convert an existing JDBC application to use HSQLDB version 2.2.9 (Currently the codebase runs successfully on MySQL, ORACLE and SQLServer, but an embedded database seemed like a good option too). I will ask the questions one at a time and separately (although they all relate to the JDBC ResultSet.deleteRow() method, supported since HSQLDB 2.0)\n\nWhy does rs.next() return false after calling rs.deleteRow()? Here is a complete self contained code sample (including simple table creation, sample inserts, and deleting the table at the end):\n\nint deletedRows=0; try{ Connection c = DriverManager.getConnection(""jdbc:hsqldb:mem:mytestdb"", ""SA"", """"); String createSQL = ""create table test (num INTEGER PRIMARY KEY, str VARCHAR(25))""; Statement createStmt = c.createStatement(); createStmt.execute(createSQL); createStmt.close(); String ins = ""insert into test (num,str) values (?,?)""; PreparedStatement pStmt = c.prepareStatement(ins); for(int i=0; i<100; i++){ pStmt.setInt(1, i); pStmt.setString(2, ""String""+i); pStmt.execute(); } // there should now be 100 rows in the table String select = ""SELECT * FROM test""; PreparedStatement stmt = c.prepareStatement(select, ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); ResultSet rs = stmt.executeQuery(); rs.beforeFirst(); while(rs.next()){ int num = rs.getInt(""num""); if((num%7)==0){ System.out.println(""Deleting row:""+num); rs.deleteRow(); deletedRows++; } } Statement dropStmt = c.createStatement(); dropStmt.execute(""drop table test;""); dropStmt.close(); } catch (SQLException sqle) { System.out.println(""Deleted ""+deletedRows+ "" rows before exception: ""+sqle.getMessage()); sqle.printStackTrace(); }\n\nWhen running the same code on MySQL database, the output shows that every 7th row is deleted:\n\nOn HSQLDB, the output is:\n\nThe rs.next() returns false after the first call to rs.deleteRow(). I cannot find any information in the HSQLDB javadoc. Does anyone have any ideas? RudolphEstRudolphEst\n\n1,3\n\nBy the way, I know I could do the same deletion using a simple SQL delete statement, but that is not an option in the actual existing code (the deletion is not quite as simple as the example, and requires DB implementation specific SQL). It sounds like a bug in the HSQLDB implementation of ResultSet.deleteRow(). – Mark Rotteveel Mar 1, 2013 at 14:06\n\nThat is what I am thinking too, but I cannot find such a bug report. I\'ll have a look again and ask their dev team. As I also commented before, this sounds like a bug in the HSQLDB JDBC implementation. The JDBC 4.1 spec (section 15.2.4.2) says:\n\nAfter the method deleteRow has been called, the cursor will be positioned before the next valid row. If the deleted row is the last row, the cursor will be positioned after the last row. This implies that the call to next() should have returned true (if the ResultSet contained more rows). Mark RotteveelMark Rotteveel\n\nSpecify the cursor holdability in the code:\n\nc.prepareStatement(select, ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE, ResultSet.HOLD_CURSORS_OVER_COMMIT);\n\nThe problem seems to be that HSQLDB JDBC driver uses ResultSet.CLOSE_CURSORS_AT_COMMIT as the default value. RudolphEstRudolphEst\n\n1,Most likely, you have a misconfiguation.""""""', '""""""For example you may have an older version of the HSQLDB jar in your classpath. I get this output with the current SVN code. The JDBC code has not changed since 2.2.9. Deleting row:0 Deleting row:7 Deleting row:14 Deleting row:21 Deleting row:28 Deleting row:35 Deleting row:42 Deleting row:49 Deleting row:56 Deleting row:63 Deleting row:70 Deleting row:77 Deleting row:84 Deleting row:91 Deleting row:98\n\n2\n\nI ran it on the 2.2.9 jar as well as on the 2.2.9 source and got the problem. It looks like the default cursor holdability is CLOSE_CURSORS_AT_COMMIT and not HOLD_CURSORS_OVER_COMMIT as it should be. If c.prepareStatement(select, ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE, ResultSet.HOLD_CURSORS_OVER_COMMIT) is used, the code works as expected. Maybe there should be a not in the JavaDoc for HSQLDB at least... I think we should continue this discussion on the HSQLDB forums. I\'ll add my own answer and be done with it here...""""""']",0.131578947,0.333333333
sql,ResultSet,How to programmatically create a Java ResultSet from custom data with no database,['<p>That s correct  initially the <code>ResultSet</code> s cursor is pointing to before the first row  if the first call to <code>next()</code> returns <code>false</code>\n<p>If you want to report an empty set  add a variable counting the items read.\n<p>The  check for any results  call ResultSet.next() moves the cursor to the first row  so use the do {...} while() syntax to process that row while continuing to process remaining rows returned by the loop.</p>\nUse  do...while  to process the first row  while continuing to process remaining rows\n<p>According to the most viable answer the suggestion is to use  isBeforeFirst() .\nYou check whether there is something in your  resultset  and don t advance your cursor.\nYou can also just call isBeforeFirst() to test if there are any rows returned without advancing the cursor  then proceed normally.\nFirst generates an exception if done on a resultset from type  forward only .\nalways moves to the next row  so if you are planning on doing any reading from the result set you need to take that into account.</p>\nAlthough there are methods for  backing up   they are not supported for all types of result sets.</p>\n<p>(Edited as @martin comments below; the OP code as written would not compile because <code>iVal</code> is not initialised)</p>\n<p>You could create an utility method to retrieve an optional value of any Java type from a given ResultSet  previously casted.</p>\n<p>Unfortunately  getObject(columnName  Class) does not return null  but the default value for given Java type  so 2 calls are required </p>\nThere will be no zeros returned for empty value in the database</p>\n<p>For convenience  you can create a wrapper class around ResultSet that returns null values when <code>ResultSet</code>\n<p>In general  however  forwarding and rewinding cursors may be quite inefficient for large result sets.\nAnother option in SQL Server would be to calculate the total number of rows directly in your SQL statement:</p>\n<p>Most drivers support forward only resultset - so method like last  beforeFirst etc are not supported.</p>\n<p>The first approach is suitable if you are also getting the data in the same loop - otherwise the resultSet has already been iterated and can not be used again.</p>\n<p>In most cases the requirement is to get the number of rows a query would return without fetching the rows.\nIterating through the result set to find the row count is almost same as processing the data.\n<p>Your function will return the size of a ResultSet  but its cursor will be set after last record  so without rewinding it by calling beforeFirst()  first() or previous() you won t be able to read its rows  and rewinding methods won t work with forward only ResultSet (you ll get the same exception you re getting in your second code fragment).</p>\n<p>There are very few circumstances where the row count is actually needed prior to reading the result set  especially in a language like Java.\nThe only case I think of where a row count would be necessary is when the row count is the only data you need(in which case a count query would be superior).\nOtherwise  you are better off using a wrapper object to represent your table data  and storing these objects in a dynamic container such as an ArrayList.\nFor every solution that requires knowing the row count before reading the result set  you can probably think of a solution that does so without knowing the row count before reading without much effort.\nBy thinking of solutions that bypass the need to know the row count before processing  you save the ResultSet the trouble of scrolling to the end of the result set  then back to the beginning (which can be a VERY expensive operation for large result sets).\nFirst  you should never return a <code>HashMap</code>  which is a specific implementation.\nSo i save the current ResultSet position and restore it after i created the maps.</p>\nI reduced that to only one array-acces each for-loop iteration.'],"['Why you are getting ""Closed resultset:next"" error, see here:\n\nWhy am I getting ResultSet is closed error when I never closed any\n\nI suppose you are not using some ORM framework like Hibernate.\n\nIn this case, map the resultset data in the DAO or build an object mapper yourself, which maps the ResultSet to a some Data Transfer Object. Then pass this object to the createExcel() method.\n\nSomething like this:\n\nResultSet rs = myDao.getResult();\nList<ExcelDto> excelDtos = new ArrayList<>();\nExcelDto excelDto;\nwhile (rs.next()) {      \n    excelDto = new ExcelDto();    \n    dto.setXCol(rs.getString(""XColumn""))\n    excelDtos.add(dto);  \n}\nexcelCreator.createExcel(excelDtos);\nThen in the excelCreator you can work with an ArrayList instead of ResultSet.']","['""""""How to programmatically create a Java ResultSet from custom data with no database\n\nI have some existing code that accepts a java.sql.ResultSet that contains info retrieved from an Oracle database. I would now like to reuse this code, but I\'d like to pass it a ResultSet object that I create myself from some in-memory data that is not affiliated with any database. Is there an existing Java framework class that I can use for this? ResultSet has tons of methods, so implementing my own class for this seemed like overkill, even though I could ignore most of the methods for my specific case. I was thinking of something along the lines of the old Microsoft ADO recordset object, where I could create the fields and then populate the row data for each field. This seemed like an easily googlable question, but I\'ve been unable to find any good pointers. Chris FarmerChris Farmer\n\n1\n\nThis could help as well: stackoverflow.com/questions/878848/…\n\n– Andreas Dolk Jan 12, 2010 at 22:32\n\nCreate your own AbstractResultSet class, one that (like AbstractQueue) implements all methods by throwing UnsupportedOperationException (Eclipse autogenerates these methods in a split second). Now extend AbstractResultSet. The subclass can override only the methods you\'re interested in implementing. Joel ShemtovJoel Shemtov\n\n3,2\n\nThanks.""""""']",0.131578947,0.875
sql,ResultSet,Retrieve column names from java.sql.ResultSet,['<p>That s correct  initially the <code>ResultSet</code> s cursor is pointing to before the first row  if the first call to <code>next()</code> returns <code>false</code>\n<p>If you want to report an empty set  add a variable counting the items read.\n<p>The  check for any results  call ResultSet.next() moves the cursor to the first row  so use the do {...} while() syntax to process that row while continuing to process remaining rows returned by the loop.</p>\nUse  do...while  to process the first row  while continuing to process remaining rows\n<p>According to the most viable answer the suggestion is to use  isBeforeFirst() .\nYou check whether there is something in your  resultset  and don t advance your cursor.\nYou can also just call isBeforeFirst() to test if there are any rows returned without advancing the cursor  then proceed normally.\nFirst generates an exception if done on a resultset from type  forward only .\nalways moves to the next row  so if you are planning on doing any reading from the result set you need to take that into account.</p>\nAlthough there are methods for  backing up   they are not supported for all types of result sets.</p>\n<p>(Edited as @martin comments below; the OP code as written would not compile because <code>iVal</code> is not initialised)</p>\n<p>You could create an utility method to retrieve an optional value of any Java type from a given ResultSet  previously casted.</p>\n<p>Unfortunately  getObject(columnName  Class) does not return null  but the default value for given Java type  so 2 calls are required </p>\nThere will be no zeros returned for empty value in the database</p>\n<p>For convenience  you can create a wrapper class around ResultSet that returns null values when <code>ResultSet</code>\n<p>In general  however  forwarding and rewinding cursors may be quite inefficient for large result sets.\nAnother option in SQL Server would be to calculate the total number of rows directly in your SQL statement:</p>\n<p>Most drivers support forward only resultset - so method like last  beforeFirst etc are not supported.</p>\n<p>The first approach is suitable if you are also getting the data in the same loop - otherwise the resultSet has already been iterated and can not be used again.</p>\n<p>In most cases the requirement is to get the number of rows a query would return without fetching the rows.\nIterating through the result set to find the row count is almost same as processing the data.\n<p>Your function will return the size of a ResultSet  but its cursor will be set after last record  so without rewinding it by calling beforeFirst()  first() or previous() you won t be able to read its rows  and rewinding methods won t work with forward only ResultSet (you ll get the same exception you re getting in your second code fragment).</p>\n<p>There are very few circumstances where the row count is actually needed prior to reading the result set  especially in a language like Java.\nThe only case I think of where a row count would be necessary is when the row count is the only data you need(in which case a count query would be superior).\nOtherwise  you are better off using a wrapper object to represent your table data  and storing these objects in a dynamic container such as an ArrayList.\nFor every solution that requires knowing the row count before reading the result set  you can probably think of a solution that does so without knowing the row count before reading without much effort.\nBy thinking of solutions that bypass the need to know the row count before processing  you save the ResultSet the trouble of scrolling to the end of the result set  then back to the beginning (which can be a VERY expensive operation for large result sets).\nFirst  you should never return a <code>HashMap</code>  which is a specific implementation.\nSo i save the current ResultSet position and restore it after i created the maps.</p>\nI reduced that to only one array-acces each for-loop iteration.'],"['You can use the the ResultSetMetaData (http://java.sun.com/javase/6/docs/api/java/sql/ResultSetMetaData.html) object for that, like this:\n\nResultSet rs = stmt.executeQuery(""SELECT * FROM table"");\nResultSetMetaData rsmd = rs.getMetaData();\nString firstColumnName = rsmd.getColumnName(1);']","['""""""Retrieve column names from java.sql.ResultSet\n\nWith java.sql.ResultSet is there a way to get a column\'s name as a String by using the column\'s index? I had a look through the API doc but I can\'t find anything. 1.1m3.6k3.6kYou can get this info from the ResultSet metadata. See ResultSetMetaData\n\nResultSet rs = stmt.executeQuery(""SELECT a, b, c FROM TABLE2""); ResultSetMetaData rsmd = rs.getMetaData(); String name = rsmd.getColumnName(1);\n\nand you can get the column name from there. If you do\n\nselect x as y from table\n\nthen rsmd.getColumnLabel() will get you the retrieved label name too. Brian AgnewBrian Agnew\n\n6\n\nSee also rsmd.getColumnLabel if you retrieves columns with labels (for example SELECT columnName AS ColumnLabel\n\n\n\nYou may be surprised as me seeing column count starting at 1. You can iterate through column names with for (int i = 1; i <= rsmd.getColumnCount(); i++) String name = rsmd.getColumnName(i);\n\n\n\nDoes getColumnName() return the original column name if not using AS alias naming? @membersound Yes, as documented in its Javadoc: ""If a SQL AS is not specified, the value returned from getColumnLabel will be the same as the value returned by the getColumnName method."". In almost all case you should use getColumnLabel instead of getColumnName. This will fail if table is empty. | Show 1 more comment\n\nIn addition to the above answers, if you\'re working with a dynamic query and you want the column names but do not know how many columns there are, you can use the ResultSetMetaData object to get the number of columns first and then cycle through them. Amending Brian\'s code:\n\nResultSet rs = stmt.executeQuery(""SELECT a, b, c FROM TABLE2""); ResultSetMetaData rsmd = rs.getMetaData(); int columnCount = rsmd.getColumnCount(); // The column count starts from 1 for (int i = 1; i <= columnCount; i++ ) { String name = rsmd.getColumnName(i); // Do stuff with name }\n\n5,2\n\nisn\'t this right? for (int i = 1; i <= columnCount + 1; i++ ) { ... }\n\n\n\n@Martin No, because that will attempt to get Column n + 1 that doesn\'t exist. If you want to be absolutely concise, then it\'d be i <= columnCount. You can use the the ResultSetMetaData (http://java.sun.com/javase/6/docs/api/java/sql/ResultSetMetaData.html) object for that, like this:\n\nResultSet rs = stmt.executeQuery(""SELECT * FROM table""); ResultSetMetaData rsmd = rs.getMetaData(); String firstColumnName = rsmd.getColumnName(1);\n\n2\n\nthanx it helped me... i used it as: resultSet.getString(resultSet.findColumn(""fullname""))\n\n\n\nLimit the records fetched to 1. Otherwise if the table is too big, unnecessary overhead then. Eg for teradatabase: use query ""SELECT * FROM table SAMPLE 1""\n\n\n\nThis question is old and so are the correct previous answers. But what I was looking for when I found this topic was something like this solution.""""""', '""""""Glad this helped you! The SQL statements that read data from a database query return the data in a result set. The SELECT statement is the standard way to select rows from a database and view them in a result set. The **java.sql.ResultSet** interface represents the result set of a database query. Get methods: used to view the data in the columns of the current row being pointed to by the cursor. Using MetaData of a result set to fetch the exact column count\n\nResultSet rs = stmt.executeQuery(""SELECT a, b, c FROM TABLE2""); ResultSetMetaData rsmd = rs.getMetaData(); int numberOfColumns = rsmd.getColumnCount(); boolean b = rsmd.isSearchable(1);\n\nhttp://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html\n\nand further more to bind it to data model table\n\npublic static void main(String[] args) { Connection conn = null; Statement stmt = null; try { //STEP 2: Register JDBC driver Class.forName(""com.mysql.jdbc.Driver""); //STEP 3: Open a connection System.out.println(""Connecting to a selected database...""); conn = DriverManager.getConnection(DB_URL, USER, PASS); System.out.println(""Connected database successfully...""); //STEP 4: Execute a query System.out.println(""Creating statement...""); stmt = conn.createStatement(); String sql = ""SELECT id, first, last, age FROM Registration""; ResultSet rs = stmt.executeQuery(sql); //STEP 5: Extract data from result set while(rs.next()){ //Retrieve by column name int id = rs.getInt(""id""); int age = rs.getInt(""age""); String first = rs.getString(""first""); String last = rs.getString(""last""); //Display values System.out.print(""ID: "" + id); System.out.print("", Age: "" + age); System.out.print("", First: "" + first); System.out.println("", Last: "" + last); } rs.close(); } catch(SQLException se) { //Handle errors for JDBC se.printStackTrace(); } catch(Exception e) { //Handle errors for Class.forName e.printStackTrace(); } finally { //finally block used to close resources try { if(stmt!=null) conn.close(); } catch(SQLException se) { } // do nothing try { if(conn!=null) conn.close(); } catch(SQLException se) { se.printStackTrace(); } //end finally try }//end try System.out.println(""Goodbye!""); }//end main //end JDBCExample\n\nvery nice tutorial here : http://www.tutorialspoint.com/jdbc/\n\nResultSetMetaData meta = resultset.getMetaData(); // for a valid resultset object after executing query Integer columncount = meta.getColumnCount(); int count = 1 ; // start counting from 1 always String[] columnNames = null; while(columncount <=count) { columnNames [i] = meta.getColumnName(i); } System.out.println (columnNames.size() ); //see the list and bind it to TableModel object. the to your jtbale.setModel(your_table_model);\n\nMiss Chanandler Bong\n\n4,Develop4LifeDevelop4Life\n\n7,Incase your table is empty and you still need to get table column names you can get your column as type Vector,see the following:\n\nResultSet rs = stmt.executeQuery(""SELECT a, b, c FROM TABLE2""); ResultSetMetaData rsmd = rs.getMetaData(); int columnCount = rsmd.getColumnCount(); Vector<Vector<String>>tableVector = new Vector<Vector<String>>(); boolean isTableEmpty = true; int col = 0; while(rs.next()) { isTableEmpty = false; //set to false since rs.next has data: this means the table is not empty if(col != columnCount) { for(int x = 1;x <= columnCount;x++){ Vector<String> tFields = new Vector<String>(); tFields.add(rsmd.getColumnName(x).toString()); tableVector.add(tFields); } col = columnCount; } } //if table is empty then get column names only if(isTableEmpty){ for(int x=1;x<=colCount;x++){ Vector<String> tFields = new Vector<String>(); tFields.add(rsmd.getColumnName(x).toString()); tableVector.add(tFields); } } rs.close(); stmt.close(); return tableVector;\n\n1,ResultSet rsTst = hiSession.connection().prepareStatement(queryStr).executeQuery(); ResultSetMetaData meta = rsTst.getMetaData(); int columnCount = meta.getColumnCount(); // The column count starts from 1 String nameValuePair = """"; while (rsTst.next()) { for (int i = 1; i < columnCount + 1; i++ ) { String name = meta.getColumnName(i); // Do stuff with name String value = rsTst.getString(i); //.getObject(1); nameValuePair = nameValuePair + name + ""="" +value + "",""; //nameValuePair = nameValuePair + "", ""; } nameValuePair = nameValuePair+""||"" + ""\\t""; }\n\n2,If you want to use spring jdbctemplate and don\'t want to deal with connection staff, you can use following:\n\njdbcTemplate.query(""select * from books"", new RowCallbackHandler() { public void processRow(ResultSet resultSet) throws SQLException { ResultSetMetaData rsmd = resultSet.getMetaData(); for (int i = 1; i <= rsmd.getColumnCount(); i++ ) { String name = rsmd.getColumnName(i); // Do stuff with name } } });\n\nselins sofaselins sofa\n\nU can get column name and value from resultSet.getMetaData(); This code work for me:\n\nConnection conn = null; PreparedStatement preparedStatement = null; try { Class.forName(""com.mysql.cj.jdbc.Driver""); conn = MySQLJDBCUtil.getConnection(); preparedStatement = conn.prepareStatement(sql); if (params != null) { for (int i = 0; i < params.size(); i++) { preparedStatement.setObject(i + 1, params.get(i).getSqlValue()); } ResultSet resultSet = preparedStatement.executeQuery(); ResultSetMetaData md = resultSet.getMetaData(); while (resultSet.next()) { int counter = md.getColumnCount(); String colName[] = new String[counter]; Map<String, Object> field = new HashMap<>(); for (int loop = 1; loop <= counter; loop++) { int index = loop - 1; colName[index] = md.getColumnLabel(loop); field.put(colName[index], resultSet.getObject(colName[index])); } rows.add(field); } } } catch (SQLException e) { e.printStackTrace(); } finally { if (preparedStatement != null) { try { preparedStatement.close(); }catch (Exception e1) { e1.printStackTrace(); } } if (conn != null) { try { conn.close(); } catch (SQLException e) { e.printStackTrace(); } } } return rows;\n\n君主不是你君主不是你\n\nI know, this question is already answered but probably somebody like me needs to access a column name from DatabaseMetaData by label instead of index:\n\nResultSet resultSet = null; DatabaseMetaData metaData = null; try { metaData = connection.getMetaData(); resultSet = metaData.getColumns(null, null, tableName, null); while (resultSet.next()){ String name = resultSet.getString(""COLUMN_NAME""); } }\n\nPavlo RozbytskyiPavlo Rozbytskyi\n\nWe spent a sprint addressing your requests — here’s how it went\n\nUpcoming initiatives on Stack Overflow and across the Stack Exchange network... 20 Java ResultSet - get Column name based on Index\n\n11 Java - How to get Column name on Result Set\n\n0 how to get a column name from resultset in java\n\n0 Print out entire table with column names\n\n1 How to get data with column names/headers in java JDBC\n\n0 How to get column name list from java.sql.ResultSet\n\n-1 How can I print the column names from 3 tables joining JDBC? 0 how to get all the columns of a specific table ucanaccess\n\n0 Retrieve data from SQL database based on user input using JDBC? 2 Java retrieving results from database\n\nSee more linked questions\n\n7 getting column names in JDBC\n\n55 JDBC ResultSet get columns with table alias\n\n0 Java ResultSet get Returned Field Names\n\n2 How to get a column by alias/label from Java\'s ResultSet? 1 Get/Set column names after join\n\n7 Returning just column names of ResultSet without actually performing the query (Oracle and Java)\n\n61 Print the data in ResultSet along with column names\n\n0 Retrieving column names from a table without using ResultSetMetaData\n\n1 How to print the whole column from resultset? 0 Java: How to retrieve SQL resultSet data through column name? Hot Network Questions\n\nParadox in Prisoner\'s dilemma\n\nWhat does ""..and make joyful the hearing of my wife with your approach"" mean? On the Lipschitz constant outside the stretch set\n\nDoes physical reality exist without an observer? The use of Bio-weapons as a deterrent? Fill the triangular grid using the digits 1-9 subject to the constraints provided\n\nWhat does ""I\'ll do, I\'ll do, and I\'ll do"" mean? Has a rocket engine ever been reused by a second/third stage\n\nOlder brother licking younger sister\'s legs\n\nIterating over the contents of a file\n\nWhy do the Fourier components of a piano note shift away from the harmonic series? Why does RBF rule #3 exist? Difficult time in life\n\nIs this a potentially more intuitive approach to MergeSort? I feel guilty about past behavior in my college\n\nAny philosophical works that explicitly address the heat death of the Universe and its philosophical implications? Positive sum can always be presented as a sum with strictly positive incremental sub-sums\n\nDo all Brauer relations for finite groups vanish under the augmentation map? The (apparently) same sequence of symbols in an Aikido diploma results in weirdly different translations in Google Translator.""""""']",0.131578947,0.25
util,ArrayList,How to sort a Map by Value (ArrayList) size in Java?,['The list returned from asList has <strong>fixed size</strong>.\nSo  if you want to be able to add or remove elements from the returned list in your code  you ll need to wrap it in a new <code>ArrayList</code>.\nThe list returned from <code>asList()</code> is backed by the original array.\nIf you modify the original array  the list will be modified as well.\nhttps://github.com/google/guava/wiki/CollectionUtilitiesExplained#static-constructors  rel= noreferrer >factory methods</a> allow the types to be inferred most of the time.\nBut it s not the only reason (and Java 7 isn t everywhere yet): the shorthand syntax is also very handy  and the methods initializers  as seen above  allow to write more expressive code.\nUse the JDK s <a href= https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html  rel= noreferrer ><code>Arrays</code></a> class and its <a href= https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html#asList(T...)  rel= noreferrer ><code>asList()</code></a>\nAPI s methods by way of simply extending an <code>AbstractList</code>\n(so  adding or removing elements is unsupported)  however it allows calls to <code>set()</code> to override elements.\nstatic factory method in order to create a <code>List</code> literal.\nFilling twice a big list is exactly what you don t want to do because it will create another <code>Object[]</code> array each time the capacity needs to be extended.</p>\n<p>Fortunately the JDK implementation is fast and <code>Arrays.asList(a[])</code> is very well done.\nArrayList where the Object[] data points directly to the array.</p>\n<pre><code>// in Arrays @SafeVarargs public static &lt;T&gt; List&lt;T&gt; asList(T... a) {     return new ArrayList&lt;&gt;(a); } //still in Arrays  creating a private unseen class private static class ArrayList&lt;E&gt;\n<p>The dangerous side is that <strong>if you change the initial array  you change the List !</strong>\n<p><strong>Summary</strong> <code>ArrayList</code> with <code>ArrayDeque</code> are preferable in <em>many</em> more use-cases than <code>LinkedList</code>.\nIn <code>LinkedList</code> inserting an element takes O(n) time and accessing also takes O(n) time but <code>LinkedList</code> uses more memory than <code>ArrayList</code>.</p> <p><code>LinkedList</code> and <code>ArrayList</code> are two different implementations of the <code>List</code> interface.\nAs with standard linked list and array operations  the various methods will have different algorithmic runtimes.</p> <p>For <a href= https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html  rel= noreferrer ><code>LinkedList&lt;E&gt;</code></a></p> <ul> <li><code>get(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>getFirst()</code> and <code>getLast()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>add(int index  E element)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>addFirst()</code> and <code>addLast()</code>/<code>add()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>removeFirst()</code> and <code>removeLast()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>Iterator.remove()</code> is <em>O(1)</em>. <strong>\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>ListIterator.add(E element)</code> is <em>O(1)</em>. <strong>\nsteps in the worst case (start of list)</sup></p> <p><code>LinkedList&lt;E&gt;</code> allows for constant-time insertions or removals <em>using iterators</em>  but only sequential access of elements.\nIn other words  you can walk the list forwards or backwards  but finding a position in the list takes time proportional to the size of the list.\nJavadoc says <em>&quot;operations that index into the list will traverse the list from the beginning or the end  whichever is closer&quot;</em>  so those methods are <em>O(n)</em>\n(<em>n/4</em> steps) on average  though <em>O(1)</em> for <code>index = 0</code>.</p> <p><code>ArrayList&lt;E&gt;</code>  on the other hand  allow fast random read access  so you can grab any element in constant time.\nBut adding or removing from anywhere but the end requires shifting all the latter elements over  either to make an opening or fill the gap.\nIterating over either kind of List is practically equally cheap.\nIn an array list  the remainder of the array needs to be <em>moved</em> (i.e. copied).\nthe desired position can be computed mathematically and accessed in <em>O(1)</em>.</p> <p>\nAnother benefit of using a <code>LinkedList</code> arises when you add or remove from the head of the list  since those operations are <em>O(1)</em>  while they are <em>O(n)</em> for <code>ArrayList</code>.\nLinkedList</code> for adding and removing from the head  but it is not a <code>List</code>.</p> <p>\nAlso  if you have large lists  keep in mind that memory usage is also different.\nEach element of a <code>LinkedList</code> has more overhead since pointers to the next and previous elements are also stored.\nThe default initial capacity of an <code>ArrayList</code> is pretty small (10 from Java 1.4 - 1.8).\nBut since the underlying implementation is an array  the array must be resized if you add a lot of elements.\nTo avoid the high cost of resizing when you know you re going to add a lot of elements  construct the <code>ArrayList</code>\nIf the data structures perspective is used to understand the two structures  a LinkedList is basically a sequential data structure which contains a head Node.\nThe Node is a wrapper for two components : a value of type T [accepted through generics] and another reference to the Node linked to it.\nAddition of elements takes linear time in LinkedList as stated above.</p> <p>An ArrayList is a growable array.\nUnder the hood  when an element is added  and the ArrayList is already full to capacity  it creates another array with a size which is greater than previous size.\nThe elements are then copied from previous array to new one and the elements that are to be added are also placed at the specified indices.</p>\n<p>Thus far  nobody seems to have addressed the memory footprint of each of these lists besides the general consensus that a <code>LinkedList</code> is  lots more  than an <code>ArrayList</code>\nIn practice  the capacity of the backing array in an <code>ArrayList</code> is generally larger than its current element count.</p>\nAs CompressedOops is default now from mid JDK6 and up  the values below for 64-bit machines will basically match their 32-bit counterparts  unless of course you specifically turn it off.</p>\n<p>The result clearly shows that <code>LinkedList</code> is a whole lot more than <code>ArrayList</code>  especially with a very high element count.\nNote the reason for the mods is because all objects in java will take up a multiple of 8 bytes space regardless of whether it is all used or not.</p>\nAny indexed operation requires a traversal  i.e. has O(n) performance.\nThis is not obvious in the source code  leading to algorithms O(n) slower than if <code>ArrayList</code> was used.</li> <li>\n<p>ArrayLists are good for write-once-read-many or appenders  but bad at add/remove from the front or middle.</p>\nAs someone who has been doing operational performance engineering on very large scale SOA web services for about a decade  I would prefer the behavior of LinkedList over ArrayList.\nWhile the steady-state throughput of LinkedList is worse and therefore might lead to buying more hardware -- the behavior of ArrayList under pressure could lead to apps in a cluster expanding their arrays in near synchronicity and for large array sizes could lead to lack of responsiveness in the app and an outage  while under pressure  which is catastrophic behavior.</p>\n<p>Similarly  you can get better throughput in an app from the default throughput tenured garbage collector  but once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts and failures in SOA apps and blows your SLAs if it occurs too often.\nEven though the CMS collector takes more resources and does not achieve the same raw throughput  it is a much better choice because it has more predictable and smaller latency.</p> <p>\nArrayList is only a better choice for performance if all you mean by performance is throughput and you can ignore latency.\nI d like to add that ArrayList will optimize for sequential reading of memory and minimize cache-line and TLB misses  etc.\nThe copying overhead when the array grows past the bounds is likely inconsequential by comparison (and can be done by efficient CPU operations).\nThe only situations where a LinkedList might make sense would be something highly contrived where you had thousands of Lists any one of which might grow to be GB-sized  but where no good guess could be made at allocation-time of the List and setting them all to GB-sized would blow up the heap.\nAnd if you found some problem like that  then it really does call for reengineering whatever your solution is (and I don t like to lightly suggest reengineering old code because I myself maintain piles and piles of old code  but that d be a very good case of where the original design has simply run out of runway and does need to be chucked).\nThere are some very specific algorithms where a LinkedList is called for  but those are very  very rare and the algorithm will usually specifically depend on LinkedList s ability to insert and delete elements in the middle of the list relatively quickly  once you ve navigated there with a ListIterator.</p>\n<p>There is one common use case in which LinkedList outperforms ArrayList: that of a queue.\nHowever  if your goal is performance  instead of LinkedList you should also consider using an ArrayBlockingQueue (if you can determine an upper bound on your queue size ahead of time  and can afford to allocate all the memory up front)  or this <a href= http://www.javaspecialists.eu/archive/Issue027.html  rel= noreferrer >CircularArrayList implementation</a>.\n<code>LinkedList</code> is fast for appending or deleting large elements at the ends of a list  but slow to access a specific element.\n<p>Edit/Remove is faster in <code>LinkedList</code> than <code>ArrayList</code>.</p>\n<p><code>ArrayList</code>  backed by <code>Array</code>  which needs to be double the size  is worse in large volume application.</p>\n//Note: ArrayList is 26 time faster here than LinkedList for addAll()\n//Note: ArrayList is 9 times faster than LinkedList for add sequentially\n//Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.\n//Note: LinkedList is 10 millisecond faster than ArrayList while removing item.\n//Note: Linked List is 500 Milliseconds faster than ArrayList\n<p><code>ArrayList</code> is essentially an array.\n<code>LinkedList</code> is implemented as a double linked list.\n<p>The <code>get</code> is pretty clear. O(1) for <code>ArrayList</code>  because <code>ArrayList</code> allow random access by using index.\nO(n) for <code>LinkedList</code>  because it needs to find the index first.\n<p><code>LinkedList</code> is faster in add and remove  but slower in get.\n<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>'],"[""If you are using java-8, here's also a way to do this:\n\nList<String> keys = unsortedMap.entrySet()\n                   .stream()\n                   .sorted((e1, e2) -> Integer.compare(e2.getValue().size(), e1.getValue().size()))\n                   .map(Map.Entry::getKey)\n                   .collect(Collectors.toList());\nSystem.out.println(keys); //[C, A, B]\nWhat it does is:\n\nget a Stream of the entries of your map\nsort the entries by the the size of each arraylist\nmap each entry to its corresponding key\ncollect the result in a List\nIf you want you could also write the sorted line as :\n\n.sorted(Comparator.comparing(e -> e.getValue().size(), Comparator.reverseOrder()))""]","['""""""How to sort a Map by Value (ArrayList) size in Java? I have the following Map:\n\nMap<String, List<String>> map = new HashMap<String, List<String>>();\n\nwhich is filled with pairs of keys and values. For example: key = student name and value = family members names. I want to sort the map by the size of the list of strings. I have tried implementing Comparator with a TreeMap but I got an error so I switched back to HashMap. Any ideas? 6\n\nTreeMap with Comparator is the way to go IMO.. What was your error? Just to reinforce the message of other answers, you can\'t sort a HashMap (or, generally speaking, a Map). You\'d have to use specific versions of Map that support sorting. TreeMap seems like the best shot to sort by values. TreeMap sorts by key, not value. I can\'t mark it as such, but this is an exact duplicate of stackoverflow.com/questions/8896679/ Yeah, I have seen there are other similar questions but I haven\'t found one with a List as a value for the Map. And that\'s a little different. | Show 1 more comment\n\nYou should use the HashMap unordered, and then each time you want to order, put all the values of the HashMap into a TreeMap, using a Comparator that has the HashMap as a variable. Then, for each key you compare, you get the value of the HashMap (the list) and check the list size. So you compare by the list sizes, returning -1, 0 or 1 depending on the case. Once you finish what you need, you discard that TreeMap. If you try to use only a TreeMap, then you\'ll see that you are ordering the keys according to a value that is not a property of such key. In this case, the length of the value (a list). So, there may exist a function that increases the length of the list, and the TreeMap won\'t even notice. public class ListSizeComparator implements Comparator<String> { private final Map<String, List<String>> map; public ListSizeComparator(final Map<String, List<String>> map) { this.map = map; } @Override public int compare(String s1, String s2) { //Here I assume both keys exist in the map. List<String> list1 = this.map.get(s1); List<String> list2 = this.map.get(s2); Integer length1 = list1.size(); Integer length2 = list2.size(); return length1.compareTo(length2); } }\n\n8,5\n\nI\'m not sure I understand what you mean. Could you elaborate on how the compare method would look like? Hey, thanks! I tried TreeMap<String, List<String>> sorter = new TreeMap(new ListSizeComparator(map)); but it didn\'t work. When I try to print the map I get nothing. Because you need to fill the treemap after the constructor. sorter.putAll(map);\n\nI just changed the return of the compare method, because if the lengths are the same, one of the two entries won\'t be inserted into the treemap. Otherwise it works!""""""', '""""""Without explaining that, the comment doesn\'t do much good, unfortunately. We can simply use Collections.max() and Collections.min() method. public class MaxList { public static void main(String[] args) { List l = new ArrayList(); l.add(1); l.add(2); l.add(3); l.add(4); l.add(5); System.out.println(Collections.max(l)); // 5 System.out.println(Collections.min(l)); // 1 } }\n\nBhavin ShahBhavin Shah\n\n1,0\n\nComparator.comparing\n\nIn Java 8, Collections have been enhanced by using lambda. So finding max and min can be accomplished as follows, using Comparator.comparing:\n\nList<Integer> ints = Stream.of(12, 72, 54, 83, 51).collect(Collectors.toList()); System.out.println(""the list: ""); ints.forEach((i) -> { System.out.print(i + "" ""); }); System.out.println(""""); Integer minNumber = ints.stream() .min(Comparator.comparing(i -> i)).get(); Integer maxNumber = ints.stream() .max(Comparator.comparing(i -> i)).get(); System.out.println(""Min number is "" + minNumber); System.out.println(""Max number is "" + maxNumber);\n\nthe list: 12 72 54 83 51 Min number is 12 Max number is 83\n\n1.2kKick ButtowskiKick Buttowski\n\n6,Integer class implements Comparable.So we can easily get the max or min value of the Integer list. public int maxOfNumList() { List<Integer> numList = new ArrayList<>(); numList.add(1); numList.add(10); return Collections.max(numList); }\n\nIf a class does not implements Comparable and we have to find max and min value then we have to write our own Comparator. List<MyObject> objList = new ArrayList<MyObject>(); objList.add(object1); objList.add(object2); objList.add(object3); MyObject maxObject = Collections.max(objList, new Comparator<MyObject>() { @Override public int compare(MyObject o1, MyObject o2) { if (o1.getValue() == o2.getValue()) { return 0; } else if (o1.getValue() > o2.getValue()) { return -1; } else if (o1.getValue() < o2.getValue()) { return 1; } return 0; } });\n\nAvijit KarmakarAvijit Karmakar\n\n9,There is no particularly efficient way to find the maximum value in an unsorted list -- you just need to check them all and return the highest value. Brendan LongBrendan Long\n\n3\n\nwhat about this Integer i = Collections.max(arrayList). it returns the highest value in my case whether i am not very sure. what you say? @user1010399 - This does exactly what I\'m saying -- It checks every value and returns the highest one. ok, alright. thanks. i was bit confused between this collections method & sorting algorithm. Here are three more ways to find the maximum value in a list, using streams:\n\nList<Integer> nums = Arrays.asList(-1, 2, 1, 7, 3); Optional<Integer> max1 = nums.stream().reduce(Integer::max); Optional<Integer> max2 = nums.stream().max(Comparator.naturalOrder()); OptionalInt max3 = nums.stream().mapToInt(p->p).max(); System.out.println(""max1: "" + max1.get() + "", max2: "" + max2.get() + "", max3: "" + max3.getAsInt());\n\nAll of these methods, just like Collections.max, iterate over the entire collection, hence they require time proportional to the size of the collection. Ida BucićIda Bucić\n\nAs integers are comparable we can use the following one liner in:\n\nList<Integer> ints = Stream.of(22,44,11,66,33,55).collect(Collectors.toList()); Integer max = ints.stream().mapToInt(i->i).max().orElseThrow(NoSuchElementException::new); //66 Integer min = ints.stream().mapToInt(i->i).min().orElseThrow(NoSuchElementException::new); //11\n\nAnother point to note is we cannot use Funtion.identity() in place of i->i as mapToInt expects ToIntFunction which is a completely different interface and is not related to Function. Moreover this interface has only one method applyAsInt and no identity() method. akhil_mittalakhil_mittal\n\narrayList.stream() .reduce(Integer::max) .get()\n\nlasclockerlasclocker\n\nHere is the fucntion\n\npublic int getIndexOfMax(ArrayList<Integer> arr){ int MaxVal = arr.get(0); // take first as MaxVal int indexOfMax = -1; //returns -1 if all elements are equal for (int i = 0; i < arr.size(); i++) { //if current is less then MaxVal if(arr.get(i) < MaxVal ){ MaxVal = arr.get(i); // put it in MaxVal indexOfMax = i; // put index of current Max } } return indexOfMax; }\n\npackage in.co.largestinarraylist; import java.util.ArrayList; import java.util.Scanner; public class LargestInArrayList { public static void main(String[] args) { int n; ArrayList<Integer> L = new ArrayList<Integer>(); int max; Scanner in = new Scanner(System.in); System.out.println(""Enter Size of Array List""); n = in.nextInt(); System.out.println(""Enter elements in Array List""); for (int i = 0; i < n; i++) { L.add(in.nextInt()); } max = L.get(0); for (int i = 0; i < L.size(); i++) { if (L.get(i) > max) { max = L.get(i); } } System.out.println(""Max Element: "" + max); in.close(); } }\n\n2,Tarun JadhavTarun Jadhav\n\nIn addition to gotomanners answer, in case anyone else came here looking for a null safe solution to the same problem, this is what I ended up with\n\nCollections.max(arrayList, Comparator.nullsFirst(Comparator.naturalOrder()))\n\nChris JohansenChris Johansen\n\nmodel =list.stream().max(Comparator.comparing(Model::yourSortList)).get();\n\nMehmet OnarMehmet Onar\n\nThey\'re many ways to find the maximum. But there will be no noticeable difference in performance unless the collection is huge. List<Integer> integers = Arrays.asList(1, 2, 3, 4, 5); System.out.println( integers.stream().max(Integer::compare).get() ); System.out.println( integers.stream().mapToInt(Integer::intValue).max().getAsInt() ); System.out.println( integers.stream().max(Comparator.comparing(i -> i)).get() ); System.out.println( integers.stream().reduce((a, b) -> a > b ? a : b).get() ); System.out.println( integers.stream().reduce(Integer.MIN_VALUE, (a, b) -> a > b ? a : b) );\n\nThe max method expects a Comparator as a parameter. The reduce method expects a BinaryOperator as a parameter. Gayan WeerakuttiGayan Weerakutti\n\ndepending on the size of your array a multithreaded solution might also speed up things\n\n2,1\n\nThis sounds more like a comment than an actual answer to the question. """"""']",0.04950495,0.428571429
util,ArrayList,How to convert comma-separated String to ArrayList?,['The list returned from asList has <strong>fixed size</strong>.\nSo  if you want to be able to add or remove elements from the returned list in your code  you ll need to wrap it in a new <code>ArrayList</code>.\nThe list returned from <code>asList()</code> is backed by the original array.\nIf you modify the original array  the list will be modified as well.\nhttps://github.com/google/guava/wiki/CollectionUtilitiesExplained#static-constructors  rel= noreferrer >factory methods</a> allow the types to be inferred most of the time.\nBut it s not the only reason (and Java 7 isn t everywhere yet): the shorthand syntax is also very handy  and the methods initializers  as seen above  allow to write more expressive code.\nUse the JDK s <a href= https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html  rel= noreferrer ><code>Arrays</code></a> class and its <a href= https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html#asList(T...)  rel= noreferrer ><code>asList()</code></a>\nAPI s methods by way of simply extending an <code>AbstractList</code>\n(so  adding or removing elements is unsupported)  however it allows calls to <code>set()</code> to override elements.\nstatic factory method in order to create a <code>List</code> literal.\nFilling twice a big list is exactly what you don t want to do because it will create another <code>Object[]</code> array each time the capacity needs to be extended.</p>\n<p>Fortunately the JDK implementation is fast and <code>Arrays.asList(a[])</code> is very well done.\nArrayList where the Object[] data points directly to the array.</p>\n<pre><code>// in Arrays @SafeVarargs public static &lt;T&gt; List&lt;T&gt; asList(T... a) {     return new ArrayList&lt;&gt;(a); } //still in Arrays  creating a private unseen class private static class ArrayList&lt;E&gt;\n<p>The dangerous side is that <strong>if you change the initial array  you change the List !</strong>\n<p><strong>Summary</strong> <code>ArrayList</code> with <code>ArrayDeque</code> are preferable in <em>many</em> more use-cases than <code>LinkedList</code>.\nIn <code>LinkedList</code> inserting an element takes O(n) time and accessing also takes O(n) time but <code>LinkedList</code> uses more memory than <code>ArrayList</code>.</p> <p><code>LinkedList</code> and <code>ArrayList</code> are two different implementations of the <code>List</code> interface.\nAs with standard linked list and array operations  the various methods will have different algorithmic runtimes.</p> <p>For <a href= https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html  rel= noreferrer ><code>LinkedList&lt;E&gt;</code></a></p> <ul> <li><code>get(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>getFirst()</code> and <code>getLast()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>add(int index  E element)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>addFirst()</code> and <code>addLast()</code>/<code>add()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>removeFirst()</code> and <code>removeLast()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>Iterator.remove()</code> is <em>O(1)</em>. <strong>\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>ListIterator.add(E element)</code> is <em>O(1)</em>. <strong>\nsteps in the worst case (start of list)</sup></p> <p><code>LinkedList&lt;E&gt;</code> allows for constant-time insertions or removals <em>using iterators</em>  but only sequential access of elements.\nIn other words  you can walk the list forwards or backwards  but finding a position in the list takes time proportional to the size of the list.\nJavadoc says <em>&quot;operations that index into the list will traverse the list from the beginning or the end  whichever is closer&quot;</em>  so those methods are <em>O(n)</em>\n(<em>n/4</em> steps) on average  though <em>O(1)</em> for <code>index = 0</code>.</p> <p><code>ArrayList&lt;E&gt;</code>  on the other hand  allow fast random read access  so you can grab any element in constant time.\nBut adding or removing from anywhere but the end requires shifting all the latter elements over  either to make an opening or fill the gap.\nIterating over either kind of List is practically equally cheap.\nIn an array list  the remainder of the array needs to be <em>moved</em> (i.e. copied).\nthe desired position can be computed mathematically and accessed in <em>O(1)</em>.</p> <p>\nAnother benefit of using a <code>LinkedList</code> arises when you add or remove from the head of the list  since those operations are <em>O(1)</em>  while they are <em>O(n)</em> for <code>ArrayList</code>.\nLinkedList</code> for adding and removing from the head  but it is not a <code>List</code>.</p> <p>\nAlso  if you have large lists  keep in mind that memory usage is also different.\nEach element of a <code>LinkedList</code> has more overhead since pointers to the next and previous elements are also stored.\nThe default initial capacity of an <code>ArrayList</code> is pretty small (10 from Java 1.4 - 1.8).\nBut since the underlying implementation is an array  the array must be resized if you add a lot of elements.\nTo avoid the high cost of resizing when you know you re going to add a lot of elements  construct the <code>ArrayList</code>\nIf the data structures perspective is used to understand the two structures  a LinkedList is basically a sequential data structure which contains a head Node.\nThe Node is a wrapper for two components : a value of type T [accepted through generics] and another reference to the Node linked to it.\nAddition of elements takes linear time in LinkedList as stated above.</p> <p>An ArrayList is a growable array.\nUnder the hood  when an element is added  and the ArrayList is already full to capacity  it creates another array with a size which is greater than previous size.\nThe elements are then copied from previous array to new one and the elements that are to be added are also placed at the specified indices.</p>\n<p>Thus far  nobody seems to have addressed the memory footprint of each of these lists besides the general consensus that a <code>LinkedList</code> is  lots more  than an <code>ArrayList</code>\nIn practice  the capacity of the backing array in an <code>ArrayList</code> is generally larger than its current element count.</p>\nAs CompressedOops is default now from mid JDK6 and up  the values below for 64-bit machines will basically match their 32-bit counterparts  unless of course you specifically turn it off.</p>\n<p>The result clearly shows that <code>LinkedList</code> is a whole lot more than <code>ArrayList</code>  especially with a very high element count.\nNote the reason for the mods is because all objects in java will take up a multiple of 8 bytes space regardless of whether it is all used or not.</p>\nAny indexed operation requires a traversal  i.e. has O(n) performance.\nThis is not obvious in the source code  leading to algorithms O(n) slower than if <code>ArrayList</code> was used.</li> <li>\n<p>ArrayLists are good for write-once-read-many or appenders  but bad at add/remove from the front or middle.</p>\nAs someone who has been doing operational performance engineering on very large scale SOA web services for about a decade  I would prefer the behavior of LinkedList over ArrayList.\nWhile the steady-state throughput of LinkedList is worse and therefore might lead to buying more hardware -- the behavior of ArrayList under pressure could lead to apps in a cluster expanding their arrays in near synchronicity and for large array sizes could lead to lack of responsiveness in the app and an outage  while under pressure  which is catastrophic behavior.</p>\n<p>Similarly  you can get better throughput in an app from the default throughput tenured garbage collector  but once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts and failures in SOA apps and blows your SLAs if it occurs too often.\nEven though the CMS collector takes more resources and does not achieve the same raw throughput  it is a much better choice because it has more predictable and smaller latency.</p> <p>\nArrayList is only a better choice for performance if all you mean by performance is throughput and you can ignore latency.\nI d like to add that ArrayList will optimize for sequential reading of memory and minimize cache-line and TLB misses  etc.\nThe copying overhead when the array grows past the bounds is likely inconsequential by comparison (and can be done by efficient CPU operations).\nThe only situations where a LinkedList might make sense would be something highly contrived where you had thousands of Lists any one of which might grow to be GB-sized  but where no good guess could be made at allocation-time of the List and setting them all to GB-sized would blow up the heap.\nAnd if you found some problem like that  then it really does call for reengineering whatever your solution is (and I don t like to lightly suggest reengineering old code because I myself maintain piles and piles of old code  but that d be a very good case of where the original design has simply run out of runway and does need to be chucked).\nThere are some very specific algorithms where a LinkedList is called for  but those are very  very rare and the algorithm will usually specifically depend on LinkedList s ability to insert and delete elements in the middle of the list relatively quickly  once you ve navigated there with a ListIterator.</p>\n<p>There is one common use case in which LinkedList outperforms ArrayList: that of a queue.\nHowever  if your goal is performance  instead of LinkedList you should also consider using an ArrayBlockingQueue (if you can determine an upper bound on your queue size ahead of time  and can afford to allocate all the memory up front)  or this <a href= http://www.javaspecialists.eu/archive/Issue027.html  rel= noreferrer >CircularArrayList implementation</a>.\n<code>LinkedList</code> is fast for appending or deleting large elements at the ends of a list  but slow to access a specific element.\n<p>Edit/Remove is faster in <code>LinkedList</code> than <code>ArrayList</code>.</p>\n<p><code>ArrayList</code>  backed by <code>Array</code>  which needs to be double the size  is worse in large volume application.</p>\n//Note: ArrayList is 26 time faster here than LinkedList for addAll()\n//Note: ArrayList is 9 times faster than LinkedList for add sequentially\n//Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.\n//Note: LinkedList is 10 millisecond faster than ArrayList while removing item.\n//Note: Linked List is 500 Milliseconds faster than ArrayList\n<p><code>ArrayList</code> is essentially an array.\n<code>LinkedList</code> is implemented as a double linked list.\n<p>The <code>get</code> is pretty clear. O(1) for <code>ArrayList</code>  because <code>ArrayList</code> allow random access by using index.\nO(n) for <code>LinkedList</code>  because it needs to find the index first.\n<p><code>LinkedList</code> is faster in add and remove  but slower in get.\n<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>'],"['Here is another one for converting CSV to ArrayList:\n\nString str=""string,with,comma"";\nArrayList aList= new ArrayList(Arrays.asList(str.split("","")));\nfor(int i=0;i<aList.size();i++)\n{\n    System.out.println("" -->""+aList.get(i));\n}\nPrints you\n\n-->string\n-->with\n-->comma']","['""""""How to convert comma-separated String to List? Is there any built-in method in Java which allows us to convert comma separated String to some container (e.g array, List or Vector)? Or do I need to write custom code for that? String commaSeparated = ""item1 , item2 , item3""; List<String> items = //method that converts above string into list?? 5\n\nIf you want to parse CSV see stackoverflow.com/questions/3908012/parsing-csv-in-java\n\n\n\n@Raedwald That\'s not what OP asked for though\n\n\n\nONLY ColinD\'s answer is correct here, assuming you want an ArrayList as in the question title. ArrayList (which is mutable) is totally different from List, which can be just a simple fixed list. @Fattie - fair point, and fixed that - stackoverflow.com/a/34735419/744133\n\n\n\nJava 8 solution: stackoverflow.com/a/46485179/1216775\n\n\n\nConvert comma separated String to List\n\nList<String> items = Arrays.asList(str.split(""\\\\s*,\\\\s*""));\n\nThe above code splits the string on a delimiter defined as: zero or more whitespace, a literal comma, zero or more whitespace which will place the words into the list and collapse any whitespace between the words and commas. Please note that this returns simply a wrapper on an array: you CANNOT for example .remove() from the resulting List. For an actual ArrayList you must further use new ArrayList<String>. 9\n\n@rosch Its a regular expression (regex). \\s matches any white space, The * applies the match zero or more times. So \\s* means ""match any white space zero or more times"". We look for this before and after the comma. Therefore, the split will work for strings like ""item1 , item2 , item3"", or ""item1,item2 ,item3"", etc. In Java, you need to escape the backslash in strings, so you get \\\\s*\n\n\n\n""[\\\\s,]+"" will also split on internal space within a comma separated token, it will treat both whitespace as a delimiter even when a comma is not present, instead of a comma plus any number of surrounding whitespace. ""\\\\s*(,\\\\s*)+"" will trim whitespace only around comma separated tokens, and also ignore any strings that are only whitespace or empty. As a side note: if you expect to get an empty list in case of an empty input string, then this method does not suit your use case. You will get a list with 1 element containing an empty string. @MadisPukkonen, you are absolutely right, but I respect the OP enough to assume that he can add such logic himself.""""""']",0.04950495,0.818181818
util,ArrayList,How to get ArrayList<Integer> and Scanner to play nice?,['The list returned from asList has <strong>fixed size</strong>.\nSo  if you want to be able to add or remove elements from the returned list in your code  you ll need to wrap it in a new <code>ArrayList</code>.\nThe list returned from <code>asList()</code> is backed by the original array.\nIf you modify the original array  the list will be modified as well.\nhttps://github.com/google/guava/wiki/CollectionUtilitiesExplained#static-constructors  rel= noreferrer >factory methods</a> allow the types to be inferred most of the time.\nBut it s not the only reason (and Java 7 isn t everywhere yet): the shorthand syntax is also very handy  and the methods initializers  as seen above  allow to write more expressive code.\nUse the JDK s <a href= https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html  rel= noreferrer ><code>Arrays</code></a> class and its <a href= https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html#asList(T...)  rel= noreferrer ><code>asList()</code></a>\nAPI s methods by way of simply extending an <code>AbstractList</code>\n(so  adding or removing elements is unsupported)  however it allows calls to <code>set()</code> to override elements.\nstatic factory method in order to create a <code>List</code> literal.\nFilling twice a big list is exactly what you don t want to do because it will create another <code>Object[]</code> array each time the capacity needs to be extended.</p>\n<p>Fortunately the JDK implementation is fast and <code>Arrays.asList(a[])</code> is very well done.\nArrayList where the Object[] data points directly to the array.</p>\n<pre><code>// in Arrays @SafeVarargs public static &lt;T&gt; List&lt;T&gt; asList(T... a) {     return new ArrayList&lt;&gt;(a); } //still in Arrays  creating a private unseen class private static class ArrayList&lt;E&gt;\n<p>The dangerous side is that <strong>if you change the initial array  you change the List !</strong>\n<p><strong>Summary</strong> <code>ArrayList</code> with <code>ArrayDeque</code> are preferable in <em>many</em> more use-cases than <code>LinkedList</code>.\nIn <code>LinkedList</code> inserting an element takes O(n) time and accessing also takes O(n) time but <code>LinkedList</code> uses more memory than <code>ArrayList</code>.</p> <p><code>LinkedList</code> and <code>ArrayList</code> are two different implementations of the <code>List</code> interface.\nAs with standard linked list and array operations  the various methods will have different algorithmic runtimes.</p> <p>For <a href= https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html  rel= noreferrer ><code>LinkedList&lt;E&gt;</code></a></p> <ul> <li><code>get(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>getFirst()</code> and <code>getLast()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>add(int index  E element)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>addFirst()</code> and <code>addLast()</code>/<code>add()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average)  but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case  you can also use <code>removeFirst()</code> and <code>removeLast()</code>).\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>Iterator.remove()</code> is <em>O(1)</em>. <strong>\nOne of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li> <li><code>ListIterator.add(E element)</code> is <em>O(1)</em>. <strong>\nsteps in the worst case (start of list)</sup></p> <p><code>LinkedList&lt;E&gt;</code> allows for constant-time insertions or removals <em>using iterators</em>  but only sequential access of elements.\nIn other words  you can walk the list forwards or backwards  but finding a position in the list takes time proportional to the size of the list.\nJavadoc says <em>&quot;operations that index into the list will traverse the list from the beginning or the end  whichever is closer&quot;</em>  so those methods are <em>O(n)</em>\n(<em>n/4</em> steps) on average  though <em>O(1)</em> for <code>index = 0</code>.</p> <p><code>ArrayList&lt;E&gt;</code>  on the other hand  allow fast random read access  so you can grab any element in constant time.\nBut adding or removing from anywhere but the end requires shifting all the latter elements over  either to make an opening or fill the gap.\nIterating over either kind of List is practically equally cheap.\nIn an array list  the remainder of the array needs to be <em>moved</em> (i.e. copied).\nthe desired position can be computed mathematically and accessed in <em>O(1)</em>.</p> <p>\nAnother benefit of using a <code>LinkedList</code> arises when you add or remove from the head of the list  since those operations are <em>O(1)</em>  while they are <em>O(n)</em> for <code>ArrayList</code>.\nLinkedList</code> for adding and removing from the head  but it is not a <code>List</code>.</p> <p>\nAlso  if you have large lists  keep in mind that memory usage is also different.\nEach element of a <code>LinkedList</code> has more overhead since pointers to the next and previous elements are also stored.\nThe default initial capacity of an <code>ArrayList</code> is pretty small (10 from Java 1.4 - 1.8).\nBut since the underlying implementation is an array  the array must be resized if you add a lot of elements.\nTo avoid the high cost of resizing when you know you re going to add a lot of elements  construct the <code>ArrayList</code>\nIf the data structures perspective is used to understand the two structures  a LinkedList is basically a sequential data structure which contains a head Node.\nThe Node is a wrapper for two components : a value of type T [accepted through generics] and another reference to the Node linked to it.\nAddition of elements takes linear time in LinkedList as stated above.</p> <p>An ArrayList is a growable array.\nUnder the hood  when an element is added  and the ArrayList is already full to capacity  it creates another array with a size which is greater than previous size.\nThe elements are then copied from previous array to new one and the elements that are to be added are also placed at the specified indices.</p>\n<p>Thus far  nobody seems to have addressed the memory footprint of each of these lists besides the general consensus that a <code>LinkedList</code> is  lots more  than an <code>ArrayList</code>\nIn practice  the capacity of the backing array in an <code>ArrayList</code> is generally larger than its current element count.</p>\nAs CompressedOops is default now from mid JDK6 and up  the values below for 64-bit machines will basically match their 32-bit counterparts  unless of course you specifically turn it off.</p>\n<p>The result clearly shows that <code>LinkedList</code> is a whole lot more than <code>ArrayList</code>  especially with a very high element count.\nNote the reason for the mods is because all objects in java will take up a multiple of 8 bytes space regardless of whether it is all used or not.</p>\nAny indexed operation requires a traversal  i.e. has O(n) performance.\nThis is not obvious in the source code  leading to algorithms O(n) slower than if <code>ArrayList</code> was used.</li> <li>\n<p>ArrayLists are good for write-once-read-many or appenders  but bad at add/remove from the front or middle.</p>\nAs someone who has been doing operational performance engineering on very large scale SOA web services for about a decade  I would prefer the behavior of LinkedList over ArrayList.\nWhile the steady-state throughput of LinkedList is worse and therefore might lead to buying more hardware -- the behavior of ArrayList under pressure could lead to apps in a cluster expanding their arrays in near synchronicity and for large array sizes could lead to lack of responsiveness in the app and an outage  while under pressure  which is catastrophic behavior.</p>\n<p>Similarly  you can get better throughput in an app from the default throughput tenured garbage collector  but once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts and failures in SOA apps and blows your SLAs if it occurs too often.\nEven though the CMS collector takes more resources and does not achieve the same raw throughput  it is a much better choice because it has more predictable and smaller latency.</p> <p>\nArrayList is only a better choice for performance if all you mean by performance is throughput and you can ignore latency.\nI d like to add that ArrayList will optimize for sequential reading of memory and minimize cache-line and TLB misses  etc.\nThe copying overhead when the array grows past the bounds is likely inconsequential by comparison (and can be done by efficient CPU operations).\nThe only situations where a LinkedList might make sense would be something highly contrived where you had thousands of Lists any one of which might grow to be GB-sized  but where no good guess could be made at allocation-time of the List and setting them all to GB-sized would blow up the heap.\nAnd if you found some problem like that  then it really does call for reengineering whatever your solution is (and I don t like to lightly suggest reengineering old code because I myself maintain piles and piles of old code  but that d be a very good case of where the original design has simply run out of runway and does need to be chucked).\nThere are some very specific algorithms where a LinkedList is called for  but those are very  very rare and the algorithm will usually specifically depend on LinkedList s ability to insert and delete elements in the middle of the list relatively quickly  once you ve navigated there with a ListIterator.</p>\n<p>There is one common use case in which LinkedList outperforms ArrayList: that of a queue.\nHowever  if your goal is performance  instead of LinkedList you should also consider using an ArrayBlockingQueue (if you can determine an upper bound on your queue size ahead of time  and can afford to allocate all the memory up front)  or this <a href= http://www.javaspecialists.eu/archive/Issue027.html  rel= noreferrer >CircularArrayList implementation</a>.\n<code>LinkedList</code> is fast for appending or deleting large elements at the ends of a list  but slow to access a specific element.\n<p>Edit/Remove is faster in <code>LinkedList</code> than <code>ArrayList</code>.</p>\n<p><code>ArrayList</code>  backed by <code>Array</code>  which needs to be double the size  is worse in large volume application.</p>\n//Note: ArrayList is 26 time faster here than LinkedList for addAll()\n//Note: ArrayList is 9 times faster than LinkedList for add sequentially\n//Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.\n//Note: LinkedList is 10 millisecond faster than ArrayList while removing item.\n//Note: Linked List is 500 Milliseconds faster than ArrayList\n<p><code>ArrayList</code> is essentially an array.\n<code>LinkedList</code> is implemented as a double linked list.\n<p>The <code>get</code> is pretty clear. O(1) for <code>ArrayList</code>  because <code>ArrayList</code> allow random access by using index.\nO(n) for <code>LinkedList</code>  because it needs to find the index first.\n<p><code>LinkedList</code> is faster in add and remove  but slower in get.\n<p>Classes that has a natural sort order (a class Number  as an example) should implement the Comparable interface  whilst classes that has no natural sort order (a class Chair  as an example) should be provided with a Comparator (or an anonymous Comparator class).</p>\n<p>With Java 8 you can use a method reference for your comparator:</p>'],['Your problem is here :\n\n while(scan.hasNextInt()){  <-- This will loop untill you enter any non integer value\n     list.add(scan.nextInt());\n  }\nYou just have to enter a character say e.g q once you finished entering all the integer values and then your program will print expected results.\n\nSample Input :14 17 18 33 54 1 4 6 q'],"['""""""How to get ArrayList<Integer> and Scanner to play nice? \n\nimport java.util.*; public class CyclicShiftApp{ public static void main(String[] args){ Scanner scan = new Scanner(System.in); ArrayList<Integer> list = new ArrayList<Integer>(); while(scan.hasNextInt()){ list.add(scan.nextInt()); } Integer[] nums = new Integer[list.size()]; nums = list.toArray(nums); for(int i = 0;i < nums.length; i++){ System.out.println(nums[i]); } }\n\nThanks to poor-mans-debugging I\'ve found that the while(scan.hasNextInt()) isnt actually adding anything. What might be going wrong?""""""', '""""""It works for me. If I type in 10 (return) 20 (return) 30 (return) Ctrl-D (return) it shows the three numbers. Oh sorry. Just a list of numbers with whitespaces. eg. 14 17 18 33 54 1 4 6\n\n\n\n@SamwiseGibbens: Again, if I type that in, then hit return, then Ctrl-D, return, it prints out all the numbers. How are you terminating input? (Congrats for showing a short but complete program, and trying to learn from the ground up rather than racing straight to a GUI+database etc, by the way. I wish everyone took that approach.)\n\n\n\n14 17 18 33 54 1 4 6 it will treat as String input and scan.hasNextInt() will return false. @ExtremeCoders: You can make the loop end by providing any non-integer. | Show 8 more comments\n\nDoes this work, master Samwise? import java.util.*; public class CyclicShiftApp{ public static void main(String[] args){ Scanner scan = new Scanner(System.in); ArrayList<Integer> list = new ArrayList<Integer>(); System.out.print(""Enter integers please ""); System.out.println(""(EOF or non-integer to terminate): ""); while(scan.hasNextInt()){ list.add(scan.nextInt()); } Integer [] nums = list.toArray(new Integer[0]); for(int i = 0; i < nums.length; i++){ System.out.println(nums[i]); } } }\n\nI\'m assuming there\'s a reason why you need the list as an array, otherwise the conversion to an array is unnecessary. As Jon Skeet mentions in the comments, the loop will terminate only when the stream doesn\'t have a next int, ie. a non-integer value or a file\'s EOF if you\'re using \'java CyclicShiftApp < input_file.txt\'. rtheunissenrtheunissen\n\n7,Your problem is here :\n\nwhile(scan.hasNextInt()){ <-- This will loop untill you enter any non integer value list.add(scan.nextInt()); }\n\nYou just have to enter a character say e.g q once you finished entering all the integer values and then your program will print expected results. Sample Input :14 17 18 33 54 1 4 6 q\n\nAmit DeshpandeAmit Deshpande\n\n3\n\nIs there a way to cut it off after it finds the last integer? I would think that hasNextInt fixed that? it seems like it should go.. \'if there is no next int, cancel loop\'. Yes, but for that you would have to terminate the input. Either with a file which ends automatically or something like Ctrl + C on Windows command line. (Or Ctrl + D and enter)\n\n\n\nThere is no way it can detect which is last int unless you define some. So use characters or non integer to specify that it is end of input. import java.util.*; class SimpleArrayList{ public static void main(String args[]) { Scanner sc = new Scanner(System.in); ArrayList <Integer> al2 = new ArrayList<Integer>(); System.out.println(""enter the item in list""); while(sc.hasNextInt()) { al2.add(sc.nextInt()); } Iterator it1 = al2.iterator(); /*loop will be terminated when it will not get integer value */ while(it1.hasNext()) { System.out.println(it1.next()); } } }\n\nTrupti ParsaiTrupti Parsai\n\nThis is one of the simple and easiest way to use Scanner and ArrayList together. import java.util.*; public class Main { public static void main(String args[]) { Scanner sc=new Scanner(System.in); int num=sc.nextInt(); ArrayList<Integer> list=new ArrayList<Integer>(num); for(int i=0;i<num;i++) { list.add(sc.nextInt()); } Iterator itr=list.iterator(); { while(itr.hasNext()) { System.out.print(itr.next()+"" ""); } } } }\n\nDivyanshu SharmaDivyanshu Sharma\n\n""""""']",0.089108911,0.166666667
util,Map,JAXB java.util.Map to key value pairs,['<p>If your key is <strong>NOT</strong> guaranteed to be unique for all elements in the list  you should convert it to a <code>\n<p>Most of the answers listed miss a case when the <strong>list has duplicate items</strong>.\n<p>You can create a Stream of the indices using an IntStream and then convert them to a Map :</p>\n<p>I was trying to do this and found that  using the answers above  when using <code>Functions.identity()</code> for the key to the Map  then I had issues with using a local method like <code>this::localMethodName</code> to actually work because of typing issues.</p>\nactually does something to the typing in this case so the method would only work by returning <code>Object</code> and accepting a param of <code>Object</code></p>\nIf you want the map to be mutable  you could copy it again  e.g. using <code>mutableMap = new HashMap&lt;&gt;(Map.of(&quot;a&quot;  &quot;b&quot;));</code>.\nThat means the object of the outer class cannot be garbage collected while the created map object is still referenced  thus blocking additional memory</li> </ul> <p>\nUsing a function for initialization will also enable you to generate a map in an initializer  but avoids nasty side-effects:</p> <pre><code>Map&lt;String  String&gt; myMap = createMap();\nAs of 2021  Java has no Map literals (yet - I think they were proposed for Java 8  but didn t make it).</p> <p>\n(By the way  a map can t contain twice the same value  your second put will overwrite the first one.\nmap is an instance variable  put the initialization in a constructor or instance initializer:</p> <pre><code>\nIf you want your map to never change  you should after the initialization wrap your map by <code>Collections.\nThe map (a collection of entries) is immutable  so you cannot add or remove entries after instantiating.\nAlso  the key and the value of each entry is immutable  cannot be changed.\nSee the Javadoc</a> for other rules  such as no NULLs allowed  no duplicate keys allowed  and the iteration order of mappings is arbitrary.</p> <p>\nPass an existing map  get back an immutable copy of that map.</p> <p>\nFor efficiency  if the passed map is already truly immutable  the <code>copyOf</code>\nmethod produces a <em>view</em> onto the original map  a mere wrapper  not a true copy.\nIf the original map gets modified (<code>put</code>  <code>remove</code>  etc.)  the supposedly-unmodifiable will actually show the modification.\nWe see that the supposedly unmodifiable is indeed modifiable <em>indirectly</em>  by modifying the original map on which the unmodifiable map is a view.</li> <li>In contrast  the <code>copyOf</code>\nAn alternative way to get a map with null values using a builder syntax on Java 8 is writing a custom collector <strong>backed by a HashMap</strong>\nThe utility class isn t limited neither regarding the type of keys and values nor regarding the amount of entries nor regarding the type of the resulting Map.</p> <p>'],"['I\'m still working on a better solution but using MOXy JAXB, I\'ve been able to handle the following XML:\n\n<?xml version=""1.0"" encoding=""UTF-8""?>\n<root>\n   <mapProperty>\n      <map>\n         <key>value</key>\n         <key2>value2</key2>\n      </map>\n   </mapProperty>\n</root>\nYou need to use an @XmlJavaTypeAdapter on your Map property:\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n\n@XmlRootElement\npublic class Root {\n\n    private Map<String, String> mapProperty;\n\n    public Root() {\n        mapProperty = new HashMap<String, String>();\n    }\n\n    @XmlJavaTypeAdapter(MapAdapter.class)\n    public Map<String, String> getMapProperty() {\n        return mapProperty;\n    }\n\n    public void setMapProperty(Map<String, String> map) {\n        this.mapProperty = map;\n    }\n\n}\nThe implementation of the XmlAdapter is as follows:\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Map.Entry;\n\nimport javax.xml.bind.annotation.adapters.XmlAdapter;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\npublic class MapAdapter extends XmlAdapter<AdaptedMap, Map<String, String>> {\n\n    @Override\n    public AdaptedMap marshal(Map<String, String> map) throws Exception {\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        DocumentBuilder db = dbf.newDocumentBuilder();\n        Document document = db.newDocument();\n        Element rootElement = document.createElement(""map"");\n        document.appendChild(rootElement);\n\n        for(Entry<String,String> entry : map.entrySet()) {\n            Element mapElement = document.createElement(entry.getKey());\n            mapElement.setTextContent(entry.getValue());\n            rootElement.appendChild(mapElement);\n        }\n\n        AdaptedMap adaptedMap = new AdaptedMap();\n        adaptedMap.setValue(document);\n        return adaptedMap;\n    }\n\n    @Override\n    public Map<String, String> unmarshal(AdaptedMap adaptedMap) throws Exception {\n        Map<String, String> map = new HashMap<String, String>();\n        Element rootElement = (Element) adaptedMap.getValue();\n        NodeList childNodes = rootElement.getChildNodes();\n        for(int x=0,size=childNodes.getLength(); x<size; x++) {\n            Node childNode = childNodes.item(x);\n            if(childNode.getNodeType() == Node.ELEMENT_NODE) {\n                map.put(childNode.getLocalName(), childNode.getTextContent());\n            }\n        }\n        return map;\n    }\n\n}\nThe AdpatedMap class is where all the magic happens, we will use a DOM to represent the content. We will trick JAXB intro dealing with a DOM through the combination of @XmlAnyElement and a property of type Object:\n\nimport javax.xml.bind.annotation.XmlAnyElement;\n\npublic class AdaptedMap {\n\n    private Object value;\n\n    @XmlAnyElement\n    public Object getValue() {\n        return value;\n    }\n\n    public void setValue(Object value) {\n        this.value = value;\n    }\n\n}\nThis solution requires the MOXy JAXB implementation. You can configure the JAXB runtime to use the MOXy implementation by adding a file named jaxb.properties in with your model classes with the following entry:\n\njavax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory\nThe following demo code can be used to verify the code:\n\nimport java.io.File;\n\nimport javax.xml.bind.JAXBContext;\nimport javax.xml.bind.Marshaller;\nimport javax.xml.bind.Unmarshaller;\n\npublic class Demo {\n\n    public static void main(String[] args) throws Exception {\n        JAXBContext jc = JAXBContext.newInstance(Root.class);\n\n        Unmarshaller unmarshaller = jc.createUnmarshaller();\n        Root root = (Root) unmarshaller.unmarshal(new File(""src/forum74/input.xml""));\n\n        Marshaller marshaller = jc.createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n        marshaller.marshal(root, System.out);\n    }\n}']","['""""""JAXB java.util.Map to key value pairs\n\nI\'d like to marshall/unmarshall a Map into attributes of an XML element. I\'ve seen examples like:\n\n<map> <entry key=""key1"">value1</entry> <entry key=""key2"">value2</entry> </map>\n\nWhat I really want is:\n\n<map key1=""value1"" key2=""value2""/>\n\nAssume with me that there are no complex values and that they can legally be represented as XML attributes. Also, I\'m trying to write this generically because the set of keys is not known until runtime. How would I go about this? I\'m familiar with XmlJavaTypeAdapter. I thought about creating a MyMap that contains a List of entries but this wouldn\'t get the output I\'d like. 2,Like I hinted in my comment, this cannot be achieved with JAXB alone. In the JAXB specification (JSR 222) it says:\n\nIn all application scenarios, we create a Java object-level binding of the schema. That means that the scope of the binding is the same as the scope of the schema, which is static. A JAXB binding is not meant to be changed without recompiling the code. There are some exceptions, e.g. for xs:anyAttribute which is discussed in section 6.9 of the specification, but since you didn\'t vote for the answer suggesting the use of @XmlAnyAttribute you probably don\'t want to live with the limitations - e.g. only have QName keys in your map. I hope you are convinced that to do what you want with JAXB is a really bad idea, but just for reference below is an example that modifies the document after marshalling to bring it to the structure you want. You can copy and paste it into a single file and compile it with Java 7. The output will look like this:\n\n<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?> <mapExample> <map France=""Paris"" Japan=""Tokyo""/> </mapExample>\n\nMy code only shows the marshalilng the other direction is equivalent:\n\nimport java.util.ArrayList; import java.util.HashMap; import java.util.List; import java.util.Map; import javax.xml.bind.JAXBContext; import javax.xml.bind.Marshaller; import javax.xml.bind.annotation.XmlAttribute; import javax.xml.bind.annotation.XmlElement; import javax.xml.bind.annotation.XmlRootElement; import javax.xml.bind.annotation.adapters.XmlAdapter; import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter; import javax.xml.transform.TransformerFactory; import javax.xml.transform.dom.DOMResult; import javax.xml.transform.dom.DOMSource; import javax.xml.transform.stream.StreamResult; import javax.xml.xpath.XPath; import javax.xml.xpath.XPathConstants; import javax.xml.xpath.XPathExpression; import javax.xml.xpath.XPathFactory; import org.w3c.dom.Document; import org.w3c.dom.Element; import org.w3c.dom.Node; import org.w3c.dom.NodeList; @XmlRootElement class MapExample { @XmlJavaTypeAdapter(MapXmlAdapter.class) @XmlElement(name=""map"") private Map<String, String> data = new HashMap<>(); public static void main(String[] args) throws Exception { MapExample example = new MapExample(); example.data.put(""France"", ""Paris""); example.data.put(""Japan"", ""Tokyo""); JAXBContext context = JAXBContext.newInstance(MapExample.class); Marshaller marshaller = context.createMarshaller(); DOMResult result = new DOMResult(); marshaller.marshal(example, result); XPathFactory factory = XPathFactory.newInstance(); XPath xpath = factory.newXPath(); Document document = (Document)result.getNode(); XPathExpression expression = xpath.compile(""//map/entry""); NodeList nodes = (NodeList)expression.evaluate(document, XPathConstants.NODESET); expression = xpath.compile(""//map""); Node oldMap = (Node)expression.evaluate(document, XPathConstants.NODE); Element newMap = document.createElement(""map""); for (int index = 0; index < nodes.getLength(); index++) { Element element = (Element)nodes.item(index); newMap.setAttribute(element.getAttribute(""key""), element.getAttribute(""value"")); } expression = xpath.compile(""//map/..""); Node parent = (Node)expression.evaluate(document, XPathConstants.NODE); parent.replaceChild(newMap, oldMap); TransformerFactory.newInstance().newTransformer(). transform(new DOMSource(document), new StreamResult(System.out)); } } class MapXmlAdapter extends XmlAdapter<MyMap, Map<String, String>> { @Override public Map<String, String> unmarshal(MyMap value) throws Exception { throw new UnsupportedOperationException(); } @Override public MyMap marshal(Map<String, String> value) throws Exception { MyMap map = new MyMap(); map.entries = new ArrayList<MyEntry>(); for (String key : value.keySet()) { MyEntry entry = new MyEntry(); entry.key = key; entry.value = value.get(key); map.entries.add(entry); } return map; } } class MyMap { @XmlElement(name=""entry"") public List<MyEntry> entries; } class MyEntry { @XmlAttribute public String key; @XmlAttribute public String value; }\n\n3,6\n\nCould you show an example? It seems to me that the Javadoc explains how to annotate objects to obtain an XML structure that the OP doesn\'t want... – Lukas Eder Oct 15, 2012 at 18:11\n\nNot the structure I\'m looking for. I want all entries in the Map to be key-value pairs. The entries in the Java map object are not affected by this, e.g. they still implement java.util.Map.Entry. MyEntry is only used during marshalling. Or do you mean the XML output by ""Not the structure I\'m looking for""?""""""']",0.178571429,0.009615385
util,Map,serialize json object which extends map,['<p>If your key is <strong>NOT</strong> guaranteed to be unique for all elements in the list  you should convert it to a <code>\n<p>Most of the answers listed miss a case when the <strong>list has duplicate items</strong>.\n<p>You can create a Stream of the indices using an IntStream and then convert them to a Map :</p>\n<p>I was trying to do this and found that  using the answers above  when using <code>Functions.identity()</code> for the key to the Map  then I had issues with using a local method like <code>this::localMethodName</code> to actually work because of typing issues.</p>\nactually does something to the typing in this case so the method would only work by returning <code>Object</code> and accepting a param of <code>Object</code></p>\nIf you want the map to be mutable  you could copy it again  e.g. using <code>mutableMap = new HashMap&lt;&gt;(Map.of(&quot;a&quot;  &quot;b&quot;));</code>.\nThat means the object of the outer class cannot be garbage collected while the created map object is still referenced  thus blocking additional memory</li> </ul> <p>\nUsing a function for initialization will also enable you to generate a map in an initializer  but avoids nasty side-effects:</p> <pre><code>Map&lt;String  String&gt; myMap = createMap();\nAs of 2021  Java has no Map literals (yet - I think they were proposed for Java 8  but didn t make it).</p> <p>\n(By the way  a map can t contain twice the same value  your second put will overwrite the first one.\nmap is an instance variable  put the initialization in a constructor or instance initializer:</p> <pre><code>\nIf you want your map to never change  you should after the initialization wrap your map by <code>Collections.\nThe map (a collection of entries) is immutable  so you cannot add or remove entries after instantiating.\nAlso  the key and the value of each entry is immutable  cannot be changed.\nSee the Javadoc</a> for other rules  such as no NULLs allowed  no duplicate keys allowed  and the iteration order of mappings is arbitrary.</p> <p>\nPass an existing map  get back an immutable copy of that map.</p> <p>\nFor efficiency  if the passed map is already truly immutable  the <code>copyOf</code>\nmethod produces a <em>view</em> onto the original map  a mere wrapper  not a true copy.\nIf the original map gets modified (<code>put</code>  <code>remove</code>  etc.)  the supposedly-unmodifiable will actually show the modification.\nWe see that the supposedly unmodifiable is indeed modifiable <em>indirectly</em>  by modifying the original map on which the unmodifiable map is a view.</li> <li>In contrast  the <code>copyOf</code>\nAn alternative way to get a map with null values using a builder syntax on Java 8 is writing a custom collector <strong>backed by a HashMap</strong>\nThe utility class isn t limited neither regarding the type of keys and values nor regarding the amount of entries nor regarding the type of the resulting Map.</p> <p>'],"['I came up with this solution:\n\npublic class ArrayToMapDeserializer extends JsonDeserializer<SortedMap<Object, Object>>\n    implements ContextualDeserializer {\n\n    private Class<?> keyAs;\n\n    private Class<?> contentAs;\n\n    @Override\n    public Map<Object, Object> deserialize(JsonParser p, DeserializationContext ctxt)\n        throws IOException, JsonProcessingException {\n        return this.deserialize(p, ctxt, new HashMap<>());\n    }\n\n    @Override\n    public Map<Object, Object> deserialize(JsonParser p, DeserializationContext ctxt,\n        Map<Object, Object> intoValue) throws IOException, JsonProcessingException {\n        JsonNode node = p.readValueAsTree();\n        ObjectCodec codec = p.getCodec();\n        if (node.isArray()) {\n            node.forEach(entry -> {\n                try {\n                    JsonNode keyNode = entry.get(0);\n                    JsonNode valueNode = entry.get(1);\n                    intoValue.put(keyNode.traverse(codec).readValueAs(this.keyAs),\n                        valueNode.traverse(codec).readValueAs(this.contentAs));\n                } catch (NullPointerException | IOException e) {\n                    // skip entry\n                }\n            });\n        }\n        return intoValue;\n    }\n\n    @Override\n    public JsonDeserializer<?> createContextual(DeserializationContext ctxt, BeanProperty property)\n        throws JsonMappingException {\n        JsonDeserialize jsonDeserialize = property.getAnnotation(JsonDeserialize.class);\n        this.keyAs = jsonDeserialize.keyAs();\n        this.contentAs = jsonDeserialize.contentAs();\n        return this;\n    }\n\n}\nwhich can be used like this:\n\npublic class Baz {\n\n    @JsonSerialize(using = MapToArraySerializer.class)\n    @JsonDeserialize(using = ArrayToMapDeserializer.class,\n        keyAs = Foo.class, contentAs = Bar.class)\n    Map<Foo, Bar> map;\n\n}']","['""""""It\'s not like it would break anything at all or am I missing something here? | Show 3 more comments\n\nIn the case you\'d still want Java built-in serialization without having to resort to marshal your JSON object into string notation, one thing you could do is extend JSONObject and JSONArray from org.json and just implement Serializable. Then you can use your own versions of JSONObject and JSONArray across the board instead of the originals. Make sure you define all constructors on your subclasses and call their super() counterparts as well as implement specific methods that return the parent types such as getJSONObject() and getJSONArray() from properties. Roberto AndradeRoberto Andrade\n\n1,3\n\nvoting up, since this is the right approach. I do the same since I am caching a comples JSONObject on MemCache, rather than get it created all the time or stringified. This does seem to work, but is it ""safe"" to do? Something about extending a 3rd party class that isn\'t serializable, and then marking it as so, seems a little risky. This is a better approach than the accepted one! Another way is to swap org.json library with json-simple. The JSONObject class from json-simple extends HashMap which is java Serializable as well as more java-ish API. http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1\n\nhttps://www.mkyong.com/java/json-simple-example-read-and-write-json/\n\nThamme GowdaThamme Gowda\n\nIf you have JSONArray inside Serializable object class try to initialize JSONArray in this way. private transient JSONArray jsonArray;\n\npublic class Person implements Serializable { private String name; private transient JSONArray jsonArray; public String getName() { return name; } public void setName(String name) { this.name = name; } public JSONArray getJsonArray() { return jsonArray; } public void setJsonArray(JSONArray jsonArray) { this.jsonArray = jsonArray; } }\n\n3,1\n\nBecause it\'ll change functionality, you might not want to lose your JSONArray on deserialize.. – James Andrew May 21, 2017 at 16:40\n\n""""""', '""""""Advertising & Talent Reach devs & technologists worldwide about your product, service or employer brand\n\nOverflowAI GenAI features for Teams\n\nOverflowAPI Train & fine-tune LLMs\n\nAbout the company Visit the blog\n\njackson serialization for Java object with Map? Asked 9 years, 10 months ago\n\nModified 9 years, 10 months ago\n\nI have a Java class like this and want to convert to JSON using Jackson. Thanks for your help. public class myClass { String Id; Map<String, Object> optionalData = new LinkedHashMap<String, Object>(); }\n\nHow to serialization it to JSON using Jackson ObjectMapper ? For example, suppose the optionalData is a Map saving two entries <""type"", ""book""> and <""year"", ""2014""> I want the output to be as follow. Please note that the key/value of optionalData could be changed on the fly (so, I cannot create a ""static"" Java object for this without using Map)\n\n[ { id: ""book-id1"", type: ""book"", year: ""2014"" }, { id: ""book-id2"", type: ""book"", year: ""2013"" } ]\n\n3,Jason ChenJason Chen\n\n1\n\nwhat you have tried so far? and where you facing problem?""""""']",0.178571429,0.46
awt,Image,Take a screenshot and save as Image in Java,['nan'],"['Use Robot#createScreenCapture().\n\nBufferedImage image = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));\nImageIO.write(image, ""png"", new File(""/screenshot.png""));']","['""""""Share Your Experience: Is there a way to take a screenshot using Java and save it to some sort of image? Simple as the title states: Can you use only Java commands to take a screenshot and save it? Or, do I need to use an OS specific program to take the screenshot and then grab it off the clipboard? 4\n\nweb.archive.org/web/20090204074007/http://schmidt.devlib.org/…\n\n– John Millikin Sep 12, 2008 at 4:39\n\nThanks to this question, I wrote a tutorial for absolute beginners on my blog: thepcwizard.in/2012/12/java-screen-capturing-tutorial.html\n\n@ThePCWizard the link is not working\n\n– rajeev pani.. Apr 13, 2022 at 11:03\n\n@rajeevpani.. Article moved here: blog.vidursoft.com/2012/12/java-screen-capturing-tutorial.html\n\nBelieve it or not, you can actually use java.awt.Robot to ""create an image containing pixels read from the screen."" You can then write that image to a file on disk. I just tried it, and the whole thing ends up like:\n\nRectangle screenRect = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()); BufferedImage capture = new Robot().createScreenCapture(screenRect); ImageIO.write(capture, ""bmp"", new File(args[0]));\n\nNOTE: This will only capture the primary monitor. See GraphicsConfiguration for multi-monitor support. David CitronDavid Citron\n\n4\n\nI wonder if this is what screen sharing applications like Elluminate (elluminate.com) use. – Chris Wagner Apr 22, 2010 at 22:25\n\n@java_enthu actually yes, it will be work without console if you will hardcode path to screenshot in your app. – Dmitry Zagorulkin Aug 27, 2012 at 13:56\n\nRobot does not include the mouse in the screen capture. Is there a similar function which does the exact same thing, but DOES include the mouse? is there a way to capture the mouse cursor as well ?! – Mehdi Karamosly Aug 20, 2013 at 2:12\n\nI never liked using Robot, so I made my own simple method for making screenshots of JFrame objects:\n\npublic static final void makeScreenshot(JFrame argFrame) { Rectangle rec = argFrame.getBounds(); BufferedImage bufferedImage = new BufferedImage(rec.width, rec.height, BufferedImage.TYPE_INT_ARGB); argFrame.paint(bufferedImage.getGraphics()); try { // Create temp file File temp = File.createTempFile(""screenshot"", "".png""); // Use the ImageIO API to write the bufferedImage to a temporary file ImageIO.write(bufferedImage, ""png"", temp); // Delete temp file when program exits temp.deleteOnExit(); } catch (IOException ioe) { ioe.printStackTrace(); } }\n\n1,DejanLekicDejanLekic\n\n6\n\nAny reason for why you\'re not liking Robot? – Simon Forsberg Jun 12, 2012 at 6:22\n\nThink of it simply as a matter of taste. It looks like this should have the advantage of working even if the target window is obscured before the screenshot is taken. – Brad Mace Jul 28, 2014 at 14:33\n\nOn the other hand, this gets only the contents of the window, whereas with Robot you can also get the window\'s frame and titlebar. – Brad Mace Jul 28, 2014 at 15:57\n\nFor HiDPI (Mac retina) displays this creates screenshots at half resolution. To fix that bufferedImage.getGraphics().scale(2, 2) before the argFrame.paint(bufferedImage.getGraphics()) call and use new BufferedImage(rec.width*2, rec.height*2, BufferedImage.TYPE_INT_ARGB) to create the BufferedImage\n\n | Show 1 more comment\n\nIf you\'d like to capture all monitors, you can use the following code:\n\nGraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment(); GraphicsDevice[] screens = ge.getScreenDevices(); Rectangle allScreenBounds = new Rectangle(); for (GraphicsDevice screen : screens) { Rectangle screenBounds = screen.getDefaultConfiguration().getBounds(); allScreenBounds.width += screenBounds.width; allScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height); } Robot robot = new Robot(); BufferedImage screenShot = robot.createScreenCapture(allScreenBounds);\n\n7,2\n\nwould be better to calculate it this way\n\n– Brad Mace Jul 15, 2014 at 19:39\n\n@BradMace That answer solved my problem, thank you for linking it here! public void captureScreen(String fileName) throws Exception { Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize(); Rectangle screenRectangle = new Rectangle(screenSize); Robot robot = new Robot(); BufferedImage image = robot.createScreenCapture(screenRectangle); ImageIO.write(image, ""png"", new File(fileName)); }\n\nuser2503881user2503881\n\nGraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment(); GraphicsDevice[] screens = ge.getScreenDevices(); Rectangle allScreenBounds = new Rectangle(); for (GraphicsDevice screen : screens) { Rectangle screenBounds = screen.getDefaultConfiguration().getBounds(); allScreenBounds.width += screenBounds.width; allScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height); allScreenBounds.x=Math.min(allScreenBounds.x, screenBounds.x); allScreenBounds.y=Math.min(allScreenBounds.y, screenBounds.y); } Robot robot = new Robot(); BufferedImage bufferedImage = robot.createScreenCapture(allScreenBounds); File file = new File(""C:\\\\Users\\\\Joe\\\\Desktop\\\\scr.png""); if(!file.exists()) file.createNewFile(); FileOutputStream fos = new FileOutputStream(file); ImageIO.write( bufferedImage, ""png"", fos );\n\nbufferedImage will contain a full screenshot, this was tested with three monitors\n\njoe pelletierjoe pelletier\n\nimport java.awt.Color; import java.awt.Dimension; import java.awt.Rectangle; import java.awt.Robot; import java.awt.Toolkit; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.image.BufferedImage; import java.io.File; import javax.imageio.ImageIO; import javax.swing.*; public class HelloWorldFrame extends JFrame implements ActionListener { JButton b; public HelloWorldFrame() { this.setVisible(true); this.setLayout(null); b = new JButton(""Click Here""); b.setBounds(380, 290, 120, 60); b.setBackground(Color.red); b.setVisible(true); b.addActionListener(this); add(b); setSize(1000, 700); } public void actionPerformed(ActionEvent e) { if (e.getSource() == b) { this.dispose(); try { Thread.sleep(1000); Toolkit tk = Toolkit.getDefaultToolkit(); Dimension d = tk.getScreenSize(); Rectangle rec = new Rectangle(0, 0, d.width, d.height); Robot ro = new Robot(); BufferedImage img = ro.createScreenCapture(rec); File f = new File(""myimage.jpg"");//set appropriate path ImageIO.write(img, ""jpg"", f); } catch (Exception ex) { System.out.println(ex.getMessage()); } } } public static void main(String[] args) { HelloWorldFrame obj = new HelloWorldFrame(); } }\n\nNilesh JadavNilesh Jadav\n\n1\n\nI did a benchmark and this one is the slowest, also has the greatest loss and biggest file size. Sorry,\n\n– Liam Larsen Jul 1, 2017 at 8:47\n\nYou can use java.awt.Robot to achieve this task. below is the code of server, which saves the captured screenshot as image in your Directory. import java.awt.image.BufferedImage; import java.io.File; import java.io.IOException; import java.net.ServerSocket; import java.net.Socket; import java.net.SocketTimeoutException; import java.sql.SQLException; import java.text.DateFormat; import java.text.SimpleDateFormat; import java.util.Date; import javax.imageio.ImageIO; public class ServerApp extends Thread { private ServerSocket serverSocket=null; private static Socket server = null; private Date date = null; private static final String DIR_NAME = ""screenshots""; public ServerApp() throws IOException, ClassNotFoundException, Exception{ serverSocket = new ServerSocket(61000); serverSocket.setSoTimeout(180000); } public void run() { while(true) { try { server = serverSocket.accept(); date = new Date(); DateFormat dateFormat = new SimpleDateFormat(""_yyMMdd_HHmmss""); String fileName = server.getInetAddress().getHostName().replace(""."", ""-""); System.out.println(fileName); BufferedImage img=ImageIO.read(ImageIO.createImageInputStream(server.getInputStream())); ImageIO.write(img, ""png"", new File(""D:\\\\screenshots\\\\""+fileName+dateFormat.format(date)+"".png"")); System.out.println(""Image received!!!!""); //lblimg.setIcon(img); } catch(SocketTimeoutException st) { System.out.println(""Socket timed out!""+st.toString()); //createLogFile(""[stocktimeoutexception]""+stExp.getMessage()); break; } catch(IOException e) { e.printStackTrace(); break; } catch(Exception ex) { System.out.println(ex); } } } public static void main(String [] args) throws IOException, SQLException, ClassNotFoundException, Exception{ ServerApp serverApp = new ServerApp(); serverApp.createDirectory(DIR_NAME); Thread thread = new Thread(serverApp); thread.start(); } private void createDirectory(String dirName) { File newDir = new File(""D:\\\\""+dirName); if(!newDir.exists()){ boolean isCreated = newDir.mkdir(); } } }\n\nAnd this is Client code which is running on thread and after some minutes it is capturing the screenshot of user screen. package com.viremp.client; import java.awt.AWTException; import java.awt.Dimension; import java.awt.Rectangle; import java.awt.Robot; import java.awt.Toolkit; import java.awt.image.BufferedImage; import java.io.IOException; import java.net.Socket; import java.util.Random; import javax.imageio.ImageIO; public class ClientApp implements Runnable { private static long nextTime = 0; private static ClientApp clientApp = null; private String serverName = ""192.168.100.18""; //loop back ip private int portNo = 61000; //private Socket serverSocket = null; /** * @param args * @throws InterruptedException */ public static void main(String[] args) throws InterruptedException { clientApp = new ClientApp(); clientApp.getNextFreq(); Thread thread = new Thread(clientApp); thread.start(); } private void getNextFreq() { long currentTime = System.currentTimeMillis(); Random random = new Random(); long value = random.nextInt(180000); //1800000 nextTime = currentTime + value; //return currentTime+value; } @Override public void run() { while(true){ if(nextTime < System.currentTimeMillis()){ System.out.println("" get screen shot ""); try { clientApp.sendScreen(); clientApp.getNextFreq(); } catch (AWTException e) { // TODO Auto-generated catch block System.out.println("" err""+e); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch(Exception e){ e.printStackTrace(); } } //System.out.println("" statrted ....""); } } private void sendScreen()throws AWTException, IOException { Socket serverSocket = new Socket(serverName, portNo); Toolkit toolkit = Toolkit.getDefaultToolkit(); Dimension dimensions = toolkit.getScreenSize(); Robot robot = new Robot(); // Robot class BufferedImage screenshot = robot.createScreenCapture(new Rectangle(dimensions)); ImageIO.write(screenshot,""png"",serverSocket.getOutputStream()); serverSocket.close(); } }\n\nMuhammad YawarMuhammad Yawar\n\nToolkit returns pixels based on PPI, as a result, a screenshot is not created for the entire screen when using PPI> 100% in Windows. I propose to do this:\n\nDisplayMode displayMode = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[0].getDisplayMode(); Rectangle screenRectangle = new Rectangle(displayMode.getWidth(), displayMode.getHeight()); BufferedImage screenShot = new Robot().createScreenCapture(screenRectangle);\n\nMisterParserMisterParser\n\nHighly active question.""""""']",0,0.2
awt,Image,Is there a way to take a screenshot using Java and save it to some sort of Image?,['nan'],"['GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();  \nGraphicsDevice[] screens = ge.getScreenDevices();       \nRectangle allScreenBounds = new Rectangle();  \nfor (GraphicsDevice screen : screens) {  \n       Rectangle screenBounds = screen.getDefaultConfiguration().getBounds();        \n       allScreenBounds.width += screenBounds.width;  \n       allScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height);\n       allScreenBounds.x=Math.min(allScreenBounds.x, screenBounds.x);\n       allScreenBounds.y=Math.min(allScreenBounds.y, screenBounds.y);\n      } \nRobot robot = new Robot();\nBufferedImage bufferedImage = robot.createScreenCapture(allScreenBounds);\nFile file = new File(""C:\\\\Users\\\\Joe\\\\Desktop\\\\scr.png"");\nif(!file.exists())\n    file.createNewFile();\nFileOutputStream fos = new FileOutputStream(file);\nImageIO.write( bufferedImage, ""png"", fos );\nbufferedImage will contain a full screenshot, this was tested with three monitors']","['""""""Share Your Experience: Is there a way to take a screenshot using Java and save it to some sort of image? Simple as the title states: Can you use only Java commands to take a screenshot and save it? Or, do I need to use an OS specific program to take the screenshot and then grab it off the clipboard? 4\n\nweb.archive.org/web/20090204074007/http://schmidt.devlib.org/…\n\n– John Millikin Sep 12, 2008 at 4:39\n\nThanks to this question, I wrote a tutorial for absolute beginners on my blog: thepcwizard.in/2012/12/java-screen-capturing-tutorial.html\n\n@ThePCWizard the link is not working\n\n– rajeev pani.. Apr 13, 2022 at 11:03\n\n@rajeevpani.. Article moved here: blog.vidursoft.com/2012/12/java-screen-capturing-tutorial.html\n\nBelieve it or not, you can actually use java.awt.Robot to ""create an image containing pixels read from the screen."" You can then write that image to a file on disk. I just tried it, and the whole thing ends up like:\n\nRectangle screenRect = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()); BufferedImage capture = new Robot().createScreenCapture(screenRect); ImageIO.write(capture, ""bmp"", new File(args[0]));\n\nNOTE: This will only capture the primary monitor. See GraphicsConfiguration for multi-monitor support. David CitronDavid Citron\n\n4\n\nI wonder if this is what screen sharing applications like Elluminate (elluminate.com) use. – Chris Wagner Apr 22, 2010 at 22:25\n\n@java_enthu actually yes, it will be work without console if you will hardcode path to screenshot in your app. – Dmitry Zagorulkin Aug 27, 2012 at 13:56\n\nRobot does not include the mouse in the screen capture. Is there a similar function which does the exact same thing, but DOES include the mouse? is there a way to capture the mouse cursor as well ?! – Mehdi Karamosly Aug 20, 2013 at 2:12\n\nI never liked using Robot, so I made my own simple method for making screenshots of JFrame objects:\n\npublic static final void makeScreenshot(JFrame argFrame) { Rectangle rec = argFrame.getBounds(); BufferedImage bufferedImage = new BufferedImage(rec.width, rec.height, BufferedImage.TYPE_INT_ARGB); argFrame.paint(bufferedImage.getGraphics()); try { // Create temp file File temp = File.createTempFile(""screenshot"", "".png""); // Use the ImageIO API to write the bufferedImage to a temporary file ImageIO.write(bufferedImage, ""png"", temp); // Delete temp file when program exits temp.deleteOnExit(); } catch (IOException ioe) { ioe.printStackTrace(); } }\n\n1,DejanLekicDejanLekic\n\n6\n\nAny reason for why you\'re not liking Robot? – Simon Forsberg Jun 12, 2012 at 6:22\n\nThink of it simply as a matter of taste. It looks like this should have the advantage of working even if the target window is obscured before the screenshot is taken. – Brad Mace Jul 28, 2014 at 14:33\n\nOn the other hand, this gets only the contents of the window, whereas with Robot you can also get the window\'s frame and titlebar. – Brad Mace Jul 28, 2014 at 15:57\n\nFor HiDPI (Mac retina) displays this creates screenshots at half resolution. To fix that bufferedImage.getGraphics().scale(2, 2) before the argFrame.paint(bufferedImage.getGraphics()) call and use new BufferedImage(rec.width*2, rec.height*2, BufferedImage.TYPE_INT_ARGB) to create the BufferedImage\n\n | Show 1 more comment\n\nIf you\'d like to capture all monitors, you can use the following code:\n\nGraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment(); GraphicsDevice[] screens = ge.getScreenDevices(); Rectangle allScreenBounds = new Rectangle(); for (GraphicsDevice screen : screens) { Rectangle screenBounds = screen.getDefaultConfiguration().getBounds(); allScreenBounds.width += screenBounds.width; allScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height); } Robot robot = new Robot(); BufferedImage screenShot = robot.createScreenCapture(allScreenBounds);\n\n7,2\n\nwould be better to calculate it this way\n\n– Brad Mace Jul 15, 2014 at 19:39\n\n@BradMace That answer solved my problem, thank you for linking it here! public void captureScreen(String fileName) throws Exception { Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize(); Rectangle screenRectangle = new Rectangle(screenSize); Robot robot = new Robot(); BufferedImage image = robot.createScreenCapture(screenRectangle); ImageIO.write(image, ""png"", new File(fileName)); }\n\nuser2503881user2503881\n\nGraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment(); GraphicsDevice[] screens = ge.getScreenDevices(); Rectangle allScreenBounds = new Rectangle(); for (GraphicsDevice screen : screens) { Rectangle screenBounds = screen.getDefaultConfiguration().getBounds(); allScreenBounds.width += screenBounds.width; allScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height); allScreenBounds.x=Math.min(allScreenBounds.x, screenBounds.x); allScreenBounds.y=Math.min(allScreenBounds.y, screenBounds.y); } Robot robot = new Robot(); BufferedImage bufferedImage = robot.createScreenCapture(allScreenBounds); File file = new File(""C:\\\\Users\\\\Joe\\\\Desktop\\\\scr.png""); if(!file.exists()) file.createNewFile(); FileOutputStream fos = new FileOutputStream(file); ImageIO.write( bufferedImage, ""png"", fos );\n\nbufferedImage will contain a full screenshot, this was tested with three monitors\n\njoe pelletierjoe pelletier\n\nimport java.awt.Color; import java.awt.Dimension; import java.awt.Rectangle; import java.awt.Robot; import java.awt.Toolkit; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.image.BufferedImage; import java.io.File; import javax.imageio.ImageIO; import javax.swing.*; public class HelloWorldFrame extends JFrame implements ActionListener { JButton b; public HelloWorldFrame() { this.setVisible(true); this.setLayout(null); b = new JButton(""Click Here""); b.setBounds(380, 290, 120, 60); b.setBackground(Color.red); b.setVisible(true); b.addActionListener(this); add(b); setSize(1000, 700); } public void actionPerformed(ActionEvent e) { if (e.getSource() == b) { this.dispose(); try { Thread.sleep(1000); Toolkit tk = Toolkit.getDefaultToolkit(); Dimension d = tk.getScreenSize(); Rectangle rec = new Rectangle(0, 0, d.width, d.height); Robot ro = new Robot(); BufferedImage img = ro.createScreenCapture(rec); File f = new File(""myimage.jpg"");//set appropriate path ImageIO.write(img, ""jpg"", f); } catch (Exception ex) { System.out.println(ex.getMessage()); } } } public static void main(String[] args) { HelloWorldFrame obj = new HelloWorldFrame(); } }\n\nNilesh JadavNilesh Jadav\n\n1\n\nI did a benchmark and this one is the slowest, also has the greatest loss and biggest file size. Sorry,\n\n– Liam Larsen Jul 1, 2017 at 8:47\n\nYou can use java.awt.Robot to achieve this task. below is the code of server, which saves the captured screenshot as image in your Directory. import java.awt.image.BufferedImage; import java.io.File; import java.io.IOException; import java.net.ServerSocket; import java.net.Socket; import java.net.SocketTimeoutException; import java.sql.SQLException; import java.text.DateFormat; import java.text.SimpleDateFormat; import java.util.Date; import javax.imageio.ImageIO; public class ServerApp extends Thread { private ServerSocket serverSocket=null; private static Socket server = null; private Date date = null; private static final String DIR_NAME = ""screenshots""; public ServerApp() throws IOException, ClassNotFoundException, Exception{ serverSocket = new ServerSocket(61000); serverSocket.setSoTimeout(180000); } public void run() { while(true) { try { server = serverSocket.accept(); date = new Date(); DateFormat dateFormat = new SimpleDateFormat(""_yyMMdd_HHmmss""); String fileName = server.getInetAddress().getHostName().replace(""."", ""-""); System.out.println(fileName); BufferedImage img=ImageIO.read(ImageIO.createImageInputStream(server.getInputStream())); ImageIO.write(img, ""png"", new File(""D:\\\\screenshots\\\\""+fileName+dateFormat.format(date)+"".png"")); System.out.println(""Image received!!!!""); //lblimg.setIcon(img); } catch(SocketTimeoutException st) { System.out.println(""Socket timed out!""+st.toString()); //createLogFile(""[stocktimeoutexception]""+stExp.getMessage()); break; } catch(IOException e) { e.printStackTrace(); break; } catch(Exception ex) { System.out.println(ex); } } } public static void main(String [] args) throws IOException, SQLException, ClassNotFoundException, Exception{ ServerApp serverApp = new ServerApp(); serverApp.createDirectory(DIR_NAME); Thread thread = new Thread(serverApp); thread.start(); } private void createDirectory(String dirName) { File newDir = new File(""D:\\\\""+dirName); if(!newDir.exists()){ boolean isCreated = newDir.mkdir(); } } }\n\nAnd this is Client code which is running on thread and after some minutes it is capturing the screenshot of user screen. package com.viremp.client; import java.awt.AWTException; import java.awt.Dimension; import java.awt.Rectangle; import java.awt.Robot; import java.awt.Toolkit; import java.awt.image.BufferedImage; import java.io.IOException; import java.net.Socket; import java.util.Random; import javax.imageio.ImageIO; public class ClientApp implements Runnable { private static long nextTime = 0; private static ClientApp clientApp = null; private String serverName = ""192.168.100.18""; //loop back ip private int portNo = 61000; //private Socket serverSocket = null; /** * @param args * @throws InterruptedException */ public static void main(String[] args) throws InterruptedException { clientApp = new ClientApp(); clientApp.getNextFreq(); Thread thread = new Thread(clientApp); thread.start(); } private void getNextFreq() { long currentTime = System.currentTimeMillis(); Random random = new Random(); long value = random.nextInt(180000); //1800000 nextTime = currentTime + value; //return currentTime+value; } @Override public void run() { while(true){ if(nextTime < System.currentTimeMillis()){ System.out.println("" get screen shot ""); try { clientApp.sendScreen(); clientApp.getNextFreq(); } catch (AWTException e) { // TODO Auto-generated catch block System.out.println("" err""+e); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch(Exception e){ e.printStackTrace(); } } //System.out.println("" statrted ....""); } } private void sendScreen()throws AWTException, IOException { Socket serverSocket = new Socket(serverName, portNo); Toolkit toolkit = Toolkit.getDefaultToolkit(); Dimension dimensions = toolkit.getScreenSize(); Robot robot = new Robot(); // Robot class BufferedImage screenshot = robot.createScreenCapture(new Rectangle(dimensions)); ImageIO.write(screenshot,""png"",serverSocket.getOutputStream()); serverSocket.close(); } }\n\nMuhammad YawarMuhammad Yawar\n\nToolkit returns pixels based on PPI, as a result, a screenshot is not created for the entire screen when using PPI> 100% in Windows. I propose to do this:\n\nDisplayMode displayMode = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[0].getDisplayMode(); Rectangle screenRectangle = new Rectangle(displayMode.getWidth(), displayMode.getHeight()); BufferedImage screenShot = new Robot().createScreenCapture(screenRectangle);\n\nMisterParserMisterParser\n\nHighly active question.""""""']",0,0.3
awt,Image,"Java- Write Text onto Image, then Write to Output File",['nan'],"['It\'s easy, just get the Graphics object from the image and draw your string onto the image. This example (and output image) is doing that:\n\npublic static void main(String[] args) throws Exception {\n    final BufferedImage image = ImageIO.read(new URL(\n        ""http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png""));\n\n    Graphics g = image.getGraphics();\n    g.setFont(g.getFont().deriveFont(30f));\n    g.drawString(""Hello World!"", 100, 100);\n    g.dispose();\n\n    ImageIO.write(image, ""png"", new File(""test.png""));\n}']","['""""""Write text onto image in Java\n\nIs there a Java library to write text to images, same as PHP\'s GD library. TheGuyNextDoorTheGuyNextDoor\n\n7,import java.awt.Color; import java.awt.Font; import java.awt.Graphics; import java.awt.image.BufferedImage; import java.io.File; import java.io.IOException; import javax.imageio.ImageIO; public class Testing { public static void main(String arg[]) throws IOException { String key = ""Sample""; BufferedImage bufferedImage = new BufferedImage(170, 30, BufferedImage.TYPE_INT_RGB); Graphics graphics = bufferedImage.getGraphics(); graphics.setColor(Color.LIGHT_GRAY); graphics.fillRect(0, 0, 200, 50); graphics.setColor(Color.BLACK); graphics.setFont(new Font(""Arial Black"", Font.BOLD, 20)); graphics.drawString(key, 10, 25); ImageIO.write(bufferedImage, ""jpg"", new File( ""C:/Users/admin/desktop/image.jpg"")); System.out.println(""Image Created""); } }\n\nPerumal RamasamyPerumal Ramasamy\n\nSure. First load the image, probably using a method of ImageIO.""""""', '""""""Thanks for any help! 3\n\nwere the size of your console and the size of your JTeaxtArea the same? if not, then probably its because you need \\r\\n for windows new line\n\nEclipse Console and JTextArea is 750x400 px. If I have to add \\r\\n, how do I do for input from JTextArea? Is it possible to identify line breaks? Text from a JTextArea will have \\n characters for newlines, regardless of the platform it is running on. You will want to replace those characters with the platform-specific newline as you write it to the file (for Windows, this is \\r\\n, as others have mentioned). I think the best way to do that is to wrap the text into a BufferedReader, which can be used to iterate over the lines, and then use a PrintWriter to write each line out to a file using the platform-specific newline. There is a shorter solution involving string.replace(...) (see comment by Unbeli), but it is slower and requires more memory. Here is my solution - now made even simpler thanks to new features in Java 8:\n\npublic static void main(String[] args) throws IOException { String string = ""This is lengthy string that contains many words. So\\nI am wrapping it.""; System.out.println(string); File file = new File(""C:/Users/User/Desktop/text.txt""); writeToFile(string, file); } private static void writeToFile(String string, File file) throws IOException { try ( BufferedReader reader = new BufferedReader(new StringReader(string)); PrintWriter writer = new PrintWriter(new FileWriter(file)); ) { reader.lines().forEach(line -> writer.println(line)); } }\n\n9,3\n\nuhm, stacking all these readers to do simple replacement? string.replace(""\\\\n"", System.getProperty(""line.separator""));\n\n@unbeli, Replacement is quick if the String is short, for very lengthier strings, the above approach holds good. I have tested it though. @unbeli - String.replace() requires creating a new object, which temporarily doubles the memory requirement, so it\'s not ideal for large amounts of data. Though granted, with the data coming from a JTextArea, I can\'t imagine the string would be terribly large, so it would probably work just as well for the most part\n\n– Kevin K Feb 8, 2012 at 20:46\n\nPlease see the following question on how to appropriately handle newlines. How do I get a platform-dependent new line character? Basically you want to use\n\nString newLineChar = System.getProperty(""line.separator"");\n\nand then use the newLineChar instead of ""\\n""\n\n2,I just ran your program, and adding a carriage return (\\r) before your newline (\\n) did the trick for me. If you want to get a system independent line separator, one can be found in the system propery line.separator\n\nString separator = System.getProperty(""line.separator""); String string = ""This is lengthy string that contains many words. So"" + separator + ""I am wrapping it."";\n\nnicholas.hauschildnicholas.hauschild\n\n2\n\nI am getting String from JTextArea, do I have to manually identify the line breaks and insert line.separator? Is that the only way?""""""']",0,0.333333333
sql,Connection,How to connect SQLite with Java?,,,"['""""""How to connect SQLite with Java? Asked 14 years, 9 months ago\n\nI am using one simple code to access the SQLite database from Java application . My code is\n\nimport java.sql.Connection; import java.sql.DriverManager; import java.sql.ResultSet; import java.sql.Statement; public class ConnectSQLite { public static void main(String[] args) { Connection connection = null; ResultSet resultSet = null; Statement statement = null; try { Class.forName(""org.sqlite.JDBC""); connection = DriverManager.getConnection(""jdbc:sqlite:D:\\\\testdb.db""); statement = connection.createStatement(); resultSet = statement .executeQuery(""SELECT EMPNAME FROM EMPLOYEEDETAILS""); while (resultSet.next()) { System.out.println(""EMPLOYEE NAME:"" + resultSet.getString(""EMPNAME"")); } } catch (Exception e) { e.printStackTrace(); } finally { try { resultSet.close(); statement.close(); connection.close(); } catch (Exception e) { e.printStackTrace(); } } } }\n\nBut this code gives one exception like\n\njava.lang.ClassNotFoundException: org.sqlite.JDBC\n\nHow can I slove this,please help me. 9,RajapandianRajapandian\n\n9,1\n\nI guess you are not putting SQLite jar in classpath\n\n\n\nYou need to have a SQLite JDBC driver in your classpath. Taro L. Saito (xerial) forked the Zentus project and now maintains it under the name sqlite-jdbc. It bundles the native drivers for major platforms so you don\'t need to configure them separately.""""""']",,
awt,Image,Resize image while keeping aspect ratio in Java,,,"['""""""Resize image, maintain aspect ratio\n\nI have an image which I resize:\n\nif((width != null) || (height != null)) { try{ // Scale image on disk BufferedImage originalImage = ImageIO.read(file); int type = originalImage.getType() == 0 ? BufferedImage.TYPE_INT_ARGB : originalImage.getType(); BufferedImage resizedImageJpg = resizeImage(originalImage, type, 200, 200); ImageIO.write(resizedImageJpg, ""jpg"", file); } catch(IOException e) { System.out.println(e.getMessage()); } }\n\nThis is how I resize the image:\n\nprivate static BufferedImage resizeImage(BufferedImage originalImage, int type, Integer imgWidth, Integer imgHeight) { var resizedImage = new BufferedImage(imgWidth, imgHeight, type); Graphics2D g = resizedImage.createGraphics(); g.drawImage(originalImage, 0, 0, imgWidth, imgHeight, null); g.dispose(); return resizedImage; }\n\nNow the problem is, I also need to maintain aspect ratio. That is, I need the new 200/200 image to contain the new image scaled. Something like this:\n\nI tried some things but they didn\'t work out as expected. Any help is appreciated. 3,Dimension imgSize = new Dimension(500, 100); Dimension boundary = new Dimension(200, 200);\n\nFunction to return the new size depending on the boundary:\n\npublic static Dimension getScaledDimension(Dimension imgSize, Dimension boundary) { int original_width = imgSize.width; int original_height = imgSize.height; int bound_width = boundary.width; int bound_height = boundary.height; int new_width = original_width; int new_height = original_height; // first check if we need to scale width if (original_width > bound_width) { //scale width to fit new_width = bound_width; //scale height to maintain aspect ratio new_height = (new_width * original_height) / original_width; } // then check if we need to scale even with the new height if (new_height > bound_height) { //scale height to fit instead new_height = bound_height; //scale width to maintain aspect ratio new_width = (new_height * original_width) / original_height; } return new Dimension(new_width, new_height); }\n\nIn case anyone also needs the image resizing code, here is a decent solution. If you\'re unsure about the above solution, there are different ways to achieve the same result. 8,9\n\nI used the same logic to resize bitmaps in android :)\n\n– James andresakis Jun 27, 2012 at 0:15\n\n@Ozzy \'s answer is correct except for when no scaling is required (or more specifically when the original width is smaller than the boundary). Initializing new_width and new_height to to original_width and original_height corrects the problem. – Ryan Morlok Jan 29, 2013 at 22:57\n\nI know this is for java, but I converted this to js in case anyone else needs function getDimensions(originalWidth,originalHeight,newWidth,newHeight){ var dimensions = {}; dimensions.width = originalWidth; dimensions.height = originalHeight; if(originalWidth > newWidth){ dimensions.width = newWidth; dimensions.height = (dimensions.width * originalHeight)/originalWidth; } if(dimensions.height > newHeight){ dimensions.height = newHeight; dimensions.width = (dimensions.height * originalWidth) / originalHeight; } return dimensions; }\n\nThis does not work if target dimension is bigger. so \'scale\' should be changed into \'shrink\' for this method. This solution worked for me, until I needed to resize an image to a boundary larger than the image itself. Perhaps this makes more sense. – Cardinal System Jan 23, 2019 at 20:55\n\n | Show 4 more comments\n\nTranslated from here:\n\nDimension getScaledDimension(Dimension imageSize, Dimension boundary) { double widthRatio = boundary.getWidth() / imageSize.getWidth(); double heightRatio = boundary.getHeight() / imageSize.getHeight(); double ratio = Math.min(widthRatio, heightRatio); return new Dimension((int) (imageSize.width * ratio), (int) (imageSize.height * ratio)); }\n\nYou can also use imgscalr to resize images while maintaining aspect ratio:\n\nBufferedImage resizeMe = ImageIO.read(new File(""orig.jpg"")); Dimension newMaxSize = new Dimension(255, 255); BufferedImage resizedImg = Scalr.resize(resizeMe, Method.QUALITY, newMaxSize.width, newMaxSize.height);\n\nMatthias BraunMatthias Braun\n\n2\n\nThis should be the accepted answer, Code is smaller and works for smaller images as well! Thank you! – Simon Ludwig Mar 24, 2019 at 10:45\n\nI dropped Scalr.java into my project and this example worked perfectly--without any drama. – Sean Anderson Apr 18, 2022 at 1:57\n\nYou will want to check out Image.getScaledInstance(), and more in this answer: How to improve the performance of g.drawImage() method for resizing images\n\nBufferedImage bufferedImage = ImageIO.read(file);\n\nprivate BufferedImage resizeAndCrop(BufferedImage bufferedImage, Integer width, Integer height) { Mode mode = (double) width / (double) height >= (double) bufferedImage.getWidth() / (double) bufferedImage.getHeight() ? Scalr.Mode.FIT_TO_WIDTH : Scalr.Mode.FIT_TO_HEIGHT; bufferedImage = Scalr.resize(bufferedImage, Scalr.Method.ULTRA_QUALITY, mode, width, height); int x = 0; int y = 0; if (mode == Scalr.Mode.FIT_TO_WIDTH) { y = (bufferedImage.getHeight() - height) / 2; } else if (mode == Scalr.Mode.FIT_TO_HEIGHT) { x = (bufferedImage.getWidth() - width) / 2; } bufferedImage = Scalr.crop(bufferedImage, x, y, width, height); return bufferedImage; }\n\nUsing Scalr library:\n\n<dependency> <groupId>org.imgscalr</groupId> <artifactId>imgscalr-lib</artifactId> <version>4.2</version> </dependency>\n\nJustinas JakavonisJustinas Jakavonis\n\n8,Here\'s a small piece of code that I wrote, it resizes the image to fit the container while keeping the image\'s original aspect ratio. It takes in as parameters the container\'s width, height and the image.""""""']",,
swing,JLabel,How to resize JLabel ImageIcon?,,,"['""""""How to resize JLabel ImageIcon? I\'m making a Java Swing application that has the following layout (MigLayout):\n\n[icon][icon][icon][....] where icon = jlabel and the user can add more icons\n\nWhen the user adds or removes icons, the others should shrink or grow. My question is really straightforward: I have a JLabel which contains an ImageIcon; how can I resize this icon? Marcos Roriz JuniorMarcos Roriz Junior\n\n4,1\n\n.... following layout.""""""', '""""""is FlowLayout ??? (defalut Layout is there isn\'t defined anything) download.oracle.com/javase/tutorial/uiswing/layout/index.html, are you know download.oracle.com/javase/tutorial/uiswing/components/…\n\n\n\nImageIcon imageIcon = new ImageIcon(""./img/imageName.png""); // load the image to a imageIcon Image image = imageIcon.getImage(); // transform it Image newimg = image.getScaledInstance(120, 120, java.awt.Image.SCALE_SMOOTH); // scale it the smooth way imageIcon = new ImageIcon(newimg); // transform it back\n\ntrolologuytrolologuy\n\n2,0\n\nResizing the icon is not straightforward. You need to use Java\'s graphics 2D to scale the image. The first parameter is a Image class which you can easily get from ImageIcon class. You can use ImageIcon class to load your image file and then simply call getter method to get the image. private Image getScaledImage(Image srcImg, int w, int h){ BufferedImage resizedImg = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB); Graphics2D g2 = resizedImg.createGraphics(); g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); g2.drawImage(srcImg, 0, 0, w, h, null); g2.dispose(); return resizedImg; }\n\nSuken ShahSuken Shah\n\n1,0\n\nImageIcon imageIcon = new ImageIcon(new ImageIcon(""icon.png"").getImage().getScaledInstance(20, 20, Image.SCALE_DEFAULT)); label.setIcon(imageIcon);\n\nFrom: Resize a picture to fit a JLabel\n\nuser4718768user4718768\n\nThis will keep the right aspect ratio. public ImageIcon scaleImage(ImageIcon icon, int w, int h) { int nw = icon.getIconWidth(); int nh = icon.getIconHeight(); if(icon.getIconWidth() > w) { nw = w; nh = (nw * icon.getIconHeight()) / icon.getIconWidth(); } if(nh > h) { nh = h; nw = (icon.getIconWidth() * nh) / icon.getIconHeight(); } return new ImageIcon(icon.getImage().getScaledInstance(nw, nh, Image.SCALE_DEFAULT)); }\n\nKyle PhillipsKyle Phillips\n\nOne (quick & dirty) way to resize images it to use HTML & specify the new size in the image element. This even works for animated images with transparency. Andrew ThompsonAndrew Thompson\n\nI agree this code works, to size an ImageIcon from a file for display while keeping the aspect ratio I have used the below. /* * source File of image, maxHeight pixels of height available, maxWidth pixels of width available * @return an ImageIcon for adding to a label */ public ImageIcon rescaleImage(File source,int maxHeight, int maxWidth) { int newHeight = 0, newWidth = 0; // Variables for the new height and width int priorHeight = 0, priorWidth = 0; BufferedImage image = null; ImageIcon sizeImage; try { image = ImageIO.read(source); // get the image } catch (Exception e) { e.printStackTrace(); System.out.println(""Picture upload attempted & failed""); } sizeImage = new ImageIcon(image); if(sizeImage != null) { priorHeight = sizeImage.getIconHeight(); priorWidth = sizeImage.getIconWidth(); } // Calculate the correct new height and width if((float)priorHeight/(float)priorWidth > (float)maxHeight/(float)maxWidth) { newHeight = maxHeight; newWidth = (int)(((float)priorWidth/(float)priorHeight)*(float)newHeight); } else { newWidth = maxWidth; newHeight = (int)(((float)priorHeight/(float)priorWidth)*(float)newWidth); } // Resize the image // 1. Create a new Buffered Image and Graphic2D object BufferedImage resizedImg = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_INT_RGB); Graphics2D g2 = resizedImg.createGraphics(); // 2. Use the Graphic object to draw a new image to the image in the buffer g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); g2.drawImage(image, 0, 0, newWidth, newHeight, null); g2.dispose(); // 3. Convert the buffered image into an ImageIcon for return return (new ImageIcon(resizedImg)); }\n\nI found that there is a minor edit to this fix from trolologuy on the last line of code, you will need to implement a new ImageIcon to get the code to compile properly (Yes I know this is 10 years ago). I found this to be an easy fix for a one off issue, but Suken Shah and Mr. Polywhirl have a better fix overall. ImageIcon imageIcon = new ImageIcon(""./img/imageName.png""); // assign image to a new ImageIcon Image image = imageIcon.getImage(); // transform it Image newimg = image.getScaledInstance(120, 120, java.awt.Image.SCALE_SMOOTH); // scale it smoothly ImageIcon newImageIcon = new ImageIcon(newimg); // assign to a new ImageIcon instance\n\n""""""']",,
swing,JPanel,Java JPanel resize Image,,,"['"""""" Image resizing and displaying in a JPanel or a JLabel without loss of quality\n\nI\'m developing a java program to capture employee images at the time of registration using a webcam. I can obtain the picture without any problem, and save it in my C: drive but upon retrieval of the image only a part of the image is displayed on the label. Is there a way of re sizing the JPEG before saving it? or before displaying it? like shrinking it without a quality loss. okay guys...""""""', '""""""is FlowLayout ??? (defalut Layout is there isn\'t defined anything) download.oracle.com/javase/tutorial/uiswing/layout/index.html, are you know download.oracle.com/javase/tutorial/uiswing/components/…\n\n\n\nImageIcon imageIcon = new ImageIcon(""./img/imageName.png""); // load the image to a imageIcon Image image = imageIcon.getImage(); // transform it Image newimg = image.getScaledInstance(120, 120, java.awt.Image.SCALE_SMOOTH); // scale it the smooth way imageIcon = new ImageIcon(newimg); // transform it back\n\ntrolologuytrolologuy\n\n2,0\n\nResizing the icon is not straightforward. You need to use Java\'s graphics 2D to scale the image. The first parameter is a Image class which you can easily get from ImageIcon class. You can use ImageIcon class to load your image file and then simply call getter method to get the image. private Image getScaledImage(Image srcImg, int w, int h){ BufferedImage resizedImg = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB); Graphics2D g2 = resizedImg.createGraphics(); g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); g2.drawImage(srcImg, 0, 0, w, h, null); g2.dispose(); return resizedImg; }\n\nSuken ShahSuken Shah\n\n1,0\n\nImageIcon imageIcon = new ImageIcon(new ImageIcon(""icon.png"").getImage().getScaledInstance(20, 20, Image.SCALE_DEFAULT)); label.setIcon(imageIcon);\n\nFrom: Resize a picture to fit a JLabel\n\nuser4718768user4718768\n\nThis will keep the right aspect ratio. public ImageIcon scaleImage(ImageIcon icon, int w, int h) { int nw = icon.getIconWidth(); int nh = icon.getIconHeight(); if(icon.getIconWidth() > w) { nw = w; nh = (nw * icon.getIconHeight()) / icon.getIconWidth(); } if(nh > h) { nh = h; nw = (icon.getIconWidth() * nh) / icon.getIconHeight(); } return new ImageIcon(icon.getImage().getScaledInstance(nw, nh, Image.SCALE_DEFAULT)); }\n\nKyle PhillipsKyle Phillips\n\nOne (quick & dirty) way to resize images it to use HTML & specify the new size in the image element. This even works for animated images with transparency. Andrew ThompsonAndrew Thompson\n\nI agree this code works, to size an ImageIcon from a file for display while keeping the aspect ratio I have used the below. /* * source File of image, maxHeight pixels of height available, maxWidth pixels of width available * @return an ImageIcon for adding to a label */ public ImageIcon rescaleImage(File source,int maxHeight, int maxWidth) { int newHeight = 0, newWidth = 0; // Variables for the new height and width int priorHeight = 0, priorWidth = 0; BufferedImage image = null; ImageIcon sizeImage; try { image = ImageIO.read(source); // get the image } catch (Exception e) { e.printStackTrace(); System.out.println(""Picture upload attempted & failed""); } sizeImage = new ImageIcon(image); if(sizeImage != null) { priorHeight = sizeImage.getIconHeight(); priorWidth = sizeImage.getIconWidth(); } // Calculate the correct new height and width if((float)priorHeight/(float)priorWidth > (float)maxHeight/(float)maxWidth) { newHeight = maxHeight; newWidth = (int)(((float)priorWidth/(float)priorHeight)*(float)newHeight); } else { newWidth = maxWidth; newHeight = (int)(((float)priorHeight/(float)priorWidth)*(float)newWidth); } // Resize the image // 1. Create a new Buffered Image and Graphic2D object BufferedImage resizedImg = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_INT_RGB); Graphics2D g2 = resizedImg.createGraphics(); // 2. Use the Graphic object to draw a new image to the image in the buffer g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); g2.drawImage(image, 0, 0, newWidth, newHeight, null); g2.dispose(); // 3. Convert the buffered image into an ImageIcon for return return (new ImageIcon(resizedImg)); }\n\nI found that there is a minor edit to this fix from trolologuy on the last line of code, you will need to implement a new ImageIcon to get the code to compile properly (Yes I know this is 10 years ago). I found this to be an easy fix for a one off issue, but Suken Shah and Mr. Polywhirl have a better fix overall. ImageIcon imageIcon = new ImageIcon(""./img/imageName.png""); // assign image to a new ImageIcon Image image = imageIcon.getImage(); // transform it Image newimg = image.getScaledInstance(120, 120, java.awt.Image.SCALE_SMOOTH); // scale it smoothly ImageIcon newImageIcon = new ImageIcon(newimg); // assign to a new ImageIcon instance\n\n""""""']",,